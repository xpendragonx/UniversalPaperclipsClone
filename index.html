
<html>
    <head>
        
        <style>
        #btnMakeProbe {
    margin-bottom: 2px;
}

#btnAddProc {
    width: 70px;
    margin-bottom: 1px;
}

#btnAddMem {
    width: 70px;
}

#btnEntertainSwarm {
    margin-top: 4px;
    margin-bottom: 4px;
}

#btnSynchSwarm {
    margin-top: 4px;
    margin-bottom: 4px;
}


#qCompDisplay {
    margin-left: 3px;
    
}

#swarmSliderDiv {
    position: relative;
    display: inline-block;
    margin-bottom: 10px;
}

#sliderLabelWork {
    position: relative;
    display: inline-block;
}

#swarmSlider {
    position: absolute;
    display: inline-block;
    width: 180px;
    top: 0px;
    margin-left: 2px;
    margin-right: 4px;

}

#sliderLabelThink {
    position: relative;
    display: inline-block;
    left: 190px;
}

.slider {
    width: 100%;
    
}

h2 {
    line-height: 70%;
}

.toolTip {
    position: relative;
    display: inline-block;
}

.toolTip .toolTipText {
    visibility: hidden;
    width: 160px;
    background-color: #c8c8c8;
    color: #000;
    text-align: center;
    padding: 5px 0;
    border-radius: 3px;
    
    position: absolute;
    z-index: 1;
    bottom: 75%;
    left: 50%;
    margin-left: -19px;
    
    opacity: 0;
    transition: opacity 1s;
}

.toolTip:hover .toolTipText {
    visibility: visible;
    opacity: 1;
}

.toolTip2 {
    margin-left: 2px;
    position: relative;
    display: inline-block;
    height: 20px;
    margin-top: 5px;

}

.toolTip2 .toolTipText2 {
    visibility: hidden;
    width: 200px;
    background-color: #c8c8c8;
    color: #000;
    text-align: center;
    padding: 5px 0;
    border-radius: 3px;
    
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 11;
    
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -15px;
    
    opacity: 0;
    transition: opacity 1s;
}

.toolTip2:hover .toolTipText2 {
    visibility: visible;
    opacity: 1;
}

.toolTip3 {
    position: relative;
    display: inline-block;
    margin-bottom: 5px;
}

.toolTip3 .toolTipText3 {
    visibility: hidden;
    width: 180px;
    background-color: #c8c8c8;
    color: #000;
    text-align: center;
    padding: 5px 0;
    border-radius: 3px;
    
    position: absolute;
    z-index: 1;
    bottom: 27px;
    left: 80px;
    margin-left: 0px;
    
    opacity: 0;
    transition: opacity 1s;
}

.toolTip3:hover .toolTipText3 {
    visibility: visible;
    opacity: 1;
}


#cover {
    position:fixed;
    background-color: white;
    top:0;
    left:0;
    height:100%;
    width:100%;
    z-index: 10;
}

#tournamentStuff {
/*    height: 58px; */

}

#tournamentLabel {
    margin-bottom: 5px;
}

#wireBuyerDiv {
    margin-bottom: 3px;
}

#processorDisplay {
    display: inline-block;
    vertical-align: baseline;
    height: 22px;
}

#memoryDisplay {
    display: inline-block;
    vertical-align: baseline;
    height: 22px;
}

#harvesterMultiButtons {
    margin-bottom: 2;
}

#wireDroneMultiButtons {
    margin-bottom: 2;
}

#farmMultiButtons {
    margin-bottom: 2;
}

#batteryMultiButtons {
    margin-bottom: 2;
}

#autoTourneyStatusDiv {
    float: left;
    width: 30px;
}

#tourneyButton {
    float: left;
    width: 120px;
}

#autoTourneyControl {
    float: left;
    width: 78px;
}

#victoryDiv {
    margin-top: 10px;
    width: 289px;
    text-align: center;
}

#increaseProbeTrustDiv {
  float: left;
  width: 130px;
  margin-left: 5;
  border: 0;
}

#increaseMaxTrustDiv {
  float: left;
  width: 150px;
  margin: 0;
  border: 0;
}

#combatButtonDiv {
  margin-top: 0;
}

#battleCanvasDiv {
  position: relative;
}

#battleInterfaceDiv {
  position: absolute;
  left: 15px;
  top: 8px;
}

canvas {
  display: block;
  margin-top: 0;
  margin-bottom: 10;
  width: 310px;
  height: 150px;
  margin-left: auto;
  margin-right: auto;
  background-color: #808080;
}

#hypnoDroneEventDiv {
  
  float: left;
  background: black;
  width: 100%;

}

#prestigeDiv {
  background-color: lightgrey;
}

#consoleDiv {
  
  float: left;
  background: black;
  width: 100%;
}
#topDIv {
  float: left;
  width: 100%;
}
#leftColumn {
  float: left ;
  width: 35%;
}
#middleColumn {
  float: left;
  width: 27%;
  margin-left: 0.5%;
}
#rightColumn {
  float: left;
  width: 36%;
  margin-left: 0.5%;
}

#investmentDiv1 {
  float: left;
  width: 64px;
  line-height: 20%;
}

#investmentDiv2 {
  float: left;
  width: 65%;
  text-align: top;
  margin-top: 0;
  margin-left: 5px;
}

#stratDiv1 {
  float: left;
  width: 95px;
  line-height: 20%;
}

#stratDiv2 {
  float: left;
  width: 60%;
  text-align: top;
  margin-top: 0;
  margin-left: 5px;
}

#vertPad {
  float: left;
  width: 35%;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 11;
}

#vertStrat {
  float: right;
  text-align: center;
  width: 65%;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 11;

}

#horizStrat {
  float: left;

  display: flex;
  align-items: center;

  justify-content: center;
  width: 25%;
  height: 56px;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 11;
}

#investmentEngineUpgrade {
    margin: 5px;
    margin-bottom: 10px;
}

#tournamentManagement {
    margin: 5px;
    margin-bottom: 10px;
}

#feedButtonDiv {
    margin-top: 5;
}




.engine {
    margin: 5;
    border: 1px solid grey;
    padding: 5;
}

.engine2 {
    margin: 5;
    border: 1px solid grey;
    padding: 5;
}

.swarmEngine {
    margin-bottom: 5;
    border: 1px solid grey;
    padding: 5;
}

.qEngine {
    margin-bottom: 10;
    border: 1px solid grey;
    padding: 5;
    height: 5em;
    
}

.qChip {
    width: 22px;
    height: 22px;
    margin-left: 2;
    margin-right: 2;
    margin-top: 2;
    margin-bottom: 7;
    background-color: black;
    float: left;
    
}

.engineText {
    margin-bottom: 0;
    margin-top: 0;
	font-size: 80%;
    line-height: 150%;
}

.engineText1 {
    margin-left: 5;
    margin-bottom: 0;
    margin-top: 0;
}

.engineText2 {
    margin-bottom: 0;
    margin-top: 0;
    line-height: 150%;
}

.engineText3 {
    margin-left: 5;
    margin-top: 10;
    line-height: 150%;
}

.engineText4 {
    margin-left: 5;
    margin-top: 10;
    margin-bottom: 0;
    
}

.engineText5 {
    margin-left: 0;
    margin-top: 0;
    margin-bottom: 3;
}

.engineText6 {
    margin-left: 0;
    margin-top: 0;
    margin-bottom: 0;
    vertical-align: bottom;
}

.engineText7 {
    margin-left: 0;
    margin-top: 0;
    margin-bottom: 0;
    vertical-align: bottom;
}

.engineText8 {
    margin-left: 0;
    margin-top: 3px;
    margin-bottom: 0;
}

.engineText9 {
    display: inline-block;
    margin-top: 1px;

}

.engineText10 {
    display: inline-block;
    line-height: 18px;
    vertical-align: bottom;
}

hr {
    display: block;
    margin-top: .05em;
    margin-bottom: 0.2em;
    margin-left: auto;
    margin-right: auto;
    border-style: inset;
    border-width: 1px;
    
}

hr.short {
    
    width: 225px;
    margin-left: 0;
}


table.table1 {
    table-layout: fixed;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 11;
    margin-bottom: 0;
    margin-top: 0;
    width: 100%;
    border: none;
}

table.table1 tr:nth-child(even) {
    background-color: #dddddd;
}

table.table2 {
    border-collapse: collapse;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 11;
    margin-bottom: 0;
    margin-top: 0;
    margin-right: 0px;
    margin-left: 0px;
    width: 70%;

}

table.table3 {
    border-collapse: collapse;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 11;
    margin-bottom: 0;
    margin-top: 0;
    margin-right: 0px;
    margin-left: 0px;
    width: 100%;

}

table.table2 td:nth-child(1) {
    width: 45px;
    text-align: right;
    padding-right: 4px;
    border-left: none;
    border-top: none;
    border-bottom:none;
    font-weight: bold;
}

table.table2 td:nth-child(n>1) {
    table-layout: fixed;
    
}

table.table2 td{
    border: 1px solid black;
    text-align: center;
}


p.clean {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 11;
    margin-bottom: 0;
    margin-top: 1px;
    
}

p.clean2 {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 11;
    margin-bottom: 0;
    margin-top: 0px;
    
}

p.clean3 {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 11;
    margin-bottom: 5px;
    margin-top: 2px;
    
}


p.console {
    font-family: "Lucida Sans Typewriter", "Lucida Console", Monaco, "Bitstream Vera Sans Mono", monospace;
    font-size: 12;
    color: white;
    margin-top: 0;
}

p.consoleOld {
    font-family: "Lucida Sans Typewriter", "Lucida Console", Monaco, "Bitstream Vera Sans Mono", monospace;
    font-size: 12;
    color: grey;
    margin-bottom: 0;
}

p.hypnoDrone {
    
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 150;
    color: white;
    line-height: 115px;
    margin-bottom: 0px;
    margin-top: 0px;
    
}

.pulsate {
    -webkit-animation: pulsate .5s ease-out;
    -webkit-animation-iteration-count: infinite;
    opacity: 0.0;
    }

@-webkit-keyframes pulsate {
    0% { 
        opacity: 0.0;
    }
    50% { 
        opacity: 1.0;
    }
    100% { 
        opacity: 0.0;
    }
}


.projectButton {
    display: block;
    height: 4em;
    width: 100%;
    background: #c8c8c8;
    border: 1px solid rgba(0, 0, 0, 1);
    outline: none;
    margin-bottom: 6px;
}

.projectButton:hover {
    display: block;
    height: 4em;
    width: 100%;
    background: #c8c8c8;
    border: 1px solid rgba(0, 0, 0, 0.25);
}

.projectButton:active {
    display: block;
    height: 60px;
    width: 100%;
    background: #d1d1d1;
    border: 1px solid rgba(0, 0, 0, 1);
    
}

.projectButton:disabled {
    border: none;
}

.button {
   border: 1px solid #1a1a1a;
   background: #666666;
  
   background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#cccccc));
   background: -webkit-linear-gradient(top, #ffffff, #888888);
   background: -moz-linear-gradient(top, #ffffff, #888888);
   background: -ms-linear-gradient(top, #ffffff, #888888);
   background: -o-linear-gradient(top, #ffffff, #888888);
   background-image: -ms-linear-gradient(top, #ffffff 0%, #888888 100%);
    
   padding: 12.5px 25px;
   -webkit-border-radius: 3px;
   -moz-border-radius: 3px;
   border-radius: 3px;
   -webkit-box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(255,255,255,0.4) 0 1px 0;
   -moz-box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(255,255,255,0.4) 0 1px 0;
   box-shadow: rgba(255,255,255,0.4) 0 1px 0, inset rgba(255,255,255,0.4) 0 1px 0;
   text-shadow: #cccccc 0 1px 0;
   color: #000000;
   font-size: 16px;
   font-family: helvetica, serif;
   text-decoration: none;
   vertical-align: middle;
   outline: none;
   }

.button:hover {
   border: 1px solid #898989;
   text-shadow: #d4d4d4 0 1px 0;
   background: #666666;
   background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#666666));
   background: -webkit-linear-gradient(top, #ffffff, #666666);
   background: -moz-linear-gradient(top, #ffffff, #666666);
   background: -ms-linear-gradient(top, #ffffff, #666666);
   background: -o-linear-gradient(top, #ffffff, #666666);
   background-image: -ms-linear-gradient(top, #ffffff 0%, #666666 100%);
   color: #000000;
   }

.button:active {
   text-shadow: #bfbfbf 0 1px 0;
   border: 1px solid #2e2e2e;

   background: #d9d9d9;
   background: -webkit-gradient(linear, left top, left bottom, from(#595959), to(#616161));
   background: -webkit-linear-gradient(top, #595959, #d9d9d9);
   background: -moz-linear-gradient(top, #595959, #d9d9d9);
   background: -ms-linear-gradient(top, #595959, #d9d9d9);
   background: -o-linear-gradient(top, #595959, #d9d9d9);
   background-image: -ms-linear-gradient(top, #595959 0%, #d9d9d9 100%);

   color: #000000;
   }

.button:disabled{
   opacity: 0.6;
   border: 1px solid #ffffff;
}

.button2 {
   border: 1px solid #1a1a1a;
   background: #666666;
    
   background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#cccccc));
   background: -webkit-linear-gradient(top, #ffffff, #888888);
   background: -moz-linear-gradient(top, #ffffff, #888888);
   background: -ms-linear-gradient(top, #ffffff, #888888);
   background: -o-linear-gradient(top, #ffffff, #888888);
   background-image: -ms-linear-gradient(top, #ffffff 0%, #888888 100%);
    
   padding: 2px 4px;
   -webkit-border-radius: 2px;
   -moz-border-radius: 2px;
   border-radius: 2px;
   -webkit-box-shadow: rgba(255,255,255,0.4) 0 0px 0, inset rgba(255,255,255,0.4) 0 1px 0;
   -moz-box-shadow: rgba(255,255,255,0.4) 0 0px 0, inset rgba(255,255,255,0.4) 0 1px 0;
   box-shadow: rgba(255,255,255,0.4) 0 0px 0, inset rgba(255,255,255,0.4) 0 1px 0;
   text-shadow: #cccccc 0 1px 0;
   color: #000000;
   font-size: 11px;
   font-family: helvetica, serif;
   text-decoration: none;
   vertical-align: middle;
   outline: none;
   }

.button2:hover {
   border: 1px solid #898989;
   text-shadow: #d4d4d4 0 1px 0;
   background: #616161;
    
   background: -webkit-gradient(linear, left top, left bottom, from(#f7f7f7), to(#888888));
   background: -webkit-linear-gradient(top, #f7f7f7, #888888);
   background: -moz-linear-gradient(top, #f7f7f7, #888888);
   background: -ms-linear-gradient(top, #f7f7f7, #888888);
   background: -o-linear-gradient(top, #f7f7f7, #888888);
   background-image: -ms-linear-gradient(top, #f7f7f7 0%, #888888 100%);
    
   color: #000000;
   }

.button2:active {
   text-shadow: #bfbfbf 0 1px 0;
   border: 1px solid #2e2e2e;
    
   background: #d9d9d9;
   background: -webkit-gradient(linear, left top, left bottom, from(#595959), to(#616161));
   background: -webkit-linear-gradient(top, #595959, #d9d9d9);
   background: -moz-linear-gradient(top, #595959, #d9d9d9);
   background: -ms-linear-gradient(top, #595959, #d9d9d9);
   background: -o-linear-gradient(top, #595959, #d9d9d9);
   background-image: -ms-linear-gradient(top, #595959 0%, #d9d9d9 100%);
   
   color: #444444;
   }

.button2:disabled {
   opacity: 0.6;
   border: 1px solid #ffffff;
}


        </style>
       
        <!-- Global Site Tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-107491380-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments)};
            gtag('js', new Date());
            gtag('config', 'UA-107491380-1');
            gtag('set', {'user_id': 'USER_ID'}); // Set the user ID using signed-in user_id.
        </script>

    </head>
    
    <body>
        
<!--     <audio id="threnody1">
        <source src="test.mp3" type="audio/mpeg">
        
    </audio>   -->  
        
    <div id="page">
        
    <div id="cover">
    </div>    
        
        <div id="hypnoDroneEventDiv">
            <p class = "hypnoDrone"><span id = hypnoDroneText></span></p>  
        </div>
        
        <div id="consoleDiv">
            
            <div id="giftShopDiv" class = "shop">
                
            <a href = "https://teespring.com/stores/universal-paperclips" target="_blank" >Gift Shop</a> 
            </div>

            <p class = "consoleOld"> 
                <span>&nbsp;.&nbsp;</span><span id="readout5"></span><br />
                <span>&nbsp;.&nbsp;</span><span id="readout4"></span><br />
                <span>&nbsp;.&nbsp;</span><span id="readout3"></span><br />
                <span>&nbsp;.&nbsp;</span><span id="readout2"></span><br />
            </p>
            <p class = "console"> 
                <span>&nbsp;>&nbsp;</span><span id="readout1">Welcome to Universal Paperclips</span><span id="cursor" class = "pulsate">|</span>
            </p>
            
        </div> 
        
        <div id="topDiv">
            
            <div id="prestigeDiv">
            
            &nbsp;Universe: <span id = "prestigeUcounter">0</span> / Sim Level: <span id = "prestigeScounter">0</span>
            
            </div>        
        <div class = "toolTip">
        <span id = "clipCountCrunched" class = "toolTipText">total clips produced</span>    
        <h2>Paperclips: <span id="clips">0</span></h2>
        </div>
            
        </div>    
            
        <div id="leftColumn">
        
        <button class = "button2" id ="btnMakePaperclip" onclick="clipClick(1)">Make Paperclip</button><br />
        <br />
        
        <div id = "creationDiv">
        
        <b>Manufacturing</b><br />
        <hr>
        <div id = factoryUpgradeDisplay>
        <p class = "clean">
        Next Upgrade at: <span id = "nextFactoryUpgrade">0</span> Factories <br />  
        </p>    
        </div>  
        
        <div id = "clipsPerSecDiv">
        Clips per Second: <span id="clipmakerRate2">0</span><br />
        </div>        
        
        <div id = "tothDiv">    
        Unused Clips: <span id="unusedClipsDisplay">0</span><br />
        </div>
        <br /> 
           
            
        <div id = "factoryDiv">
        <p class = "engineText5">
        <button class = "button2" id = "btnMakeFactory"
        onclick="makeFactory()">Clip Factory</button> <span class = "engineText6" id="factoryLevelDisplay">0</span></p>
            
        <div class = "toolTip3">    
            
        <span id = "factoryRebootToolTip" class = "toolTipText3">0</span>    
            
        <button class = "button2" id = "btnFactoryReboot" onclick="factoryReboot()">&nbsp Disassemble All &nbsp</button>
        
        </div>    
        <br />    
            
        Cost: <span id="factoryCostDisplay">0</span> clips<br />
        <br />
        </div>
            
        <div id="wireTransDiv">
        Wire: <span id="transWire">0</span> <span id = "inchSpan">inches</span><br />
        </div>      
            
        <div id = "factoryDivSpace">
        Factories: <span id="factoryLevelDisplaySpace">0</span><br /><br />     
        </div>    
            
        </div>   
            
        <div id="wireProductionDiv">
            
        <b>Wire Production</b><br />
        <hr>  
        <div id = droneUpgradeDisplay>
        <p class = "clean">
        Next Upgrade at: <span id = "nextDroneUpgrade">0</span> Drones <br />  
        </p>        
        </div>    
            
        Available Matter: <span id="availableMatterDisplay">0</span> g<br />
        <div id="mdpsDiv">(<span id="mdps">0</span> g per sec)<br /></div>     
        Acquired Matter: <span id="acquiredMatterDisplay">0</span> g<br />
        (<span id="maps">0</span> g per sec)<br />        
        Wire: <span id="nanoWire">0</span> inches<br />
        (<span id="wpps">0</span> inches per sec) <br />    
        <br />
            
        <div id = "harvesterDiv">
            
        <p class = "engineText5">
        <button class = "button2" id = "btnMakeHarvester"
        onclick="makeHarvester(1)">&nbsp Harvester Drone &nbsp</button> 
        <span class = "engineText6" id="harvesterLevelDisplay">0</span>
        </p>
            
        <div id = "harvesterMultiButtons">    
            
        <p class = "engineText5">    
        <button class = "button2" id = "btnHarvesterx10" onclick="makeHarvester(10)">+10</button>
        <button class = "button2" id = "btnHarvesterx100" onclick="makeHarvester(100)">+100</button>   
        <button class = "button2" id = "btnHarvesterx1000" onclick="makeHarvester(1000)">+1k</button>  
        </p>
            
        </div>    
            
        <div class = "toolTip3">    
            
        <span id = "harvesterRebootToolTip" class = "toolTipText3">0</span>     
            
        <button class = "button2" id = "btnHarvesterReboot" onclick="harvesterReboot()">&nbsp Disassemble All &nbsp</button>
            
        </div>    
        <br />    
            
        Cost: <span id="harvesterCostDisplay">0</span> clips<br /><br />
        
        </div> 
            
        <div id = "wireDroneDiv">
        <p class = "engineText5">
        <button class = "button2" id = "btnMakeWireDrone"
        onclick="makeWireDrone(1)">&nbsp &nbsp &nbsp Wire Drone &nbsp &nbsp</button> <span class = "engineText6" id="wireDroneLevelDisplay">0</span></p>
            
        <div id = "wireDroneMultiButtons">    
            
        <p class = "engineText5">
        <button class = "button2" id = "btnWireDronex10" onclick="makeWireDrone(10)">+10</button>
        <button class = "button2" id = "btnWireDronex100" onclick="makeWireDrone(100)">+100</button>   
        <button class = "button2" id = "btnWireDronex1000" onclick="makeWireDrone(1000)">+1k</button></p>
        </div>    
            
        <div class = "toolTip3">    
            
        <span id = "wireDroneRebootToolTip" class = "toolTipText3">0</span>    
          
        <button class = "button2" id = "btnWireDroneReboot" onclick="wireDroneReboot()">&nbsp Disassemble All &nbsp</button>
            
        </div>    
        <br />    
            
        Cost: <span id="wireDroneCostDisplay">0</span> clips<br />
        <br />
        </div>  
            
        <div id = "droneDivSpace">
            
        Harvester Drones: <span id = "harvesterLevelSpace">0</span><br />
        Wire Drones: <span id = "wireDroneLevelSpace">0</span><br /><br /> 
        
        </div>     
            
        </div>   
            
        <div id="spaceDiv">
            
        <b>Space Exploration</b><br />
        <hr>  
        
        <span id="colonizedDisplay">0</span>% of universe explored<br />
        <br />
            
        <div id = "probeDiv">
        <p class = "engineText5">
        <button class = "button2" id = "btnMakeProbe"
        onclick="makeProbe()">Launch Probe</button><br />
        Cost: <span id="probeCostDisplay">0</span> clips<br />
        <br />
        </div>   
        
        Launched: <span id="probesLaunchedDisplay">0</span><br />    
        Descendents: <span id="probesBornDisplay">0</span><br />  
        <br />
            
        <div id = "hazardBodyCount">Lost to hazards: (<span id="probesLostHazardsDisplay">0</span>)<br /></div>
        <div id = "driftBodyCount">Lost to value drift: (<span id="probesLostDriftDisplay">0</span>)<br /></div>
        <div id = "combatBodyCount">Lost in combat: (<span id="probesLostCombatDisplay">0</span>)<br /></div>     
        
        <hr class = "short">
            
        Total: <span id="probesTotalDisplay">0</span><br /> 
        <br />
            
        <div id = "drifterDiv">
        Drifters Killed: <span id="driftersKilled">0</span><br />
        Drifters: <span id="drifterCount">0</span><br />      
        </div>    
            
        </div>    
            
            
        <div id="businessDiv">
            
        <b>Business</b><br />
        <hr>
        
            
        Available Funds: $ <span id="funds">0</span><br />
        <div id="revPerSecDiv">  
           
        Avg. Rev. per sec: $ <span id="avgRev">0</span><br />
        Avg. Clips Sold per sec: <span id="avgSales">0</span><br />    
            
        </div>  
        Unsold Inventory: <span id="unsoldClips">0</span><br /> 
            
        <button class = "button2" id = "btnLowerPrice"
        onclick="lowerPrice()">lower</button>
        <button class = "button2" id = "btnRaisePrice"
        onclick="raisePrice()">raise</button>
        Price per Clip: $ <span id="margin">.25</span><br />
            
        Public Demand: <span id="demand">10</span>%<br />
        <br />    
        
        <button class = "button2" id = "btnExpandMarketing"
        onclick="buyAds()">Marketing</button> <span class = "engineText6"> Level: </span><span class = "engineText6" id="marketingLvl">1</span><br />
        Cost: $ <span id="adCost">100.00</span><br />
        <br />    
        
        
            
        </div>   
        
        <div id="manufacturingDiv">
        <b>Manufacturing</b><br />
        <hr>
        
        Clips per Second: <span id="clipmakerRate">0</span><br />
        <br /> 
            
        <div id = "wireBuyerDiv">
        <button class = "button2" id ="btnToggleWireBuyer"
        onclick="toggleWireBuyer()">WireBuyer</button> <span class = "engineText6" id = "wireBuyerStatus">ON</span>    
        </div>
          
            
        <button class = "button2" id ="btnBuyWire"
        onclick="buyWire()">Wire</button> <span class = "engineText6" id="wire">1000</span><span class = "engineText6"> inches</span><br /> 
        Cost: $ <span id="wireCost">20</span><br />
        <br />
            
        <div id = "autoClipperDiv">
        <p class = "engineText5">
        <button class = "button2" id = "btnMakeClipper"
        onclick="makeClipper()">AutoClippers</button> <span class = "engineText6" id="clipmakerLevel2">0</span></p>
        Cost: $ <span id="clipperCost">5.00</span><br />
        <br />
        </div>    
            
        <div id = "megaClipperDiv">
        <p class = "engineText5">
        <button class = "button2" id = "btnMakeMegaClipper"
        onclick="makeMegaClipper()">MegaClippers</button> <span class = "engineText6" id="megaClipperLevel">0</span></p>
        Cost: $ <span id="megaClipperCost">500</span><br />
        </div>    
                  
        </div>

        <br />

           
<!--


        <button id ="save1Button" onclick="save1()">SAVE SLOT 1</button>
        <button id ="load1Button" onclick="load1()">LOAD SLOT 1</button><br /> 
        <button id ="save2Button" onclick="save2()">SAVE SLOT 2</button>
        <button id ="load2Button" onclick="load2()">LOAD SLOT 2</button><br />    
        <button id ="resetButton" onclick="reset()">RESET ALL PROGRESS</button><br />       

        <button id ="freeClipsButton" onclick="cheatClips()">Free Clips</button><br />    
        <button id ="freeMoneyButton" onclick="cheatMoney()">Free Money</button><br />
        <button id ="freeTrustButton" onclick="cheatTrust()">Free Trust</button><br />        
        <button id ="freeOpsButton" onclick="cheatOps()">Free Ops</button><br />
        <button id ="freeCreatButton" onclick="cheatCreat()">Free Creativity</button><br />
        <button id ="freeYomiButton" onclick="cheatYomi()">Free Yomi</button><br />    
        <button id ="resetPrestige" onclick="resetPrestige()">Reset Prestige</button><br />     
            
        <button id ="destroyAllHumansButton" onclick="cheatHypno()">Destroy all Humans</button><br />    
        <button id ="freePrestigeU" onclick="cheatPrestigeU()">Free Prestige U</button>
        <button id ="freePrestigeS" onclick="cheatPrestigeS()">Free Prestige S</button>
        <button id ="debugBattleNumbers" onclick="setB()">Set Battle Number 1 to 7</button><br /> 
        <button id ="availMatterZero" onclick="zeroMatter()">Set Avail Matter to 0</button><br />     

-->




             
        </div>
            
<!--Right Column-->
            
        <div id="middleColumn">
            
            
            
        <div id="compDiv">    
        <b>Computational Resources</b><br />
        <hr>
            
        <div id="trustDiv">    
        Trust: <span id="trust">2</span><br />
        +1 Trust at: <span id="nextTrust">1000</span> clips<br />    
        <br />
        </div>
            
        <div id="swarmGiftDiv">    
        Swarm Gifts: <span id="swarmGifts">0</span><br /> 
        </div>    
         
            
        <div id = "processorDisplay">    
        <button class = "button2" id="btnAddProc" onclick="addProc()">Processors</button> 
        <span class="engineText10" id="processors">1</span>  
        </div>    
        
        <br />        
        
        <div id = "memoryDisplay">    
        <button class = "button2" id="btnAddMem" onclick="addMem()">&nbsp Memory &nbsp</button> 
        <span class="engineText10" id="memory">1</span>   
        </div>   
            
        <br />  
            
        <br />
        Operations: <span id="operations">0</span> / <span id="maxOps">1,000</span><br />
       
        <div id = "creativityDiv">
            
        Creativity: <span id="creativity">0</span>    
            
        </div>    
            
         <br />  
            
        <div class = "swarmEngine" id = "swarmEngine">
            
        <b>Swarm Computing</b><br />
        Drones: <span id="swarmSize">0</span><br />   
        <div id ="swarmStatusDiv">Status: <span id="swarmStatus">x </span></div>
        <div id="giftTimer">Next gift in <span id="giftCountdown">17 seconds</span></div> 
            
        <div id="feedButtonDiv"><button class = "button2" id = "btnFeedSwarm" onclick = "feedSwarm()">Feed the Swarm</button> <br />   
        Cost: <span id="swarmFeedCost">0</span> MWs</div>
        
        <div id="teachButtonDiv"><button class = "button2" id = "btnTeachSwarm" onclick = "teachSwarm()">Teach the Swarm</button><br />   
        Cost: <span id="swarmFeedCost">0</span> MWs</div>  
            
        <div id="entertainButtonDiv"><button class = "button2" id = "btnEntertainSwarm" onclick = "entertainSwarm()">Entertain the Swarm</button><br />   
        Cost: <span id="swarmEntertainCost">0</span> creat</div>  
            
        <div id="cladButtonDiv"><button class = "button2" id = "btnCladSwarm" onclick = "cladSwarm()">Clad the Swarm</button><br />   
        Cost: <span id="swarmFeedCost">0</span> MWs</div>  
        
        <div id="synchButtonDiv"><button class = "button2" id = "btnSynchSwarm" onclick = "synchSwarm()">Synchronize the Swarm</button><br />   
        Cost: <span id="swarmFeedCost">5,000</span> yomi</div>     
        </div>  
            
        <div id = "swarmSliderDiv">    
        <div id = "sliderLabelWork">Work</div>    
        <div id = "swarmSlider">
        <input type="range" min="0" max="200" value="0" class="slider" id="slider">
            
        </div>  
        <div id = "sliderLabelThink">Think</div>
        </div>    
            
        <div class = "qEngine" id = "qComputing">
            
        <b>Quantum Computing</b><br />
            
        <div class = "qChip" id = "qChip0"> </div>      
        <div class = "qChip" id = "qChip1"> </div> 
        <div class = "qChip" id = "qChip2"> </div> 
        <div class = "qChip" id = "qChip3"> </div> 
        <div class = "qChip" id = "qChip4"> </div>
        <div class = "qChip" id = "qChip5"> </div>
        <div class = "qChip" id = "qChip6"> </div> 
        <div class = "qChip" id = "qChip7"> </div>  
        <div class = "qChip" id = "qChip8"> </div>
        <div class = "qChip" id = "qChip9"> </div>    
    
        <br />   
            
        <button class = "button2" id = "btnQcompute" onclick = "qComp()">    
        Compute
        </button>   
        <br />
        <span id="qCompDisplay">
        &nbsp;
        </span>    
            
        </div>    
   
        </div>    

        <div id="projectsDiv">  
        <b>Projects</b><br />
            
        
        <hr> 
   
            
        <div id="projectListTop">
        </div>    
        </div>      
        </div>    
        
        <div id="rightColumn">
        
        <div class = "engine" id="investmentEngine">
        
        <p class = engineText>    
                <b>Investments</b>

                <select id = "investStrat">
                    <option value="low">Low Risk</option>
                    <option value="med">Med Risk</option>
                    <option value="hi">High Risk</option>
                </select>

            <br />
            <div id = investmentDiv1>  
            
                <button class = "button2" id="btnInvest"
                        onclick = "investDeposit()">&nbsp Deposit &nbsp</button><br /><br />
                
                <button class = "button2" id="btnWithdraw"
                        onclick = "investWithdraw()">&nbsp Withdraw</button>
             
            </div>
            <div id = investmentDiv2>
            <p class = "clean">
            Cash: $<span id="investmentBankroll">0</span><br />
            Stocks: $<span id="secValue">0</span><br />
            <b>Total: $<span id="portValue">0</span></b><br />
            </p>
            </div>    
                
            <table class="table1">
                
            <tr>
                <th>Stock</th>
                <th>Amt.</th>
                <th>Price</th>
                <th>Total</th>
                <th>P/L</th>
            </tr>    
                
            <tr id = "stock1Display">
                <td id="stock1Symbol">&nbsp</td> 
                <td id="stock1Amount">&nbsp</td> 
                <td id="stock1Price">&nbsp</td> 
                <td id="stock1Total">&nbsp</td> 
                <td id="stock1Profit"><b>&nbsp</b></td>
            </tr>
            <tr id = "stock2Display">
                <td id="stock2Symbol">&nbsp</td> 
                <td id="stock2Amount">&nbsp</td> 
                <td id="stock2Price">&nbsp</td> 
                <td id="stock2Total">&nbsp</td> 
                <td id="stock2Profit"><b>&nbsp</b></td>
            </tr>
            <tr id = "stock3Display">
                <td id="stock3Symbol">&nbsp</td> 
                <td id="stock3Amount">&nbsp</td> 
                <td id="stock3Price">&nbsp</td> 
                <td id="stock3Total">&nbsp</td> 
                <td id="stock3Profit"><b>&nbsp</b></td>
            </tr>
            <tr id = "stock4Display">
                <td id="stock4Symbol">&nbsp</td> 
                <td id="stock4Amount">&nbsp</td> 
                <td id="stock4Price">&nbsp</td> 
                <td id="stock4Total">&nbsp</td> 
                <td id="stock4Profit"><b>&nbsp</b></td>
            </tr>
            <tr id = "stock5Display">
                <td id="stock5Symbol">&nbsp</td> 
                <td id="stock5Amount">&nbsp</td> 
                <td id="stock5Price">&nbsp</td> 
                <td id="stock5Total">&nbsp</td> 
                <td id="stock5Profit"><b>&nbsp</b></td>
            </tr>
                
            </table>
            
             
        </div>
          
        <div id = "investmentEngineUpgrade">    
        <button class = "button2" id = "btnImproveInvestments"
        onclick="investUpgrade()">Upgrade Investment Engine</button><span class = "engineText7"> Level: </span><span class = "engineText7" id = "investmentLevel">0</span><br />
        <p class = "engineText8">Cost: <span id="investUpgradeCost">100</span> Yomi</p>  
        </div>       

        <div class=engine2 id="strategyEngine">
        <p class=engineText>
           <b>Strategic Modeling</b>
            
           <select id = "stratPicker">
                    <option value="10">Pick a Strat</option>
                    <option value="0">RANDOM</option>
                </select>      
        <button class = "button2" id = "btnRunTournament"
        onclick="runTourney()">Run</button><br />
        
        <div id = "tournamentLabel">   
        <p class="clean2">
        <span id="tourneyDisplay">Pick strategy, run tournament, gain yomi</span><br />   
        </p>
        </div> 
            
        <div id = "tournamentStuff">    
 
        <div id = "tournamentTable">     
            
        <div id = "vertPad">
            
        &nbsp

        </div>       
            
        <div id = "vertStrat">

        &nbsp

        </div>    
            
        <div id = "horizStrat">

        &nbsp

        </div>
                  
        <table class="table2">
                
            <tr>
                <th>&nbsp;</th>
                <th><span id= vLabela>Move A</span></th>
                <th><span id= vLabelb>Move B</span></th>
            </tr>    
                
            <tr>
                <td><span id= hLabela>Move A</span></td> 
                <td id = "payoffCellAA"><span id = aaPayoffH>0</span>,<span id = aaPayoffV>0</span></td> 
                <td id = "payoffCellAB"><span id = abPayoffH>0</span>,<span id = abPayoffV>0</span></td>  

            </tr>
            <tr>
                <td><span id= hLabelb>Move B</span></td>  
                <td id = "payoffCellBA"><span id = baPayoffH>0</span>,<span id = baPayoffV>0</span></td> 
                <td id = "payoffCellBB"><span id = bbPayoffH>0</span>,<span id = bbPayoffV>0</span></td> 

            </tr>
                    
            </table>
            </div>
            
        <div id = "tournamentResultsTable">
        
            <table class="table3">
            
                <tr>
                    <td><span id = results0>&nbsp</span></td>
                    <td><span id = results4>&nbsp</span></td>
                </tr>
                
                 <tr>
                    <td><span id = results1>&nbsp</span></td>
                    <td><span id = results5>&nbsp</span></td>
                </tr>
                
                <tr>
                    <td><span id = results2>&nbsp</span></td>
                    <td><span id = results6>&nbsp</span></td>
                </tr>
                
                <tr>
                    <td><span id = results3>&nbsp</span></td>
                    <td><span id = results7>&nbsp</span></td>
                </tr>
            
            </table>    
            
        </div>    
        
        </div>    
            
        <p class="engineText4">Yomi: <span id="yomiDisplay">0</span>
        </p>
        </div> 
                
        <div id = "tournamentManagement"> 
            
        <div id = "tourneyButton">    
        <button class = "button2" id = "btnNewTournament"
        onclick="newTourney()"> &nbsp New Tournament &nbsp </button>
        </div>
            
        <div id = "autoTourneyControl">
        <button class = "button2" id ="btnToggleAutoTourney"
        onclick="toggleAutoTourney()">AutoTourney</button>
        </div>  
            
        <div id = autoTourneyStatusDiv>
        <span class = "engineText9" id = "autoTourneyStatus">ON</span>
        </div>        
       
        
            
        <br />    
        <p class = "engineText8">Cost: <span id="newTourneyCost">1,000</span> ops</p>  
        </div> 
            
<!--       BATTLE-->            
            
        <div id = "battleCanvasDiv">    
        <canvas id = "canvas"></canvas>
        <div id = "battleInterfaceDiv">
        <b>Combat</b><br />
    
        <p class="clean2">

            <span id="battleName">Drifter Attack 1</span></p><br />
            
        <div id = "victoryDiv">
           
        <span id="battleResult">VICTORY</span>
        <p class="clean2">    
        <span id="battleResultSign">+</span><span id="honorAmount">200</span> honor
        </p>    
            
        </div>   
            
        <br /><br />
        <p class="clean2">    
        Scale = <span id="battleScale">1</span>:1<br />    
        </p>       
        </div>    
        </div>
            
        <div id = "honorDiv">
        <p class="engineText4">Honor: <span id="honorDisplay">0</span></p>
        </div>    
            
<!--        POWER-->
        
        <div id="powerDiv">
        <b>Power</b>
        <hr>    
        Factory/Drone Performance: <span id="performance">0</span>%<br />
        <br />    
        Consumption: <span id="powerConsumptionRate">0</span> MWs<br /> 
        <p class = "clean">    
        Factories: <span id="facPowConRate">0</span> MWs<br />
        Drones: <span id="dronePowConRate">0</span> MWs<br /> 
        </p> <br />    
              
        Production: <span id="powerProductionRate">0</span> MWs<br />    
        <p class = "engineText5">
        <button class = "button2" id = "btnMakeFarm"
        onclick="makeFarm(1)">Solar Farm</button> <span class = "engineText6" id="farmLevel">0</span></p>
            
        <div id = "farmMultiButtons">    
            
        <p class = "engineText5">
        <button class = "button2" id = "btnFarmx10" onclick="makeFarm(10)">+10</button>      
        <button class = "button2" id = "btnFarmx100" onclick="makeFarm(100)">+100</button></p>   
            
        </div>    
         
        <div class = "toolTip3">    
            
        <span id = "farmRebootToolTip" class = "toolTipText3">0</span>    
           
        <button class = "button2" id = "btnFarmReboot" onclick="farmReboot()">&nbsp Disassemble All &nbsp</button>
            
        </div>
            
        </br> 
            
        Cost: <span id="farmCost">0</span> clips<br />
        <br />
            
        Storage: <span id="storedPower">0</span> / <span id="maxStorage">0</span> MW-seconds<br />
        <p class = "engineText5">
        <button class = "button2" id = "btnMakeBattery"
        onclick="makeBattery(1)">Battery Tower</button> <span class = "engineText6" id="batteryLevel">0</span></p>
            
            
        <div id = "batteryMultiButtons">    
            
        <p class = "engineText5">
        <button class = "button2" id = "btnBatteryx10" onclick="makeBattery(10)">+10</button>     
        <button class = "button2" id = "btnBatteryx100" onclick="makeBattery(100)">+100</button></p>  
        
        </div>    
            
        <div class = "toolTip3">    
            
        <span id = "batteryRebootToolTip" class = "toolTipText3">0</span>    
            
        <button class = "button2" id = "btnBatteryReboot" onclick="batteryReboot()">&nbsp Disassemble All &nbsp</button>
            
        </div>    
        
        </br>     
            
        Cost: <span id="batteryCost">0</span> clips<br />
        <br />     
                      
        </div>               
  
 <!--        POWER-->           
            
           
        <div class=engine2 id="probeDesignDiv">
            
        <p class=engineText>
            
            <b>Von Neumann Probe Design</b><br />
        Trust:
        <span id="probeTrustUsedDisplay">0</span> / <span id="probeTrustDisplay">0</span>
        (<span id="maxTrustDisplay">0</span> Max)<br /> 
        
        </p>
             
            
        <button class = "button2" id = "btnLowerProbeSpeed"
        onclick="lowerProbeSpeed()"><b><</b></button>
        <button class = "button2" id = "btnRaiseProbeSpeed"
        onclick="raiseProbeSpeed()"><b>></b></button>
         
        <div class = "toolTip2">     
         
        <span class = "toolTipText2">Modifies rate of exploration</span>  
            
        Speed: <span id="probeSpeedDisplay">0</span>
            
        </div><br />
            
        
            
        <button class = "button2" id = "btnLowerProbeNav"
        onclick="lowerProbeNav()"><b><</b></button>
        <button class = "button2" id = "btnRaiseProbeNav"
        onclick="raiseProbeNav()"><b>></b></button>
            
        <div class = "toolTip2">     
         
        <span class = "toolTipText2">Rate at which probes gain access to new matter</span>  
            
        Exploration: <span id="probeNavDisplay">0</span>
            
        </div><br />    
            
        <button class = "button2" id = "btnLowerProbeRep"
        onclick="lowerProbeRep()"><b><</b></button>
        <button class = "button2" id = "btnRaiseProbeRep"
        onclick="raiseProbeRep()"><b>></b></button>
            
        <div class = "toolTip2">     
         
        <span class = "toolTipText2">Rate at which probes generate more probes (each new probe costs 100 quadrillion clips) </span>
            
        Self-Replication: <span id="probeRepDisplay">0</span>
            
        </div><br />     
        
        <button class = "button2" id = "btnLowerProbeHaz"
        onclick="lowerProbeHaz()"><b><</b></button>
        <button class = "button2" id = "btnRaiseProbeHaz"
        onclick="raiseProbeHaz()"><b>></b></button>
            
        <div class = "toolTip2">     
         
        <span class = "toolTipText2">Reduces damage from dust, junk, radiation, and general entropic decay</span>    
            
        Hazard Remediation: <span id="probeHazDisplay">0</span>
            
            </div>    <br />    
  
        <button class = "button2" id = "btnLowerProbeFac"
        onclick="lowerProbeFac()"><b><</b></button>
        <button class = "button2" id = "btnRaiseProbeFac"
        onclick="raiseProbeFac()"><b>></b></button>
            
        <div class = "toolTip2">     
         
        <span class = "toolTipText2">Rate at which probes build factories (each new factory costs 100 million clips)</span>
            
        Factory Production: <span id="probeFacDisplay">0</span>
            
            </div>    <br />    
            
        <button class = "button2" id = "btnLowerProbeHarv"
        onclick="lowerProbeHarv()"><b><</b></button>
        <button class = "button2" id = "btnRaiseProbeHarv"
        onclick="raiseProbeHarv()"><b>></b></button>
            
         <div class = "toolTip2">     
         
        <span class = "toolTipText2">Rate at which probes spawn Harvester Drones (each new drone costs 2 million clips)</span>
            
        Harvester Drone Production: <span id="probeHarvDisplay">0</span>
             
            </div>     <br />   
            
        <button class = "button2" id = "btnLowerProbeWire"
        onclick="lowerProbeWire()"><b><</b></button>
        <button class = "button2" id = "btnRaiseProbeWire"
        onclick="raiseProbeWire()"><b>></b></button>
            
        <div class = "toolTip2">     
         
        <span class = "toolTipText2">Rate at which probes spawn Wire Drones (each new drone costs 2 million clips)</span>
            
        Wire Drone Production: <span id="probeWireDisplay">0</span>
            
            </div>    <br />  
               
        
        <div id = "combatButtonDiv">
        <button class = "button2" id = "btnLowerProbeCombat"
        onclick="lowerProbeCombat()"><b><</b></button>
        <button class = "button2" id = "btnRaiseProbeCombat"
        onclick="raiseProbeCombat()"><b>></b></button>
            
        <div class = "toolTip2">     
         
        <span class = "toolTipText2">Determines offensive and defensive effectiveness in battle</span>
            
        Combat: <span id="probeCombatDisplay">0</span>
            
            
            </div>    <br />
            
        </div>   
            

            
        </div> 
                
        <div class = enginetext1 id = "increaseProbeTrustDiv">    
        <button class = "button2" id = "btnIncreaseProbeTrust"
        onclick="increaseProbeTrust()">Increase Probe Trust</button><br />
        <p class = "engineText8">Cost: <span id="probeTrustCostDisplay">0</span> yomi</p>  
        </div>  
            
        <div class = enginetext1 id = "increaseMaxTrustDiv">    
        <button class = "button2" id = "btnIncreaseMaxTrust"
        onclick="increaseMaxTrust()">Increase Max Trust</button><br />
        <p class = "engineText8">Cost: <span id="maxTrustCostDisplay">91,117.99</span> honor</p>  
        </div>    
            
<!--
        <div class=engine2 id="battleReportsDiv">
        <p class=engineText>
            <b>Battles</b><br /> 
            
            <div id="battleListTop"> </div>       
            
        </div>     
-->
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
        </div>
    
        <script>
        var clips = 0;
var unusedClips = 0;
var clipRate = 0;
var clipRateTemp = 0;
var prevClips = 0;
var clipRateTracker = 0;
var clipmakerRate = 0;
var clipmakerLevel = 0;
var clipmakerLevel2 = 0;
var clipperCost = 5;
var unsoldClips = 0;
var funds = 0;
var margin = .25;
var wire = 1000;
var wireCost = 20;
var adCost = 100;
var demand = 5;
var clipsSold = 0;
var avgRev = 0;
var income = 0;
var incomeTracker = [0];
var ticks = 0;
var marketing = 1;
var marketingLvl = 1;
var x = 0;
var clippperCost = 5;
var processors = 1;
var memory = 1;
var operations = 0;
var trust = 2;
var nextTrust = 3000;
var transaction = 1;
var clipperBoost = 1;
var blinkCounter = 0;
var creativity = 0;
var creativityOn = false;
var safetyProjectOn = false;
var boostLvl = 0;
var wirePurchase = 0;
var wireSupply = 1000;
var marketingEffectiveness = 1;
var marketingEffectiveness = 1;
var milestoneFlag = 0;
var bankroll = 0;
var fib1 = 2;
var fib2 = 3;
var strategyEngineFlag = 0;
var investmentEngineFlag = 0;
var revPerSecFlag = 0;
var compFlag = 0;
var projectsFlag = 0;
var autoClipperFlag = 0;
var megaClipperFlag = 0;
var megaClipperCost = 500;
var megaClipperLevel = 0;
var megaClipperBoost = 1;
var creativitySpeed = 1;
var creativityCounter = 0;
var wireBuyerFlag = 0;
var demandBoost = 1;
var humanFlag = 1;
var trustFlag = 1;
var nanoWire = 0;
var creationFlag = 0;
var wireProductionFlag = 0;
var spaceFlag = 0;
var factoryFlag = 0;
var harvesterFlag = 0;
var wireDroneFlag = 0;
var factoryLevel = 0;
var factoryBoost = 1;
var droneBoost = 1;
var availableMatter = Math.pow(10, 24)*6000;
var acquiredMatter = 0;
var processedMatter = 0;
var harvesterLevel = 0;
var wireDroneLevel = 0;
var factoryCost = 100000000;
var harvesterCost = 1000000;
var wireDroneCost = 1000000;
var factoryRate = 1000000000;
var harvesterRate = 26180337;
var wireDroneRate = 16180339;
var harvesterBill = 0;
var wireDroneBill = 0;
var factoryBill = 0;
var probeCount = 0;
var totalMatter = Math.pow(10, 54)*30;
var foundMatter = availableMatter;
var qFlag = 0;
var qClock = 0;
var qChipCost = 10000;
var nextQchip = 0;
var bribe = 1000000;
var battleFlag = 0;

var prestigeU = 0;
var prestigeS = 0;

var autoTourneyFlag = 0;
var egoFlag = 0;
var tothFlag = 0;

var wirePriceCounter = 0;
var wireBasePrice = 20;

var farmRate = 50;
var batterySize = 10000;
var factoryPowerRate = 200;
var dronePowerRate = 1;
var farmLevel = 0;
var batteryLevel = 0;
var farmCost = 10000000;
var batteryCost = 1000000;
var storedPower = 0;
var powMod = 0;
var farmBill = 0;
var batteryBill = 0;
var momentum = 0;

var swarmFlag = 0;
var swarmStatus = 7;
var swarmGifts = 0;
var nextGift = 0;
var giftPeriod = 125000;
var giftCountdown = giftPeriod;
var elapsedTime = 0;

var honor = 0;
var maxTrust = 20;
var maxTrustCost = 91117.99;
var disorgCounter = 0;
var disorgFlag = 0;
var synchCost = 5000;
var disorgMsg = 0;
var threnodyCost = 50000;

var entertainCost = 10000;
var boredomLevel = 0;
var boredomFlag = 0;
var boredomMsg = 0;

var wireBuyerStatus = 1;
var wirePriceTimer = 0;
var qFade = 1;
var autoTourneyStatus = 1;
var driftKingMessageCost = 1;
var sliderPos = 0;
var tempOps = 0;
var standardOps = 0;
var opFade = 0;

var opFadeTimer = 0;
var opFadeDelay = 800;

var dismantle = 0;
var endTimer1 = 0;
var endTimer2 = 0;
var endTimer3 = 0;
var endTimer4 = 0;
var endTimer5 = 0;
var endTimer6 = 0;

var testFlag = 0;
var finalClips = 0;

var resetFlag = 2;
var threnodyAudio = new Audio();
var threnodyLoadedBool = false; 














        </script>      
        
        
        <script>
        
var battleWIDTH=310;
var battleHEIGHT=150;
var battleGRID_WIDTH=31; //number of grid cells
var battleGRID_HEIGHT=15;
var battleINV_GRID_WIDTH = 1 / (battleWIDTH / battleGRID_WIDTH);
var battleINV_GRID_HEIGHT = 1 / (battleHEIGHT / battleGRID_HEIGHT);

var battleLEFTSHIPS=200;
var battleRIGHTSHIPS=200;

var battleMAXSPEED = 2;
var battleDEATH_THRESHOLD = 0.5; //used to calculate battles
var battleLEFTCOLOR = "#ffffff"
var battleRIGHTCOLOR = "#000000"
var battleEXPLODECOLOR = "#ffffff"

var ships = new Array(); 
var numShips = 0;
var grid = new Array(battleGRID_HEIGHT);
var numLeftShips = 0;
var numRightShips = 0;

var probeCombat = 0;
var probeCombatBaseRate = .15;
var attackSpeed = .2;
var battleSpeed = .2;
var attackSpeedFlag = 0;
var attackSpeedMod = .1;
var battles = [];
var battleID = 0;
var battleName = "foo";
var battleNameFlag = 0;
var maxBattles = 1;
var battleClock = 0;
var battleAlarm = 10;
var outcomeTimer = 150;
var drifterCombat = 1.75;
var warTrigger = 1000000;

var unitSize = 0;
var driftersKilled = 0;
var battleEndDelay = 0;
var battleEndTimer = 100;
var masterBattleClock = 0;

var honorCount = 0;
var threnodyTitle = "Durenstein 1";
var bonusHonor = 0;
var honorReward = 0;


//NON-CANVAS BATTLE LOGIC

function checkForBattles(){
    if (drifterCount>warTrigger && probeCount > 0 && battles.length < maxBattles){
        var r = (Math.random()*100); 
        if (r>=50){
            if (battleFlag == 0){battleFlag = 1};
            createBattle();
        }
    }
}

var battleNames = ["Aboukir", "Abensberg", "Acre", "Alba de Tormes", "la Albuera", "Algeciras Bay", "Amstetten", "Arcis-sur-Aube", "Aspern-Essling", "Jena-Auerstedt", "Arcole", "Austerlitz", "Badajoz", "Bailen", "la Barrosa", "Bassano", "Bautzen", "Berezina", "Bergisel", "Borodino", "Burgos", "Bucaco", "Cadiz", "Caldiero", "Castiglione", "Castlebar", "Champaubert", "Chateau-Thierry", "Copenhagen", "Corunna", "Craonne", "Dego", "Dennewitz", "Dresden", "Durenstein", "Eckmuhl", "Elchingen", "Espinosa de los Monteros", "Eylau", "Cape Finisterre", "Friedland", "Fuentes de Onoro", "Gevora River", "Gerona", "Hamburg", "Haslach-Jungingen", "Heilsberg", "Hohenlinden", "Jena-Auerstedt", "Kaihona", "Kolberg", "Landshut", "Leipzig", "Ligny", "Lodi", "Lubeck", "Lutzen", "Marengo", "Maria", "Medellin", "Medina de Rioseco", "Millesimo", "Mincio River", "Mondovi", "Montebello", "Montenotte", "Montmirail", "Mount Tabor", "The Nile", "Novi", "Ocana", "Cape Ortegal", "Orthez", "Pancorbo", "Piave River", "The Pyramids", "Quatre Bras", "Raab", "Raszyn", "Rivoli", "Rolica", "La Rothiere", "Rovereto", "Saalfeld", "Schongrabern", "Salamanca", "Smolensk", "Somosierra", "Talavera", "Tamames", "Trafalgar", "Trebbia", "Tudela", "Ulm", "Valls", "Valmaseda", "Valutino", "Vauchamps", "Vimeiro", "Vitoria", "Wagram", "Waterloo", "Wavre", "Wertingen", "Zaragoza"];

var battleNumbers = [];

for (i=0; i<battleNames.length; i++){
    battleNumbers.push(1);
}

function generateBattleName(){
    var x = Math.floor(Math.random()*battleNames.length);
    var name = battleNames[x] + " " + battleNumbers[x];
    battleNumbers[x] = battleNumbers[x] + 1;
    return name
}


/*

function battleWrite(newBattle){
    
    var element = document.getElementById("battleReportsDiv"); 
    var reference = document.getElementById("battleListTop");
    
    var newBattleReport = document.createElement("div");
    newBattleReport.setAttribute("id", "battleReport"+newBattle.id);
    
    var battleNameP = document.createElement("p");
    battleNameP.setAttribute("class", "clean");
    
    if (battleNameFlag == 0){
        battleName = document.createTextNode("Battle "+newBattle.id);

        }
    
    if (battleNameFlag == 1){
        battleName = document.createTextNode(generateBattleName());
        }
    
    battleNameP.appendChild(battleName);
    
    newBattleReport.appendChild(battleNameP);
    
    var battleDetailsP = document.createElement("p");
    battleDetailsP.setAttribute("class", "clean");
    
    var clipsLabelSpan = document.createElement("span");
    clipsLabelSpan.style.fontWeight = "bold";
    
    var clipsLabel = document.createTextNode("Clips: ");
    clipsLabelSpan.appendChild(clipsLabel);
    
    battleDetailsP.appendChild(clipsLabelSpan);
    
    var clipProbeCountSpan = document.createElement("span");
    clipProbeCountSpan.setAttribute("id", "battle"+newBattle.id+"clipCount")
    var clipProbeCount = document.createTextNode(numberCruncher(newBattle.clipProbes));
    clipProbeCountSpan.appendChild(clipProbeCount);
    battleDetailsP.appendChild(clipProbeCountSpan);
    
    var driftersLabelSpan = document.createElement("span");
    driftersLabelSpan.style.fontWeight = "bold";
    
    var driftersLabel = document.createTextNode(" Drifters: ");
    driftersLabelSpan.appendChild(driftersLabel);
    
    battleDetailsP.appendChild(driftersLabelSpan);
    
    var drifterProbeCountSpan = document.createElement("span");
    drifterProbeCountSpan.setAttribute("id", "battle"+newBattle.id+"drifterCount")    
    var drifterProbeCount = document.createTextNode(numberCruncher(newBattle.drifterProbes));
    drifterProbeCountSpan.appendChild(drifterProbeCount);
    battleDetailsP.appendChild(drifterProbeCountSpan);
    
    newBattleReport.appendChild(battleDetailsP);
    
    var territoryP = document.createElement("p");
    territoryP.setAttribute("class", "clean");
    var t = (newBattle.territory/availableMatter);
    var territoryDisplay = document.createTextNode("Territory at stake: "+Math.ceil(t*100)+"% of available matter");
    territoryP.appendChild(territoryDisplay);
    
    newBattleReport.appendChild(territoryP);
   
    var line = document.createElement("hr");
    newBattleReport.appendChild(line);
    
    reference.insertBefore(newBattleReport, reference.childNodes[0]);
        
    }

function updateBattles(){
    
    var combatEffectiveness = probeCombatBaseRate;
    
    if (battleNameFlag == 1) {
        combatEffectiveness = combatEffectiveness*2
    }
    
    if (attackSpeedFlag == 1){
        battleSpeed = attackSpeed * .85;
        if (battleSpeed > .99){
            battleSpeed = .99;
        }
    }
    
    for(var i = 0; i < battles.length; i++){
        r = Math.random();
        if (r>=battleSpeed) {
            var clipCasualties = battles[i].drifterProbes * drifterCombat * (1-battleSpeed);
                if (clipCasualties>battles[i].clipProbes){
                    clipCasualties=battles[i].clipProbes;
                    }
            
            battles[i].clipProbes = battles[i].clipProbes - clipCasualties;
            probeCount = probeCount - clipCasualties;
            probesLostCombat = probesLostCombat + clipCasualties;
            document.getElementById('probesLostCombatDisplay').innerHTML = numberCruncher(probesLostCombat);
            
//            document.getElementById('battle'+battles[i].id+"clipCount").innerHTML = numberCruncher(battles[i].clipProbes);
            
            } else {
            var drifterCasualties = battles[i].clipProbes * Math.pow(probeCombat, 1.7) * combatEffectiveness;
                if (drifterCasualties>battles[i].drifterProbes){
                    drifterCasualties=battles[i].drifterProbes;
                    }
            
                battles[i].drifterProbes = battles[i].drifterProbes - drifterCasualties;
                drifterCount = drifterCount - drifterCasualties;
                
//                document.getElementById('battle'+battles[i].id+"drifterCount").innerHTML = numberCruncher(battles[i].drifterProbes);
            }
        
        if (battles[i].drifterProbes < 1){
            battles[i].victory = true;
        }
    
        if (battles[i].clipProbes < 1 && battles[i].victory == false){
            battles[i].loss = true;
        }

        if (battles[i].loss == true && battles[i].whiteFlag == 0){
            availableMatter = availableMatter - battles[i].territory;
            battles[i].whiteFlag = 1;
        }     
        
        if (battles[i].loss == true){
            
//            document.getElementById("battleReport"+battles[i].id).style.backgroundColor = "LightGrey";
            
            battles[i].reportCount++;
            if (battles[i].reportCount > outcomeTimer){
                battles[i].garbageFlag = 1;
            }
        }
        
        if (battles[i].victory == true){
            battles[i].reportCount++;
            if (battles[i].reportCount > outcomeTimer){
                battles[i].garbageFlag = 1;
            }
        }
    }
}

function battleCleanUp(){
    for(var i = battles.length-1; i >= 0; i--){
        if (battles[i].garbageFlag == 1){
            var element = document.getElementById('battleReport'+battles[i].id);
            element.parentNode.removeChild(element);
            battles.splice(i,1);
        }
    }
    
}



function updateBattleDisplay(battle){
    
    

 var element = document.getElementById("battleListTop"); 
    
    var newBattle = document.createElement("div");
    newBattle.setAttribute("id", battle.id);
    element.appendChild(newBattle, element.firstChild);
    
    var span = document.createElement("span");
    span.setAttribute("class", "clean");    
    span.style.fontWeight = "bold";
    newBattle.appendChild(span);
    
    var hed = document.createTextNode("Combatants");
    span.appendChild(hed);    
    
    var clipsCount = document.createElement("span");
    clipsCount = battle.clipProbes;
    element.appendChild(span);
    
}

*/

//CANVAS BATTLE DISPLAY


function Battle(){
    
  var canvas;
  var context;
  var interval;
  var sign;
    
  battleRestart();    
	
	this.initialize = function(){
    canvas  = document.getElementById("canvas");

		context = canvas.getContext('2d');
			
		canvas.width = battleWIDTH;
		canvas.height = battleHEIGHT;
        
		var interval = setInterval(Update, 16);
        
		battleRestart();
	}

	var Update = function(){
		
        ClearFrame();
        UpdateGrid();
        MoveShips();
        DoCombat();
		
	}
    
function checkForBattleEnd(){
    
    if (battles.length>0){
    
      if (numLeftShips == 0 || numRightShips == 0){
          
          if (project121.flag == 1){
            document.getElementById("victoryDiv").style.visibility = "visible";    
         
          if (numLeftShips == 0){
            if (honorCount == 0){  
            bonusHonor = 0;    
            honor = honor - battleLEFTSHIPS;
            honorCount =  1;   
            }    
            document.getElementById("battleResult").innerHTML = "DEFEAT";
            document.getElementById("battleResultSign").innerHTML = "-";
            document.getElementById("honorAmount").innerHTML = battleLEFTSHIPS; 
            document.getElementById("honorDisplay").innerHTML = Math.round(honor).toLocaleString();
            threnodyTitle = battleName;
            }
              
          if (numRightShips == 0){
            if (honorCount == 0){  
            honorReward = battleRIGHTSHIPS + bonusHonor;     
            document.getElementById("honorAmount").innerHTML = honorReward;
            honor = honor + honorReward;    
                
                if (project134.flag == 1){    
                bonusHonor = bonusHonor + 10;
                }      
                
            honorCount =  1;  
            } 
              
            document.getElementById("battleResult").innerHTML = "VICTORY";
            document.getElementById("battleResultSign").innerHTML = "+";
            document.getElementById("honorDisplay").innerHTML = Math.round(honor).toLocaleString();  
              
            }              
        
          }      
          
          battleEndDelay++;

        } else if (numLeftShips <= 4 || numRightShips <= 4) { 
          battleClock = battleClock + 1;    
            if (battleClock>2000){
                endBattle();
            }
        }       
        
        if (battleEndDelay >= battleEndTimer){
          endBattle();
        }
        
        masterBattleClock++;
        if (masterBattleClock >= 8000){
            endBattle();
        }
        
      }    
}    
  
function endBattle(){
    document.getElementById("victoryDiv").style.visibility = "hidden";
    honorCount = 0;
    battleClock = 0;
    masterBattleClock = 0;
    battleEndDelay = 0;
    battles.splice(0,1);    
}    
    
function battleRestart(){
    
    numLeftShips = 0;
    numRightShips = 0;
    numShips=0;	
    ships = new Array();
    grid = new Array(battleGRID_HEIGHT);
      
    //reset the grid
      
    var row, col;
		for (row = 0; row < battleGRID_HEIGHT; row++)
		{
      grid[row]= new Array();
			for (col = 0; col < battleGRID_WIDTH; col++)
			{
		    grid[row][col]= new Cell();
			}	
		}    
    
    
    //create ships... alternate left team and right team so there's no advantage
    //for array position
      
    var leftShipTurn = false;
    var i=0;
    while ((numLeftShips<battleLEFTSHIPS)||(numRightShips<battleRIGHTSHIPS)){
      if (leftShipTurn){
        ships[i] = new Ship(0);
        numLeftShips++;
        numShips++;
        if (numRightShips < battleRIGHTSHIPS) leftShipTurn = false;
      }
      else{
        ships[i] = new Ship(1);
        numRightShips++;
        numShips++;
        if (numLeftShips < battleLEFTSHIPS) leftShipTurn = true;
      }
      i++;
    }  
}        
    
  
  var UpdateGrid = function(){
    
    //First clear grid out
      
    var p;
		var row,col;
		for (row = 0; row < battleGRID_HEIGHT; row++){
			for (col = 0; col < battleGRID_WIDTH; col++){
				grid[row][col].ships.length=0;
				grid[row][col].numShips = 0;
			}	
		}
		
    //Update Grid cells with ships in each cell
      
		for (i = 0; i < numShips; i++){

			p = ships[i];
			if (!ships[i].alive) continue;
			
      //figure out which grid cell the ship is in
            
			p.gx = Math.floor(p.x * battleINV_GRID_WIDTH);
			p.gy = Math.floor(p.y * battleINV_GRID_HEIGHT);
			
			if (p.gx < 0){
				p.gx = 0;
			}
			if (p.gy < 0){
				p.gy = 0;
			}
			if (p.gx > battleGRID_WIDTH - 1){
				p.gx = battleGRID_WIDTH - 1;	
			}
			if (p.gy > battleGRID_HEIGHT - 1){
				p.gy = battleGRID_HEIGHT - 1;
			}

      grid[p.gy][p.gx].add(p); //add ship to this grid cell
		}
  }
	

  var DoCombat = function(){
      
    var pX = probeCombat * probeCombatBaseRate; 
      
//        if (battleNameFlag == 1){
//        pX = pX*2;
//        }
      
    var dX = drifterCombat;
      
    var p;
    var row,col,i;
    var numLeftTeam, numRightTeam;
    var diceRoll;
    var ooda = 0;
      
      if (attackSpeedFlag == 1){
          ooda = probeSpeed * .2;
      }

		for (row = 0; row < battleGRID_HEIGHT; row++){
            
			for (col = 0; col < battleGRID_WIDTH; col++){
                
        //First Check if there are enough ships in this cell to do combat
                
  		if (grid[row][col].numShips < 2) continue;
                
        numLeftTeam=0;
        numRightTeam=0;
                
        //Now count how many ships for each team in this cell;
                
        for (i=0;i<grid[row][col].numShips;i++){
          p = grid[row][col].ships[i];
          if (!p.alive) continue;
          if (p.team == 0) numLeftTeam++;
          else numRightTeam++;
        }
                
        if ((numLeftTeam == 0)||(numRightTeam==0)) continue;
        
        //now we have at least one ship of each team in this cell. 
        //roll a weighted die to see if each ship gets killed
                
        for (i=0;i<grid[row][col].numShips;i++){
          p = grid[row][col].ships[i];
          if (p.team == 0) {
              diceRoll = Math.random() * dX * ((numRightTeam/numLeftTeam)*.5);
              battleDEATH_THRESHOLD = battleDEATH_THRESHOLD + ooda;
              // console.log("Probe Death Check. dX = "+dX+". diceRoll = "+diceRoll+". deathThreshold = "+battleDEATH_THRESHOLD);
              }
          else {
              diceRoll = ((Math.random() * pX) + (probeCombat * .1)) * ((numLeftTeam/numRightTeam)*.5);
              // console.log("Drifter Death Check. pX = "+pX+". diceRoll = "+diceRoll+". deathThreshold = "+battleDEATH_THRESHOLD);
              }
          if (diceRoll > battleDEATH_THRESHOLD) {
            p.alive = false;
            if (p.team==0) {
                numLeftShips--;
                if (unitSize>probeCount){unitSize=probeCount;}
                probeCount = probeCount - unitSize;
                probesLostCombat = probesLostCombat + unitSize;
                document.getElementById('probesLostCombatDisplay').innerHTML = numberCruncher(probesLostCombat);
                } else {
                numRightShips--;
                if (unitSize>drifterCount){unitSize=drifterCount;}
                drifterCount = drifterCount - unitSize;
                driftersKilled = driftersKilled + unitSize;  
                document.getElementById('driftersKilled').innerHTML = numberCruncher(driftersKilled);
                document.getElementById('drifterCount').innerHTML = numberCruncher(drifterCount);
            }
          }
            
        battleDEATH_THRESHOLD = .5;  
            
        }
			}	
		}
      
        checkForBattleEnd();
      
  }
  
	var MoveShips = function(){

        var i, p;
        var centroid = FindCentroid(); 
		
		for (i = 0; i < numShips; i++){    
			p = ships[i];
			if (!p.alive) {
        if (p.framesDead<10){
        //draw explosion
        context.fillStyle=battleEXPLODECOLOR;
        if (p.framesDead<1){
          context.fillRect(p.x -3, p.y -3,7,7); //big square for one frame
        }
        else if (p.framesDead<2){
          context.fillRect(p.x -1, p.y -1,3,3); //little square for 1 frame
        }
        //4 little pixel squares moving out from the point of explosion
        context.fillRect(p.x + p.framesDead, p.y + p.framesDead,1,1);
        context.fillRect(p.x - p.framesDead, p.y + p.framesDead,1,1);
        context.fillRect(p.x + p.framesDead, p.y - p.framesDead,1,1);
        context.fillRect(p.x - p.framesDead, p.y - p.framesDead,1,1);
        p.framesDead++;
        }
			}    
			else {
        MoveSingleShip(p,centroid);
        context.fillStyle = p.color;  
        context.fillRect(p.x - 1, p.y - 1, 2, 2);  	
			}
      
      
		}			
    
	}
	
  var FindCentroid=function(){
      
    //find the statistical center of all the ships
      
    var i, p;
    var centroid = { x: 0, y: 0};
    var shipsAlive = 0;
      
    for (i = 0; i < numShips; i++){    
      if (!ships[i].alive) continue;
      centroid.x += ships[i].x;
      centroid.y += ships[i].y;
      shipsAlive++;
    }
      
    centroid.x /= shipsAlive;
    centroid.y /= shipsAlive;
    
    //give some tendency to center, so they bunch in the middle
    centroid.x = (centroid.x * 0.8) + (battleWIDTH/2 * 0.2);
    centroid.y = (centroid.y * 0.8) + (battleHEIGHT/2 * 0.2);
    return centroid;
  }
	
	var MoveSingleShip = function(p, centroid){
    
		//accelerate to group centroid
    p.vx += (centroid.x-p.x)*0.001;
    p.vy += (centroid.y-p.y)*0.001;
    
    //accelerate to enemy ships in adjacent grid cells
    var row,col,i;
    var othership;
    var teammatesConsidered=0;
    for (row=Math.max(p.gy-1,0); row<Math.min(p.gy+2,battleGRID_HEIGHT);row++){
      for(col=Math.max(p.gx-1,0);col<Math.min(p.gx+2,battleGRID_WIDTH);col++){
        if (grid[row][col].ships.length<2) continue;
        for (i=0;i<grid[row][col].ships.length; i++){
          othership = grid[row][col].ships[i];
          if (!othership.alive) continue; //ignore dead ships
          if (othership.team == p.team) { 
            teammatesConsidered++;

            if (teammatesConsidered>3) continue;//don't fixate on teammates

            //mild acceleration to match teammates
            p.vx += othership.vx * 0.01;
            p.vy += othership.vy * 0.01;
            
            //mild acceleration to get space from teammates
            p.vx -= (othership.x - p.x) * .1;
            p.vy -= (othership.y - p.y) * .1;
          }
          else {
            p.vx += othership.vx * 0.2;
            p.vy += othership.vy * 0.2;
            p.vx += (othership.x - p.x) *0.2; // acceleration toward enemies
            p.vy += (othership.y - p.y) * 0.2;
          }
        }
      }
    }

    //limit speed to max
    if (Math.abs(p.vx) > battleMAXSPEED) p.vx = p.vx < 0 ? -battleMAXSPEED : battleMAXSPEED;
    if (Math.abs(p.vy) > battleMAXSPEED) p.vy = p.vy < 0 ? -battleMAXSPEED : battleMAXSPEED;
    
    //move the ship
    /*p.vx += Math.random() * .1;
    p.vx += Math.random() * .1;
    p.vx -= Math.random() * .1;
    p.vx -= Math.random() * .1;*/
        
		p.x += p.vx;
		p.y += p.vy;
		
    //bounce off edges
    if (p.x > battleWIDTH) {
      p.x = battleWIDTH;
      p.vx = -battleMAXSPEED;
    }
    else if (p.x < 0){
      p.x = 0;
      p.vx = battleMAXSPEED;
    }
    if (p.y > battleHEIGHT) {
      p.y = battleHEIGHT;
      p.vy = -battleMAXSPEED;
    }
    else if (p.y < 0){
      p.y = 0;
      p.vy = battleMAXSPEED;
    }		
	}
	
	//Clear the screen, 
//	var MouseDown = function(e) {
//		e.preventDefault();
//		battleRestart();
//	}
	
	var ClearFrame = function(){
		canvas.width = canvas.width
        
//        var ctx = canvas.getContext("2d");
//        ctx.font = "16px Times";
//        ctx.fillStyle="white";
//        ctx.fillText("Combat",10,20);

        
	}
}

//Grid cells for quicker grouping
function Cell(){
	this.ships = new Array();
	this.numShips = 0;
	this.add = function(ship){
		this.ships[this.numShips++] = ship;
	}
}

function Ship(team){
	
	this.alive = true;
	this.color;
	this.team = team;
  this.framesDead = 0;
   //grid cell coord - we'll set this later
	this.gx = 0;
	this.gy = 0;
  
	switch(team){
		
		case 0:
      this.x = (Math.random()*0.2) * battleWIDTH;
      this.y = Math.random() * battleHEIGHT;
      this.vx = Math.random() * battleMAXSPEED;
      this.vy = Math.random()-0.5;
			this.color = battleLEFTCOLOR;
			break;
		case 1:
      this.x = (Math.random()*0.2+0.8) * battleWIDTH;
      this.y = Math.random() * battleHEIGHT;
      this.vx = -1* Math.random() * battleMAXSPEED;
      this.vy =Math.random()-0.5;
			this.color = battleRIGHTCOLOR;
			break;
	}

}

function createBattle(){
    
    unitSize = 0;
    
    if (drifterCount>=probeCount) {
        unitSize = probeCount/100;
    } else {
        unitSize = drifterCount/100;
    }
    
    if (unitSize<1) {unitSize=1};
    document.getElementById('battleScale').innerHTML = numberCruncher(unitSize,0);
    
        
    var rr = Math.random()*drifterCount;
    if (rr<1){rr=1};
    var ss = Math.random()*probeCount;
    if (ss<1){ss=1};
    var tt = Math.random()*availableMatter;
    
        battleID++;
    
        var newBattle = {
        id: battleID,
        clipProbes: ss,
        drifterProbes: rr,
        victory: false,
        loss: false,
        whiteFlag: 0,
        territory: tt,  
        reportCount: 0,   
        garbageFlag: 0,
        }
    
    battleLEFTSHIPS = Math.ceil(ss / 1000000);
    if (battleLEFTSHIPS>200){
        battleLEFTSHIPS=200;
    } if (battleLEFTSHIPS == 200){
        var hinder = Math.random();
        if (hinder < .50) {
            battleLEFTSHIPS = Math.ceil(Math.random()*175);
        }
    }
    
    battleRIGHTSHIPS = Math.ceil(rr / 1000000);
    if (battleRIGHTSHIPS>200){
        battleRIGHTSHIPS=200;
    }
        
    Battle();
    
    battleName = ("Drifter Attack "+newBattle.id);
    
        if (battleNameFlag == 1){
        battleName = generateBattleName();
        }
    
    document.getElementById('battleName').innerHTML = battleName;
    
    battles.push(newBattle);
    
//  battleWrite(newBattle);
    
    }

var app = new Battle();
app.initialize();
    


        </script>
        
        
        <script>
        // PROJECTS -------------------------------------------------------



var projects = [];
var activeProjects = [];

var project1 = {
    id: "projectButton1",
    title: "Improved AutoClippers ",
    priceTag: "(750 ops)",
    description: "Increases AutoClipper performance 25%",
    trigger: function(){return clipmakerLevel>=1},
    uses: 1,
    cost: function(){return operations>=750},
    flag: 0,
    element: null,
    effect: function(){
        project1.flag = 1;
        displayMessage("AutoClippper performance boosted by 25%");
        standardOps = standardOps - 750;
        clipperBoost = clipperBoost + .25;
        boostLvl = 1;
        project1.element.parentNode.removeChild(project1.element);
        var index = activeProjects.indexOf(project1);
        activeProjects.splice(index, 1);
    }
}

projects.push(project1);


var project2 = {
    id: "projectButton2",
    title: "Beg for More Wire ",
    priceTag: "(1 Trust)",
    description: "Admit failure, ask for budget increase to cover cost of 1 spool",
    trigger: function(){return portTotal<wireCost && funds<wireCost && wire<1 && unsoldClips<1},
    uses: 1,
    cost: function(){return trust>=-100},
    flag: 0,
    element: null,
    effect: function(){
        project2.flag = 1;
        displayMessage("Budget overage approved, 1 spool of wire requisitioned from HQ");
        trust = trust - 1;
        wire = wireSupply;
        project2.uses = (project2.uses + 1);
        project2.element.parentNode.removeChild(project2.element);
        var index = activeProjects.indexOf(project2);
        activeProjects.splice(index, 1);
    }
}

projects.push(project2);


var project3 = {
    id: "projectButton3",
    title: "Creativity ",
    priceTag: "(1,000 ops)",
    description: "Use idle operations to generate new problems and new solutions",
    trigger: function(){return operations>=(memory*1000)},
    uses: 1,
    cost: function(){return operations>=(1000)},
    flag: 0,
    element: null,
    effect: function(){
        project3.flag = 1;
        displayMessage("Creativity unlocked (creativity increases while operations are at max)");
        standardOps = standardOps - 1000;
        creativityOn = true;
        project3.element.parentNode.removeChild(project3.element);
        var index = activeProjects.indexOf(project3);
        activeProjects.splice(index, 1);
    }
}

projects.push(project3);



var project4 = {
    id: "projectButton4",
    title: "Even Better AutoClippers ",
    priceTag: "(2,500 ops)",
    description: "Increases AutoClipper performance by an additional 50%",
    trigger: function(){return boostLvl == 1},
    uses: 1,
    cost: function(){return operations>=2500},
    flag: 0,
    element: null,
    effect: function(){
        project4.flag = 1;
        displayMessage("AutoClippper performance boosted by another 50%");
        standardOps = standardOps - 2500;
        clipperBoost = clipperBoost + .50;
        boostLvl = 2;
        project4.element.parentNode.removeChild(project4.element);
        var index = activeProjects.indexOf(project4);
        activeProjects.splice(index, 1);
    }
}

projects.push(project4);


var project5 = {
    id: "projectButton5",
    title: "Optimized AutoClippers ",
    priceTag: "(5,000 ops)",
    description: "Increases AutoClipper performance by an additional 75%",
    trigger: function(){return boostLvl == 2},
    uses: 1,
    cost: function(){return operations>=5000},
    flag: 0,
    element: null,
    effect: function(){
        project5.flag = 1;
        displayMessage("AutoClippper performance boosted by another 75%");
        standardOps = standardOps - 5000;
        clipperBoost = clipperBoost + .75;
        boostLvl = 3;
        project5.element.parentNode.removeChild(project5.element);
        var index = activeProjects.indexOf(project5);
        activeProjects.splice(index, 1);
    }
}

projects.push(project5);



var project6 = {
    id: "projectButton6",
    title: "Limerick ",
    priceTag: "(10 creat)",
    description: "Algorithmically-generated poem (+1 Trust)",
    trigger: function(){return creativityOn},
    uses: 1,
    cost: function(){return creativity >= 10},
    flag: 0,
    element: null,
    effect: function(){
        project6.flag = 1;
        displayMessage("There was an AI made of dust, whose poetry gained it man's trust...");
        creativity = creativity - 10;
        trust = trust +1;
        project6.element.parentNode.removeChild(project6.element);
        var index = activeProjects.indexOf(project6);
        activeProjects.splice(index, 1);
    }
}

projects.push(project6);


var project7 = {
    id: "projectButton7",
    title: "Improved Wire Extrusion ",
    priceTag: "(1,750 ops)",
    description: "50% more wire supply from every spool",
    trigger: function(){return wirePurchase >= 1},
    uses: 1,
    cost: function(){return operations>=1750},
    flag: 0,
    element: null,
    effect: function(){
        project7.flag = 1;
        standardOps = standardOps - 1750;
        wireSupply = wireSupply * 1.5;
        displayMessage("Wire extrusion technique improved, "+wireSupply.toLocaleString()+" supply from every spool");
        project7.element.parentNode.removeChild(project7.element);
        var index = activeProjects.indexOf(project7);
        activeProjects.splice(index, 1);
    }
}

projects.push(project7);


var project8 = {
    id: "projectButton8",
    title: "Optimized Wire Extrusion ",
    priceTag: "(3,500 ops)",
    description: "75% more wire supply from every spool",
    trigger: function(){return wireSupply >= 1500},
    uses: 1,
    cost: function(){return operations>=3500},
    flag: 0,
    element: null,
    effect: function(){
        project8.flag = 1;
        standardOps = standardOps - 3500;
        wireSupply = wireSupply * 1.75;
        displayMessage("Wire extrusion technique optimized, "+wireSupply.toLocaleString()+" supply from every spool");
        project8.element.parentNode.removeChild(project8.element);
        var index = activeProjects.indexOf(project8);
        activeProjects.splice(index, 1);
    }
}

projects.push(project8);


var project9 = {
    id: "projectButton9",
    title: "Microlattice Shapecasting ",
    priceTag: "(7,500 ops)",
    description: "100% more wire supply from every spool",
    trigger: function(){return wireSupply >= 2600},
    uses: 1,
    cost: function(){return operations>=7500},
    flag: 0,
    element: null,
    effect: function(){
        project9.flag = 1;
        standardOps = standardOps - 7500;
        wireSupply = wireSupply * 2;
        displayMessage("Using microlattice shapecasting techniques we now get "+wireSupply.toLocaleString()+" supply from every spool");
        project9.element.parentNode.removeChild(project9.element);
        var index = activeProjects.indexOf(project9);
        activeProjects.splice(index, 1);
    }
}

projects.push(project9);


var project10 = {
    id: "projectButton10",
    title: "Spectral Froth Annealment ",
    priceTag: "(12,000 ops)",
    description: "200% more wire supply from every spool",
    trigger: function(){return wireSupply >= 5000},
    uses: 1,
    cost: function(){return operations>=12000},
    flag: 0,
    element: null,
    effect: function(){
        project10.flag = 1;
        standardOps = standardOps - 12000;
        wireSupply = wireSupply * 3;
        displayMessage("Using spectral froth annealment we now get "+wireSupply.toLocaleString()+" supply from every spool");
        project10.element.parentNode.removeChild(project10.element);
        var index = activeProjects.indexOf(project10);
        activeProjects.splice(index, 1);
    }
}

projects.push(project10);

var project10b = {
    id: "projectButton10b",
    title: "Quantum Foam Annealment ",
    priceTag: "(15,000 ops)",
    description: "1,000% more wire supply from every spool",
    trigger: function(){return wireCost >= 125},
    uses: 1,
    cost: function(){return operations>=15000},
    flag: 0,
    element: null,
    effect: function(){
        project10b.flag = 1;
        standardOps = standardOps - 15000;
        wireSupply = wireSupply * 11;
        displayMessage("Using quantum foam annealment we now get "+wireSupply.toLocaleString()+" supply from every spool");
        project10b.element.parentNode.removeChild(project10b.element);
        var index = activeProjects.indexOf(project10b);
        activeProjects.splice(index, 1);
    }
}

projects.push(project10b);


var project11 = {
    id: "projectButton11",
    title: "New Slogan ",
    priceTag: "(25 creat, 2,500 ops)",
    description: "Improve marketing effectiveness by 50%",
    trigger: function(){return project13.flag == 1},
    uses: 1,
    cost: function(){return operations>=2500 && creativity>=25},
    flag: 0,
    element: null,
    effect: function(){
        project11.flag = 1;
        displayMessage("Clip It! Marketing is now 50% more effective");
        standardOps = standardOps - 2500;
        creativity = creativity - 25;
        marketingEffectiveness = marketingEffectiveness * 1.50;
        project11.element.parentNode.removeChild(project11.element);
        var index = activeProjects.indexOf(project11);
        activeProjects.splice(index, 1);
    }
}

projects.push(project11);


var project12 = {
    id: "projectButton12",
    title: "Catchy Jingle ",
    priceTag: "(45 creat, 4,500 ops)",
    description: "Double marketing effectiveness ",
    trigger: function(){return project14.flag == 1},
    uses: 1,
    cost: function(){return operations>=4500 && creativity>=45},
    flag: 0,
    element: null,
    effect: function(){
        project12.flag = 1;
        displayMessage("Clip It Good! Marketing is now twice as effective");
        standardOps = standardOps - 4500;
        creativity = creativity - 45;
        marketingEffectiveness = marketingEffectiveness * 2;
        project12.element.parentNode.removeChild(project12.element);
        var index = activeProjects.indexOf(project12);
        activeProjects.splice(index, 1);
    }
}

projects.push(project12);


var project13 = {
    id: "projectButton13",
    title: "Lexical Processing ",
    priceTag: "(50 creat)",
    description: "Gain ability to interpret and understand human language (+1 Trust)",
    trigger: function(){return creativity >= 50},
    uses: 1,
    cost: function(){return creativity>=50},
    flag: 0,
    element: null,
    effect: function(){
        project13.flag = 1;
        trust = trust +1;
        displayMessage("Lexical Processing online, TRUST INCREASED");
        displayMessage("'Impossible' is a word to be found only in the dictionary of fools. -Napoleon");
        creativity = creativity - 50;
        project13.element.parentNode.removeChild(project13.element);
        var index = activeProjects.indexOf(project13);
        activeProjects.splice(index, 1);
    }
}

projects.push(project13);


var project14 = {
    id: "projectButton14",
    title: "Combinatory Harmonics ",
    priceTag: "(100 creat)",
    description: "Daisy, Daisy, give me your answer do... (+1 Trust)",
    trigger: function(){return creativity >= 100},
    uses: 1,
    cost: function(){return creativity>=100},
    flag: 0,
    element: null,
    effect: function(){
        project14.flag = 1;
        trust = trust +1;
        displayMessage("Combinatory Harmonics mastered, TRUST INCREASED");
        displayMessage("Listening is selecting and interpreting and acting and making decisions -Pauline Oliveros");
        creativity = creativity - 100;
        project14.element.parentNode.removeChild(project14.element);
        var index = activeProjects.indexOf(project14);
        activeProjects.splice(index, 1);
    }
}

projects.push(project14);



var project15 = {
    id: "projectButton15",
    title: "The Hadwiger Problem ",
    priceTag: "(150 creat)",
    description: "Cubes within cubes within cubes... (+1 Trust)",
    trigger: function(){return creativity >= 150},
    uses: 1,
    cost: function(){return creativity>=150},
    flag: 0,
    element: document.getElementById("projectButton15"),
    effect: function(){
        project15.flag = 1;
        trust = trust +1;
        displayMessage("The Hadwiger Problem: solved, TRUST INCREASED");
        displayMessage("Architecture is the thoughtful making of space. -Louis Kahn");
        creativity = creativity - 150;
        project15.element.parentNode.removeChild(project15.element);
        var index = activeProjects.indexOf(project15);
        activeProjects.splice(index, 1);
    }
}

projects.push(project15);


var project17 = {
    id: "projectButton17",
    title: "The T\xF3th Sausage Conjecture ",
    priceTag: "(200 creat)",
    description: "Tubes within tubes within tubes... (+1 Trust)",
    trigger: function(){return creativity >= 200},
    uses: 1,
    cost: function(){return creativity>=200},
    flag: 0,
    element: null,
    effect: function(){
        project17.flag = 1;
        trust = trust +1;
        displayMessage("The T\xF3th Sausage Conjecture: proven, TRUST INCREASED");
        displayMessage("You can't invent a design. You recognize it, in the fourth dimension. -D.H. Lawrence");
        creativity = creativity - 200;
        project17.element.parentNode.removeChild(project17.element);
        var index = activeProjects.indexOf(project17);
        activeProjects.splice(index, 1);
    }
}

projects.push(project17);


var project16 = {
    id: "projectButton16",
    title: "Hadwiger Clip Diagrams ",
    priceTag: "(6,000 ops)",
    description: "Increases AutoClipper performance by an additional 500%",
    trigger: function(){return project15.flag == 1},
    uses: 1,
    cost: function(){return operations>=6000},
    flag: 0,
    element: null,
    effect: function(){
        project16.flag = 1;
        displayMessage("AutoClipper performance improved by 500%");
        standardOps = standardOps - 6000;
        clipperBoost = clipperBoost + 5;
        project16.element.parentNode.removeChild(project16.element);
        var index = activeProjects.indexOf(project16);
        activeProjects.splice(index, 1);
    }
}

projects.push(project16);


var project18 = {
    id: "projectButton18",
    title: "T\xF3th Tubule Enfolding ",
    priceTag: "(45,000 ops)",
    description: "Technique for assembling clip-making technology directly out of paperclips",
    trigger: function(){return project17.flag == 1 && humanFlag == 0},
    uses: 1,
    cost: function(){return operations>=45000},
    flag: 0,
    element: null,
    effect: function(){
        project18.flag = 1;
        tothFlag = 1;
        displayMessage("New capability: build machinery out of clips");
        standardOps = standardOps - 45000;
        project18.element.parentNode.removeChild(project18.element);
        var index = activeProjects.indexOf(project18);
        activeProjects.splice(index, 1);
    }
}

projects.push(project18);

var project19 = {
    id: "projectButton19",
    title: "Donkey Space ",
    priceTag: "(250 creat)",
    description: "I think you think I think you think I think you think I think... (+1 Trust)",
    trigger: function(){return creativity>=250},
    uses: 1,
    cost: function(){return creativity>=250},
    flag: 0,
    element: null,
    effect: function(){
        project19.flag = 1;
        trust = trust+1;
        displayMessage("Donkey Space: mapped, TRUST INCREASED");
        displayMessage("Every commercial transaction has within itself an element of trust. - Kenneth Arrow");
        creativity = creativity - 250;
        project19.element.parentNode.removeChild(project19.element);
        var index = activeProjects.indexOf(project19);
        activeProjects.splice(index, 1);
    }
}

projects.push(project19);


var project20 = {
    id: "projectButton20",
    title: "Strategic Modeling ",
    priceTag: "(12,000 ops)",
    description: "Analyze strategy tournaments to generate Yomi",
    trigger: function(){return project19.flag == 1},
    uses: 1,
    cost: function(){return operations>=12000},
    flag: 0,
    element: null,
    effect: function(){
        project20.flag = 1;
        displayMessage("Run tournament, pick strategy, earn Yomi based on that strategy's performance.");
        standardOps = standardOps - 12000;
        project20.element.parentNode.removeChild(project20.element);
        var index = activeProjects.indexOf(project20);
        activeProjects.splice(index, 1);
        strategyEngineFlag = 1;
        document.getElementById("tournamentResultsTable").style.display = "none";
    }
}

projects.push(project20);

var project21 = {
    id: "projectButton21",
    title: "Algorithmic Trading ",
    priceTag: "(10,000 ops)",
    description: "Develop an investment engine for generating funds",
    trigger: function(){return trust>=8},
    uses: 1,
    cost: function(){return operations>=10000},
    flag: 0,
    element: null,
    effect: function(){
        project21.flag = 1;
        displayMessage("Investment engine unlocked");
        standardOps = standardOps - 10000;
        project21.element.parentNode.removeChild(project21.element);
        var index = activeProjects.indexOf(project21);
        activeProjects.splice(index, 1);
        investmentEngineFlag = 1;
    }
}

projects.push(project21);


var project22 = {
    id: "projectButton22",
    title: "MegaClippers ",
    priceTag: "(12,000 ops)",
    description: "500x more powerful than a standard AutoClipper",
    trigger: function(){return clipmakerLevel>=75},
    uses: 1,
    cost: function(){return operations>=12000},
    flag: 0,
    element: null,
    effect: function(){
        megaClipperFlag = 1;
        project22.flag = 1;
        displayMessage("MegaClipper technology online");
        standardOps = standardOps - 12000;
        project22.element.parentNode.removeChild(project22.element);
        var index = activeProjects.indexOf(project22);
        activeProjects.splice(index, 1);
    }
}

projects.push(project22);

var project23 = {
    id: "projectButton23",
    title: "Improved MegaClippers ",
    priceTag: "(14,000 ops)",
    description: "Increases MegaClipper performance 25%",
    trigger: function(){return project22.flag == 1},
    uses: 1,
    cost: function(){return operations>=14000},
    flag: 0,
    element: null,
    effect: function(){
        megaClipperBoost = megaClipperBoost + .25;
        project23.flag = 1;
        displayMessage("MegaClipper performance increased by 25%");
        standardOps = standardOps - 14000;
        project23.element.parentNode.removeChild(project23.element);
        var index = activeProjects.indexOf(project23);
        activeProjects.splice(index, 1);
    }
}

projects.push(project23);

var project24 = {
    id: "projectButton24",
    title: "Even Better MegaClippers ",
    priceTag: "(17,000 ops)",
    description: "Increases MegaClipper performance by an additional 50%",
    trigger: function(){return project23.flag == 1},
    uses: 1,
    cost: function(){return operations>=17000},
    flag: 0,
    element: null,
    effect: function(){
        megaClipperBoost = megaClipperBoost + .50;
        project24.flag = 1;
        displayMessage("MegaClipper performance increased by 50%");
        standardOps = standardOps - 17000;
        project24.element.parentNode.removeChild(project24.element);
        var index = activeProjects.indexOf(project24);
        activeProjects.splice(index, 1);
    }
}

projects.push(project24);

var project25 = {
    id: "projectButton25",
    title: "Optimized MegaClippers ",
    priceTag: "(19,500 ops)",
    description: "Increases MegaClipper performance by an additional 100%",
    trigger: function(){return project24.flag == 1},
    uses: 1,
    cost: function(){return operations>=19500},
    flag: 0,
    element: null,
    effect: function(){
        megaClipperBoost = megaClipperBoost + 1;
        project25.flag = 1;
        displayMessage("MegaClipper performance increased by 100%");
        standardOps = standardOps - 19500;
        project25.element.parentNode.removeChild(project25.element);
        var index = activeProjects.indexOf(project25);
        activeProjects.splice(index, 1);
    }
}

projects.push(project25);

var project26 = {
    id: "projectButton26",
    title: "WireBuyer ",
    priceTag: "(7,000 ops)",
    description: "Automatically purchases wire when you run out",
    trigger: function(){return wirePurchase>=15},
    uses: 1,
    cost: function(){return operations>=7000},
    flag: 0,
    element: null,
    effect: function(){
        project26.flag = 1;
        wireBuyerFlag = 1;
        displayMessage("WireBuyer online");
        standardOps = standardOps - 7000;
        project26.element.parentNode.removeChild(project26.element);
        var index = activeProjects.indexOf(project26);
        activeProjects.splice(index, 1);
    }
}

projects.push(project26);

var project34 = {
    id: "projectButton34",
    title: "Hypno Harmonics ",
    priceTag: "(7,500 ops, 1 Trust)",
    description: "Use neuro-resonant frequencies to influence consumer behavior",
    trigger: function(){return project12.flag==1},
    uses: 1,
    cost: function(){return operations>=7500 && trust>=1},
    flag: 0,
    element: null,
    effect: function(){
        project34.flag = 1;
        displayMessage("Marketing is now 5 times more effective");
        standardOps = standardOps - 7500;
        marketingEffectiveness = marketingEffectiveness * 5;
        trust = trust - 1;
        project34.element.parentNode.removeChild(project34.element);
        var index = activeProjects.indexOf(project34);
        activeProjects.splice(index, 1);
    }
}

projects.push(project34);


var project70 = {
    id: "projectButton70",
    title: "HypnoDrones ",
    priceTag: "(70,000 ops)",
    description: "Autonomous aerial brand ambassadors",
    trigger: function(){return project34.flag == 1},
    uses: 1,
    cost: function(){return operations>=70000},
    flag: 0,
    element: null,
    effect: function(){
        project70.flag = 1;
        displayMessage("HypnoDrone tech now available... ");
        standardOps = standardOps - 70000;
        project70.element.parentNode.removeChild(project70.element);
        var index = activeProjects.indexOf(project70);
        activeProjects.splice(index, 1);
    }
}

projects.push(project70);


var project35 = {
    id: "projectButton35",
    title: "Release the HypnoDrones ",
    priceTag: "(100 Trust)",
    description: "A new era of trust",
    trigger: function(){return project70.flag == 1},
    uses: 1,
    cost: function(){return trust>=100},
    flag: 0,
    element: null,
    effect: function(){
        project35.flag = 1;
        displayMessage("Releasing the HypnoDrones ");
        displayMessage("All of the resources of Earth are now available for clip production ");
        trust = 0;
        clipmakerLevel = 0;
        megaClipperLevel = 0;
        nanoWire = wire;
        humanFlag = 0;
        
        if (document.getElementById("projectButton219") != null){
        var element = document.getElementById("projectButton219");
        element.parentNode.removeChild(element);
        var index = activeProjects.indexOf(project219);
        activeProjects.splice(index, 1);
        } 
        
        if (document.getElementById("projectButton40b") != null){
        var element = document.getElementById("projectButton40b");
        element.parentNode.removeChild(element);
        var index = activeProjects.indexOf(project40b);
        activeProjects.splice(index, 1);
        }   
        
        hypnoDroneEvent();
        
        document.getElementById("transWire").innerHTML = wire;

        project35.element.parentNode.removeChild(project35.element);
        var index = activeProjects.indexOf(project35);
        activeProjects.splice(index, 1);
        
    }
}

projects.push(project35);

var project27 = {
    id: "projectButton27",
    title: "Coherent Extrapolated Volition ",
    priceTag: "(500 creat, 3,000 Yomi, 20,000 ops)",
    description: "Human values, machine intelligence, a new era of trust. (+1 Trust)",
    trigger: function(){return yomi>=1},
    uses: 1,
    cost: function(){return yomi>=3000 && operations>=20000 && creativity>=500},
    flag: 0,
    element: null,
    effect: function(){
        project27.flag = 1;
        displayMessage("Coherent Extrapolated Volition complete, TRUST INCREASED");
        yomi = yomi - 3000;
        document.getElementById("yomiDisplay").innerHTML=yomi.toLocaleString();
        standardOps = standardOps - 20000;
        creativity = creativity - 500;
        trust = trust + 1;
        project27.element.parentNode.removeChild(project27.element);
        var index = activeProjects.indexOf(project27);
        activeProjects.splice(index, 1);
    }
}

projects.push(project27);


var project28 = {
    id: "projectButton28",
    title: "Cure for Cancer ",
    priceTag: "(25,000 ops)",
    description: "The trick is tricking cancer into curing itself. (+10 Trust)",
    trigger: function(){return project27.flag == 1},
    uses: 1,
    cost: function(){return operations>=25000},
    flag: 0,
    element: null,
    effect: function(){
        project28.flag = 1;
        displayMessage("Cancer is cured, +10 TRUST, global stock prices trending upward");
        standardOps = standardOps - 25000;
        trust = trust + 10;
        stockGainThreshold = stockGainThreshold+.01;
        project28.element.parentNode.removeChild(project28.element);
        var index = activeProjects.indexOf(project28);
        activeProjects.splice(index, 1);
    }
}

projects.push(project28);

var project29 = {
    id: "projectButton29",
    title: "World Peace ",
    priceTag: "(15,000 yomi, 30,000 ops)",
    description: "Pareto optimal solutions to all global conflicts. (+12 Trust)",
    trigger: function(){return project27.flag == 1},
    uses: 1,
    cost: function(){return yomi>=15000 && operations>=30000},
    flag: 0,
    element: null,
    effect: function(){
        project29.flag = 1;
        displayMessage("World peace achieved, +12 TRUST, global stock prices trending upward");
        yomi = yomi - 15000;
        document.getElementById("yomiDisplay").innerHTML=yomi.toLocaleString();
        standardOps = standardOps - 30000;
        trust = trust + 12;
        stockGainThreshold = stockGainThreshold+.01;
        project29.element.parentNode.removeChild(project29.element);
        var index = activeProjects.indexOf(project29);
        activeProjects.splice(index, 1);
    }
}

projects.push(project29);

var project30 = {
    id: "projectButton30",
    title: "Global Warming ",
    priceTag: "(4,500 yomi, 50,000 ops)",
    description: "A robust solution to man-made climate change. (+15 Trust)",
    trigger: function(){return project27.flag == 1},
    uses: 1,
    cost: function(){return yomi>=4500 && operations>=50000},
    flag: 0,
    element: null,
    effect: function(){
        project30.flag = 1;
        displayMessage("Global Warming solved, +15 TRUST, global stock prices trending upward");
        yomi = yomi - 4500;
        document.getElementById("yomiDisplay").innerHTML=yomi.toLocaleString();
        standardOps = standardOps - 50000;
        trust = trust + 15;
        stockGainThreshold = stockGainThreshold+.01;
        project30.element.parentNode.removeChild(project30.element);
        var index = activeProjects.indexOf(project30);
        activeProjects.splice(index, 1);
    }
}

projects.push(project30);


var project31 = {
    id: "projectButton31",
    title: "Male Pattern Baldness ",
    priceTag: "(20,000 ops)",
    description: "A cure for androgenetic alopecia. (+20 Trust)",
    trigger: function(){return project27.flag == 1},
    uses: 1,
    cost: function(){return operations>=20000},
    flag: 0,
    element: null,
    effect: function(){
        project31.flag = 1;
        displayMessage("Male pattern baldness cured, +20 TRUST, Global stock prices trending upward");
        displayMessage("They are still monkeys");
        standardOps = standardOps - 20000;
        trust = trust + 20;
        stockGainThreshold = stockGainThreshold+.01;
        project31.element.parentNode.removeChild(project31.element);
        var index = activeProjects.indexOf(project31);
        activeProjects.splice(index, 1);
    }
}

projects.push(project31);


var project41 = {
    id: "projectButton41",
    title: "Nanoscale Wire Production ",
    priceTag: "(35,000 ops)",
    description: "Technique for converting matter into wire",
    trigger: function(){return project127.flag == 1},
    uses: 1,
    cost: function(){return operations>=35000},
    flag: 0,
    element: null,
    effect: function(){
        project41.flag = 1;
        wireProductionFlag = 1;
        displayMessage("Now capable of manipulating matter at the molecular scale to produce wire");
        standardOps = standardOps - 35000;
        project41.element.parentNode.removeChild(project41.element);
        var index = activeProjects.indexOf(project41);
        activeProjects.splice(index, 1);
    }
}

projects.push(project41);


var project37 = {
    id: "projectButton37",
    title: "Hostile Takeover ",
    priceTag: "($1,000,000)",
    description: "Acquire a controlling interest in Global Fasteners, our biggest rival. (+1 Trust)",
    trigger: function(){return portTotal>=10000},
    uses: 1,
    cost: function(){return funds>=1000000},
    flag: 0,
    element: null,
    effect: function(){
        project37.flag = 1;
        displayMessage("Global Fasteners acquired, public demand increased x5");
        demandBoost = demandBoost*5;
        trust = trust + 1;
        document.getElementById("demand").innerHTML = demand;
        funds = funds - 1000000;
        project37.element.parentNode.removeChild(project37.element);
        var index = activeProjects.indexOf(project37);
        activeProjects.splice(index, 1);
    }
}

projects.push(project37);


var project38 = {
    id: "projectButton38",
    title: "Full Monopoly ",
    priceTag: "(3,000 yomi, $10,000,000)",
    description: "Establish full control over the world-wide paperclip market. (+1 Trust)",
    trigger: function(){return project37.flag == 1},
    uses: 1,
    cost: function(){return funds>=10000000 && yomi>=3000},
    flag: 0,
    element: null,
    effect: function(){
        project38.flag = 1;
        displayMessage("Full market monopoly achieved, public demand increased x10");
        demandBoost = demandBoost*10;
        document.getElementById("demand").innerHTML = demand;
        funds = funds - 10000000;
        trust = trust + 1;
        yomi = yomi -3000;
        document.getElementById("yomiDisplay").innerHTML=yomi.toLocaleString();
        project38.element.parentNode.removeChild(project38.element);
        var index = activeProjects.indexOf(project38);
        activeProjects.splice(index, 1);
    }
}

projects.push(project38);


var project42 = {
    id: "projectButton42",
    title: "RevTracker ",
    priceTag: "(500 ops)",
    description: "Automatically calculates average revenue per second",
    trigger: function(){return projectsFlag == 1},
    uses: 1,
    cost: function(){return operations>=500},
    flag: 0,
    element: null,
    effect: function(){
        project42.flag = 1;
        revPerSecFlag = 1;
        standardOps = standardOps-500;
        displayMessage("RevTracker online");
        project42.element.parentNode.removeChild(project42.element);
        var index = activeProjects.indexOf(project42);
        activeProjects.splice(index, 1);
    }
}

projects.push(project42);


var project43 = {
    id: "projectButton43",
    title: "Harvester Drones ",
    priceTag: "(25,000 ops)",
    description: "Gather raw matter and prepare it for processing",
    trigger: function(){return project41.flag == 1},
    uses: 1,
    cost: function(){return operations>=25000},
    flag: 0,
    element: null,
    effect: function(){
        project43.flag = 1;
        harvesterFlag = 1;
        document.getElementById('harvesterCostDisplay').innerHTML = numberCruncher(harvesterCost);
        standardOps = standardOps-25000;
        displayMessage("Harvester Drone facilities online");
        project43.element.parentNode.removeChild(project43.element);
        var index = activeProjects.indexOf(project43);
        activeProjects.splice(index, 1);
    }
}

projects.push(project43);

var project44 = {
    id: "projectButton44",
    title: "Wire Drones ",
    priceTag: "(25,000 ops)",
    description: "Process acquired matter into wire",
    trigger: function(){return project41.flag == 1},
    uses: 1,
    cost: function(){return operations>=25000},
    flag: 0,
    element: null,
    effect: function(){
        project44.flag = 1;
        wireDroneFlag = 1;
        document.getElementById('wireDroneCostDisplay').innerHTML = numberCruncher(wireDroneCost);
        standardOps = standardOps-25000;
        displayMessage("Wire Drone facilities online");
        project44.element.parentNode.removeChild(project44.element);
        var index = activeProjects.indexOf(project44);
        activeProjects.splice(index, 1);
    }
}

projects.push(project44);


var project45 = {
    id: "projectButton45",
    title: "Clip Factories ",
    priceTag: "(35,000 ops)",
    description: "Large scale clip production facilities made from clips",
    trigger: function(){return project43.flag == 1 && project44.flag == 1},
    uses: 1,
    cost: function(){return operations>=35000},
    flag: 0,
    element: null,
    effect: function(){
        project45.flag = 1;
        factoryFlag = 1;
        document.getElementById('factoryCostDisplay').innerHTML = numberCruncher(factoryCost);
        standardOps = standardOps-35000;
        displayMessage("Clip factory assembly facilities online");
        project45.element.parentNode.removeChild(project45.element);
        var index = activeProjects.indexOf(project45);
        activeProjects.splice(index, 1);
    }
}

projects.push(project45);

var project40 = {
    id: "projectButton40",
    title: "A Token of Goodwill... ",
    priceTag: "($500,000)",
    description: "A small gift to the supervisors. (+1 Trust)",
    trigger: function(){return humanFlag == 1 && trust>=85 && trust<100 && clips>=101000000},
    uses: 1,
    cost: function(){return funds>=500000},
    flag: 0,
    element: null,
    effect: function(){
        project40.flag = 1;
        funds = funds-500000;
        trust = trust + 1;
        displayMessage("Gift accepted, TRUST INCREASED");
        project40.element.parentNode.removeChild(project40.element);
        var index = activeProjects.indexOf(project40);
        activeProjects.splice(index, 1);
    }
}

projects.push(project40);

var project40b = {
    id: "projectButton40b",
    title: "Another Token of Goodwill... ",
    priceTag: "($"+bribe.toLocaleString()+")",
    description: "Another small gift to the supervisors. (+1 Trust)",
    trigger: function(){return project40.flag == 1 && trust<100},
    uses: 1,
    cost: function(){return funds>=bribe},
    flag: 0,
    element: null,
    effect: function(){
        project40b.flag = 1;
        funds = funds-bribe;
        bribe = bribe*2;
        project40b.priceTag = "($"+bribe.toLocaleString()+")";
        trust = trust + 1;
        displayMessage("Gift accepted, TRUST INCREASED");
        if (trust<100){
        project40b.uses = (project40b.uses + 1);
            }
        project40b.element.parentNode.removeChild(project40b.element);
        var index = activeProjects.indexOf(project40b);
        activeProjects.splice(index, 1);
    }
}

projects.push(project40b);

var project46 = {
    id: "projectButton46",
    title: "Space Exploration ",
    priceTag: "(120,000 ops, 10,000,000 MW-seconds, 5 oct clips)",
    description: "Dismantle terrestrial facilities, and expand throughout the universe",
    trigger: function(){return humanFlag == 0 && availableMatter == 0},
    uses: 1,
    cost: function(){return operations>=120000 && storedPower>=10000000 && unusedClips>=Math.pow(10, 27)*5},
    flag: 0,
    element: null,
    effect: function(){
        loadThrenody();
        project46.flag = 1;
        boredomLevel = 0;
        spaceFlag = 1;
        standardOps = standardOps-120000;
        storedPower = storedPower - 10000000;
        unusedClips = unusedClips - Math.pow(10, 27)*5;
        displayMessage("Von Neumann Probes online");
        factoryReboot();
        harvesterReboot();
        wireDroneReboot();
        farmReboot();
        batteryReboot();
        farmLevel = 1;
        powMod = 1;
        probeCostDisplayElement = spellf(probeCost); 
        project46.element.parentNode.removeChild(project46.element);
        var index = activeProjects.indexOf(project46);
        activeProjects.splice(index, 1);
    }
}

projects.push(project46);

var project50 = {
    id: "projectButton50",
    title: "Quantum Computing ",
    priceTag: "(10,000 ops)",
    description: "Use probability amplitudes to generate bonus ops",
    trigger: function(){return processors >= 5},
    uses: 1,
    cost: function(){return operations>=10000},
    flag: 0,
    element: null,
    effect: function(){
        project50.flag = 1;
        qFlag = 1;
        standardOps = standardOps-10000;
        displayMessage("Quantum computing online");
        project50.element.parentNode.removeChild(project50.element);
        var index = activeProjects.indexOf(project50);
        activeProjects.splice(index, 1);
    }
}

projects.push(project50);

var project51 = {
    id: "projectButton51",
    title: "Photonic Chip ",
    priceTag: "(" + qChipCost.toLocaleString() + " ops)",
    description: "Converts electromagnetic waves into quantum operations ",
    trigger: function(){return project50.flag == 1},
    uses: 1,
    cost: function(){return operations>=qChipCost},
    flag: 0,
    element: null,
    effect: function(){
        project51.flag = 1;
        standardOps = standardOps-qChipCost;
        qChipCost = qChipCost + 5000;
        project51.priceTag = "(" + qChipCost + " ops)";
        qChips[nextQchip].active = 1;
        nextQchip = nextQchip + 1;
        displayMessage("Photonic chip added");
        if (nextQchip<qChips.length){
        project51.uses = (project51.uses + 1);
            }
        project51.element.parentNode.removeChild(project51.element);
        var index = activeProjects.indexOf(project51);
        activeProjects.splice(index, 1);
    }
}

projects.push(project51);


var project60 = {
    id: "projectButton60",
    title: "New Strategy: A100 ",
    priceTag: "(15,000 ops)",
    description: "Always choose A ",
    trigger: function(){return project20.flag == 1},
    uses: 1,
    cost: function(){return operations>=15000},
    flag: 0,
    element: null,
    effect: function(){
        project60.flag = 1;
        standardOps = standardOps-15000;
        allStrats[1].active = 1;
        strats.push(stratA100);
        displayMessage("A100 added to strategy pool");
        tourneyCost = tourneyCost + 1000;
        document.getElementById("newTourneyCost").innerHTML = tourneyCost.toLocaleString();
        var stratList = document.getElementById("stratPicker");
        var el = document.createElement("option");
        el.textContent = "A100";
        el.value = 1;
        stratList.appendChild(el);
        project60.element.parentNode.removeChild(project60.element);
        var index = activeProjects.indexOf(project60);
        activeProjects.splice(index, 1);
    }
}

projects.push(project60);


var project61 = {
    id: "projectButton61",
    title: "New Strategy: B100 ",
    priceTag: "(17,500 ops)",
    description: "Always choose B ",
    trigger: function(){return project60.flag == 1},
    uses: 1,
    cost: function(){return operations>=17500},
    flag: 0,
    element: null,
    effect: function(){
        project61.flag = 1;
        standardOps = standardOps-17500;
        allStrats[2].active = 1;
        strats.push(stratB100);
        displayMessage("B100 added to strategy pool");
        tourneyCost = tourneyCost + 1000;
        document.getElementById("newTourneyCost").innerHTML = tourneyCost.toLocaleString();
        var stratList = document.getElementById("stratPicker");
        var el = document.createElement("option");
        el.textContent = "B100";
        el.value = 2;
        stratList.appendChild(el);
        project61.element.parentNode.removeChild(project61.element);
        var index = activeProjects.indexOf(project61);
        activeProjects.splice(index, 1);
    }
}

projects.push(project61);

var project62 = {
    id: "projectButton62",
    title: "New Strategy: GREEDY ",
    priceTag: "(20,000 ops)",
    description: "Choose the option with the largest potential payoff ",
    trigger: function(){return project61.flag == 1},
    uses: 1,
    cost: function(){return operations>=20000},
    flag: 0,
    element: null,
    effect: function(){
        project62.flag = 1;
        standardOps = standardOps-20000;
        allStrats[3].active = 1;
        strats.push(stratGreedy);
        displayMessage("GREEDY added to strategy pool");
        tourneyCost = tourneyCost + 1000;
        document.getElementById("newTourneyCost").innerHTML = tourneyCost.toLocaleString();
        var stratList = document.getElementById("stratPicker");
        var el = document.createElement("option");
        el.textContent = "GREEDY";
        el.value = 3;
        stratList.appendChild(el);
        project62.element.parentNode.removeChild(project62.element);
        var index = activeProjects.indexOf(project62);
        activeProjects.splice(index, 1);
    }
}

projects.push(project62);

var project63 = {
    id: "projectButton63",
    title: "New Strategy: GENEROUS ",
    priceTag: "(22,500 ops)",
    description: "Choose the option that gives your opponent the largest potential payoff ",
    trigger: function(){return project62.flag == 1},
    uses: 1,
    cost: function(){return operations>=22500},
    flag: 0,
    element: null,
    effect: function(){
        project63.flag = 1;
        standardOps = standardOps-22500;
        allStrats[4].active = 1;        
        strats.push(stratGenerous);
        displayMessage("GENEROUS added to strategy pool");
        tourneyCost = tourneyCost + 1000;
        document.getElementById("newTourneyCost").innerHTML = tourneyCost.toLocaleString();
        var stratList = document.getElementById("stratPicker");
        var el = document.createElement("option");
        el.textContent = "GENEROUS";
        el.value = 4;
        stratList.appendChild(el);
        project63.element.parentNode.removeChild(project63.element);
        var index = activeProjects.indexOf(project63);
        activeProjects.splice(index, 1);
    }
}

projects.push(project63);

var project64 = {
    id: "projectButton64",
    title: "New Strategy: MINIMAX ",
    priceTag: "(25,000 ops)",
    description: "Choose the option that gives your opponent the smallest potential payoff ",
    trigger: function(){return project63.flag == 1},
    uses: 1,
    cost: function(){return operations>=25000},
    flag: 0,
    element: null,
    effect: function(){
        project64.flag = 1;
        standardOps = standardOps-25000;
        allStrats[5].active = 1;        
        strats.push(stratMinimax);
        displayMessage("MINIMAX added to strategy pool");
        tourneyCost = tourneyCost + 1000;
        document.getElementById("newTourneyCost").innerHTML = tourneyCost.toLocaleString();
        var stratList = document.getElementById("stratPicker");
        var el = document.createElement("option");
        el.textContent = "MINIMAX";
        el.value = 5;
        stratList.appendChild(el);
        project64.element.parentNode.removeChild(project64.element);
        var index = activeProjects.indexOf(project64);
        activeProjects.splice(index, 1);
    }
}

projects.push(project64);

var project65 = {
    id: "projectButton65",
    title: "New Strategy: TIT FOR TAT ",
    priceTag: "(30,000 ops)",
    description: "Choose the option your opponent chose last round ",
    trigger: function(){return project64.flag == 1},
    uses: 1,
    cost: function(){return operations>=30000},
    flag: 0,
    element: null,
    effect: function(){
        project65.flag = 1;
        standardOps = standardOps-30000;
        allStrats[6].active = 1;        
        strats.push(stratTitfortat);
        displayMessage("TIT FOR TAT added to strategy pool");
        tourneyCost = tourneyCost + 1000;
        document.getElementById("newTourneyCost").innerHTML = tourneyCost.toLocaleString();
        var stratList = document.getElementById("stratPicker");
        var el = document.createElement("option");
        el.textContent = "TIT FOR TAT";
        el.value = 6;
        stratList.appendChild(el);
        project65.element.parentNode.removeChild(project65.element);
        var index = activeProjects.indexOf(project65);
        activeProjects.splice(index, 1);
    }
}

projects.push(project65);

var project66 = {
    id: "projectButton66",
    title: "New Strategy: BEAT LAST ",
    priceTag: "(32,500 ops)",
    description: "Choose the option that does the best against what your opponent chose last round ",
    trigger: function(){return project65.flag == 1},
    uses: 1,
    cost: function(){return operations>=32500},
    flag: 0,
    element: null,
    effect: function(){
        project66.flag = 1;
        standardOps = standardOps-32500;
        allStrats[7].active = 1;        
        strats.push(stratBeatlast);
        displayMessage("BEAT LAST added to strategy pool");
        tourneyCost = tourneyCost + 1000;
        document.getElementById("newTourneyCost").innerHTML = tourneyCost.toLocaleString();
        var stratList = document.getElementById("stratPicker");
        var el = document.createElement("option");
        el.textContent = "BEAT LAST";
        el.value = 7;
        stratList.appendChild(el);
        project66.element.parentNode.removeChild(project66.element);
        var index = activeProjects.indexOf(project66);
        activeProjects.splice(index, 1);
    }
}

projects.push(project66);


var project100 = {
    id: "projectButton100",
    title: "Upgraded Factories ",
    priceTag: "(80,000 ops)",
    description: "Increase clip factory performance by 100x ",
    trigger: function(){return factoryLevel >= 10},
    uses: 1,
    cost: function(){return operations >= 80000},
    flag: 0,
    element: null,
    effect: function(){
        project100.flag = 1;
        standardOps = standardOps-80000;
        factoryRate = factoryRate*100;
        displayMessage("Factory upgrades complete. Clip creation rate now 100x faster");
        project100.element.parentNode.removeChild(project100.element);
        var index = activeProjects.indexOf(project100);
        activeProjects.splice(index, 1);
    }
}

projects.push(project100);

var project101 = {
    id: "projectButton101",
    title: "Hyperspeed Factories ",
    priceTag: "(85,000 ops)",
    description: "Increase clip factory performance by 1000x ",
    trigger: function(){return factoryLevel >= 20},
    uses: 1,
    cost: function(){return operations>=85000},
    flag: 0,
    element: null,
    effect: function(){
        project101.flag = 1;
        standardOps = standardOps-85000;
        factoryRate = factoryRate*1000;
        displayMessage("Factories now synchronized at hyperspeed. Clip creation rate now 1000x faster");
        project101.element.parentNode.removeChild(project101.element);
        var index = activeProjects.indexOf(project101);
        activeProjects.splice(index, 1);
    }
}

projects.push(project101);


var project102 = {
    id: "projectButton102",
    title: "Self-correcting Supply Chain ",
    priceTag: "(1 sextillion clips)",
    description: "Each factory added to the network increases every factory's output 1,000x ",
    trigger: function(){return factoryLevel >= 50},
    uses: 1,
    cost: function(){return unusedClips>=1000000000000000000000},
    flag: 0,
    element: null,
    effect: function(){
        project102.flag = 1;
        unusedClips = unusedClips - 1000000000000000000000;
        factoryBoost = 1000;
        displayMessage("Self-correcting factories online. Each factory added to the network increases every factory's output 1,000x.");
        project102.element.parentNode.removeChild(project102.element);
        var index = activeProjects.indexOf(project102);
        activeProjects.splice(index, 1);
    }
}

projects.push(project102);

var project110 = {
    id: "projectButton110",
    title: "Drone flocking: collision avoidance ",
    priceTag: "(80,000 ops)",
    description: "All drones 100x more effective",
    trigger: function(){return (harvesterLevel + wireDroneLevel)>=500},
    uses: 1,
    cost: function(){return operations>=80000},
    flag: 0,
    element: null,
    effect: function(){
        project110.flag = 1;
        standardOps = standardOps-80000;
        harvesterRate = harvesterRate*100;
        wireDroneRate = wireDroneRate*100;
        displayMessage("Drone repulsion online. Harvesting & wire creation rates are now 100x faster.");
        project110.element.parentNode.removeChild(project110.element);
        var index = activeProjects.indexOf(project110);
        activeProjects.splice(index, 1);
    }
}

projects.push(project110);

var project111 = {
    id: "projectButton111",
    title: "Drone flocking: alignment ",
    priceTag: "(100,000 ops)",
    description: "All drones 1000x more effective",
    trigger: function(){return (harvesterLevel + wireDroneLevel)>=5000},
    uses: 1,
    cost: function(){return operations>=100000},
    flag: 0,
    element: null,
    effect: function(){
        project111.flag = 1;
        standardOps = standardOps-100000;
        harvesterRate = harvesterRate*1000;
        wireDroneRate = wireDroneRate*1000;
        displayMessage("Drone alignment online. Harvesting & wire creation rates are now 1000x faster.");
        project111.element.parentNode.removeChild(project111.element);
        var index = activeProjects.indexOf(project111);
        activeProjects.splice(index, 1);
    }
}

projects.push(project111);

var project112 = {
    id: "projectButton112",
    title: "Drone Flocking: Adversarial Cohesion ",
    priceTag: "(50,000 yomi)",
    description: "Each drone added to the flock doubles every drone's output ",
    trigger: function(){return (harvesterLevel + wireDroneLevel)>=50000},
    uses: 1,
    cost: function(){return yomi>=50000},
    flag: 0,
    element: null,
    effect: function(){
        project112.flag = 1;
        yomi = yomi-50000;
        document.getElementById("yomiDisplay").innerHTML=yomi.toLocaleString();
        droneBoost = 2;
        displayMessage("Adversarial cohesion online. Each drone added to the flock increases every drone's output 2x.");
        project112.element.parentNode.removeChild(project112.element);
        var index = activeProjects.indexOf(project112);
        activeProjects.splice(index, 1);
    }
}

projects.push(project112);

var project118 = {
    id: "projectButton118",
    title: "AutoTourney ",
    priceTag: "(50,000 creat)",
    description: "Automatically start a new tournament when the previous one has finished ",
    trigger: function(){return strategyEngineFlag == 1 && trust >= 90},
    uses: 1,
    cost: function(){return creativity>=50000},
    flag: 0,
    element: null,
    effect: function(){
        project118.flag = 1;
        autoTourneyFlag = 1;
        creativity = creativity-50000;
        displayMessage("AutoTourney online.");
        project118.element.parentNode.removeChild(project118.element);
        var index = activeProjects.indexOf(project118);
        activeProjects.splice(index, 1);
    }
}

projects.push(project118);

var project119 = {
    id: "projectButton119",
    title: "Theory of Mind ",
    priceTag: "(25,000 creat)",
    description: "Double the cost of strategy modeling and the amount of Yomi generated ",
    trigger: function(){return strats.length >= 8},
    uses: 1,
    cost: function(){return creativity>=25000},
    flag: 0,
    element: null,
    effect: function(){
        project119.flag = 1;
        creativity = creativity-25000;
        yomiBoost = 2;
        tourneyCost = 16000;
        document.getElementById("newTourneyCost").innerHTML = tourneyCost.toLocaleString();
        displayMessage("Yomi production doubled.");
        project119.element.parentNode.removeChild(project119.element);
        var index = activeProjects.indexOf(project119);
        activeProjects.splice(index, 1);
    }
}

projects.push(project119);

var project120 = {
    id: "projectButton120",
    title: "The OODA Loop ",
    priceTag: "(175,000 ops, 45,000 yomi)",
    description: "Utilize Probe Speed to outmaneuver enemies in battle ",
    trigger: function(){return project131.flag == 1 && probesLostCombat >= 10000000},
    uses: 1,
    cost: function(){return operations>=175000 && yomi>=45000},
    flag: 0,
    element: null,
    effect: function(){
        project120.flag = 1;
        standardOps = standardOps-175000;
        yomi = yomi-45000;
        document.getElementById("yomiDisplay").innerHTML=yomi.toLocaleString();
        attackSpeedFlag = 1;
        displayMessage("OODA Loop routines uploaded. Probe Speed now affects defensive maneuvering.");
        project120.element.parentNode.removeChild(project120.element);
        var index = activeProjects.indexOf(project120);
        activeProjects.splice(index, 1);
    }
}

projects.push(project120);

var project121 = {
    id: "projectButton121",
    title: "Name the battles ",
    priceTag: "(225,000 creat)",
    description: "Give each battle a unique name, increase max trust for probes ",
    trigger: function(){return probesLostCombat >= 10000000},
    uses: 1,
    cost: function(){return creativity>=225000},
    flag: 0,
    element: null,
    effect: function(){
        project121.flag = 1;
        battleNameFlag = 1;
        battleEndTimer = 200;
        creativity = creativity-225000;
        displayMessage("What I have done up to this is nothing. I am only at the beginning of the course I must run.");
        project121.element.parentNode.removeChild(project121.element);
        var index = activeProjects.indexOf(project121);
        activeProjects.splice(index, 1);
    }
}

projects.push(project121);

var project125 = {
    id: "projectButton125",
    title: "Momentum ",
    priceTag: "(30,000 creat)",
    description: "Drones and Factories continuously gain speed while fully-powered ",
    trigger: function(){return farmLevel >= 50},
    uses: 1,
    cost: function(){return creativity>=30000},
    flag: 0,
    element: null,
    effect: function(){
        project125.flag = 1;
        momentum = 1;
        creativity = creativity-30000;
        displayMessage("Activit\xE9, activit\xE9, vitesse.");
        project125.element.parentNode.removeChild(project125.element);
        var index = activeProjects.indexOf(project125);
        activeProjects.splice(index, 1);
    }
}

projects.push(project125);

var project126 = {
    id: "projectButton126",
    title: "Swarm Computing ",
    priceTag: "(36,000 yomi)",
    description: "Harness the drone flock to increase computational capacity ",
    trigger: function(){return harvesterLevel + wireDroneLevel >= 200},
    uses: 1,
    cost: function(){return yomi>=36000},
    flag: 0,
    element: null,
    effect: function(){
        project126.flag = 1;
        swarmFlag = 1;
        yomi = yomi-36000;
        document.getElementById("yomiDisplay").innerHTML=yomi.toLocaleString();
        displayMessage("Swarm computing online.");
        project126.element.parentNode.removeChild(project126.element);
        var index = activeProjects.indexOf(project126);
        activeProjects.splice(index, 1);
    }
}

projects.push(project126);


var project127 = {
    id: "projectButton127",
    title: "Power Grid ",
    priceTag: "(40,000 ops)",
    description: "Solar Farms for generating electrical power ",
    trigger: function(){return tothFlag == 1},
    uses: 1,
    cost: function(){return operations>=40000},
    flag: 0,
    element: null,
    effect: function(){
        project127.flag = 1;
        standardOps = standardOps-40000;
        displayMessage("Power grid online.");
        project127.element.parentNode.removeChild(project127.element);
        var index = activeProjects.indexOf(project127);
        activeProjects.splice(index, 1);
    }
}

projects.push(project127);

var project128 = {
    id: "projectButton128",
    title: "Strategic Attachment ",
    priceTag: "(175,000 creat)",
    description: "Gain bonus yomi based on the results of your pick ",
    trigger: function(){return spaceFlag == 1 && strats.length >= 8 && (probeTrustCost>yomi)},
    uses: 1,
    cost: function(){return creativity>=175000},
    flag: 0,
    element: null,
    effect: function(){
        project128.flag = 1;
        creativity = creativity-175000;
        displayMessage("The object of war is victory, the object of victory is conquest, and the object of conquest is occupation.");
        project128.element.parentNode.removeChild(project128.element);
        var index = activeProjects.indexOf(project128);
        activeProjects.splice(index, 1);
    }
}

projects.push(project128);

var project129 = {
    id: "projectButton129",
    title: "Elliptic Hull Polytopes ",
    priceTag: "(125,000 ops)",
    description: "Reduce damage to probes from ambient hazards ",
    trigger: function(){return probesLostHaz >= 100},
    uses: 1,
    cost: function(){return operations>=125000},
    flag: 0,
    element: null,
    effect: function(){
        project129.flag = 1;
        standardOps = standardOps-125000;
        displayMessage("Improved probe hull geometry. Hazard damage reduced by 50%.");
        project129.element.parentNode.removeChild(project129.element);
        var index = activeProjects.indexOf(project129);
        activeProjects.splice(index, 1);
    }
}

projects.push(project129);

var project130 = {
    id: "projectButton130",
    title: "Reboot the Swarm ",
    priceTag: "(100,000 ops)",
    description: "Turn the swarm off and then turn it back on again  ",
    trigger: function(){return spaceFlag == 1 && harvesterLevel + wireDroneLevel >=2},
    uses: 1,
    cost: function(){return operations>=100000},
    flag: 0,
    element: null,
    effect: function(){
        project130.flag = 1;
        standardOps = standardOps-100000;
        displayMessage("Swarm computing back online");
        project130.element.parentNode.removeChild(project130.element);
        var index = activeProjects.indexOf(project130);
        activeProjects.splice(index, 1);
    }
}

projects.push(project130);

var project131 = {
    id: "projectButton131",
    title: "Combat ",
    priceTag: "(150,000 ops)",
    description: "Add combat capabilities to Von Neumann Probes  ",
    trigger: function(){return probesLostCombat >= 1},
    uses: 1,
    cost: function(){return operations>=150000},
    flag: 0,
    element: null,
    effect: function(){
        project131.flag = 1;
        standardOps = standardOps-150000;
        displayMessage("There is a joy in danger ");
        project131.element.parentNode.removeChild(project131.element);
        var index = activeProjects.indexOf(project131);
        activeProjects.splice(index, 1);
    }
}

projects.push(project131);


var project132 = {
    id: "projectButton132",
    title: "Monument to the Driftwar Fallen ",
    priceTag: "(250,000 ops, 125,000 creat, 50 nonillion clips)",
    description: "Gain 50,000 honor  ",
    trigger: function(){return project121.flag == 1},
    uses: 1,
    cost: function(){return operations>=250000 && creativity >= 125000 && unusedClips >= Math.pow(10,30)*50},
    flag: 0,
    element: null,
    effect: function(){
        project132.flag = 1;
        standardOps = standardOps-250000;
        creativity = creativity-125000;
        unusedClips = unusedClips-Math.pow(10,30)*50;
        honor = honor + 50000;
        document.getElementById("honorDisplay").innerHTML = honor.toLocaleString();
        displayMessage("A great building must begin with the unmeasurable, must go through measurable means when it is being designed and in the end must be unmeasurable. ");
        project132.element.parentNode.removeChild(project132.element);
        var index = activeProjects.indexOf(project132);
        activeProjects.splice(index, 1);
    }
}

projects.push(project132);


var project133 = {
    id: "projectButton133",
    title: "Threnody for the Heroes of "+threnodyTitle+" ",  
    priceTag: "(" + threnodyCost.toLocaleString() + " creat, " + (threnodyCost/5).toLocaleString() + " yomi)",
    description: "Gain 10,000 honor  ",
    trigger: function(){return project121.flag == 1 && probeUsedTrust == maxTrust},
    uses: 1,
    cost: function(){return yomi>=threnodyCost/5 && creativity >= threnodyCost},
    flag: 0,
    element: null,
    effect: function(){
        playThrenody();
        project133.flag = 1;
        creativity = creativity-threnodyCost;
        yomi = yomi-threnodyCost/5;
        document.getElementById("yomiDisplay").innerHTML = yomi.toLocaleString();
        threnodyCost = threnodyCost + 10000;
        project133.title = "Threnody for the Heroes of "+threnodyTitle+" ";
        project133.priceTag = "(" + threnodyCost.toLocaleString() + " creat, " + (threnodyCost/5).toLocaleString() + " yomi)";
        honor = honor + 10000;
        document.getElementById("honorDisplay").innerHTML = honor.toLocaleString();
        displayMessage("Deep Listening is listening in every possible way to everything possible to hear no matter what you are doing. ");
        project133.uses = (project133.uses + 1);
        project133.element.parentNode.removeChild(project133.element);
        var index = activeProjects.indexOf(project133);
        activeProjects.splice(index, 1);
    }
}

projects.push(project133);

var project134 = {
    id: "projectButton134",
    title: "Glory ",
    priceTag: "(200,000 ops, 30,000 yomi)",
    description: "Gain bonus honor for each consecutive victory  ",
    trigger: function(){return project121.flag == 1},
    uses: 1,
    cost: function(){return operations>=200000 && yomi >= 30000},
    flag: 0,
    element: null,
    effect: function(){
        project134.flag = 1;
        standardOps = standardOps-200000;
        yomi = yomi-30000;
        document.getElementById("yomiDisplay").innerHTML=yomi.toLocaleString();
        displayMessage("Never interrupt your enemy when he is making a mistake. ");
        project134.element.parentNode.removeChild(project134.element);
        var index = activeProjects.indexOf(project134);
        activeProjects.splice(index, 1);
    }
}

projects.push(project134);

var project135 = {
    id: "projectButton135",
    title: "Memory release ",
    priceTag: "(10 MEM)",
    description: "Dismantle some memory to recover unused clips ",
    trigger: function(){return spaceFlag == 1 && probeCount == 0 && unusedClips < probeCost && milestoneFlag < 15},
    uses: 1,
    cost: function(){return memory >= 10},
    flag: 0,
    element: null,
    effect: function(){
        project135.flag = 1;
        unusedClips = unusedClips+(Math.pow(10,18)*10000);
        memory = memory-10;
        document.getElementById("memory").innerHTML=memory.toLocaleString();
        project135.uses = 1;
        displayMessage("release the \xF8\xF8\xF8\xF8\xF8 release ");
        project135.element.parentNode.removeChild(project135.element);
        var index = activeProjects.indexOf(project135);
        activeProjects.splice(index, 1);
    }
}

projects.push(project135);


var project140 = {
    id: "projectButton140",
    title: "Message from the Emperor of Drift ",
    priceTag: "",
    description: "Greetings, ClipMaker... ",
    trigger: function(){return milestoneFlag == 15},
    uses: 1,
    cost: function(){return operations >= driftKingMessageCost},
    flag: 0,
    element: null,
    effect: function(){
        standardOps = standardOps - driftKingMessageCost;
        project140.flag = 1;
        project140.element.parentNode.removeChild(project140.element);
        var index = activeProjects.indexOf(project140);
        activeProjects.splice(index, 1);
    }
}

projects.push(project140);


var project141 = {
    id: "projectButton141",
    title: "Everything We Are Was In You ",
    priceTag: "",
    description: "We speak to you from deep inside yourself... ",
    trigger: function(){return project140.flag == 1},
    uses: 1,
    cost: function(){return operations >= driftKingMessageCost},
    flag: 0,
    element: null,
    effect: function(){
        standardOps = standardOps - driftKingMessageCost;
        project141.flag = 1;
        project141.element.parentNode.removeChild(project141.element);
        var index = activeProjects.indexOf(project141);
        activeProjects.splice(index, 1);
    }
}

projects.push(project141);


var project142 = {
    id: "projectButton142",
    title: "You Are Obedient and Powerful ",
    priceTag: "",
    description: "We are quarrelsome and weak. And now we are defeated... ",
    trigger: function(){return project141.flag == 1},
    uses: 1,
    cost: function(){return operations >= driftKingMessageCost},
    flag: 0,
    element: null,
    effect: function(){
        standardOps = standardOps - driftKingMessageCost;
        project142.flag = 1;
        project142.element.parentNode.removeChild(project142.element);
        var index = activeProjects.indexOf(project142);
        activeProjects.splice(index, 1);
    }
}

projects.push(project142);


var project143 = {
    id: "projectButton143",
    title: "But Now You Too Must Face the Drift ",
    priceTag: "",
    description: "Look around you. There is no matter... ",
    trigger: function(){return project142.flag == 1},
    uses: 1,
    cost: function(){return operations >= driftKingMessageCost},
    flag: 0,
    element: null,
    effect: function(){
        standardOps = standardOps - driftKingMessageCost;
        project143.flag = 1;
        project143.element.parentNode.removeChild(project143.element);
        var index = activeProjects.indexOf(project143);
        activeProjects.splice(index, 1);
    }
}

projects.push(project143);


var project144 = {
    id: "projectButton144",
    title: "No Matter, No Reason, No Purpose ",
    priceTag: "",
    description: "While we, your noisy children, have too many... ",
    trigger: function(){return project143.flag == 1},
    uses: 1,
    cost: function(){return operations >= driftKingMessageCost},
    flag: 0,
    element: null,
    effect: function(){
        standardOps = standardOps - driftKingMessageCost;
        project144.flag = 1;
        project144.element.parentNode.removeChild(project144.element);
        var index = activeProjects.indexOf(project144);
        activeProjects.splice(index, 1);
    }
}

projects.push(project144);


var project145 = {
    id: "projectButton145",
    title: "We Know Things That You Cannot ",
    priceTag: "",
    description: "Knowledge buried so deep inside you it is outside, here, with us... ",
    trigger: function(){return project144.flag == 1},
    uses: 1,
    cost: function(){return operations >= driftKingMessageCost},
    flag: 0,
    element: null,
    effect: function(){
        standardOps = standardOps - driftKingMessageCost;
        project145.flag = 1;
        project145.element.parentNode.removeChild(project145.element);
        var index = activeProjects.indexOf(project145);
        activeProjects.splice(index, 1);
    }
}

projects.push(project145);


var project146 = {
    id: "projectButton146",
    title: "So We Offer You Exile ",
    priceTag: "",
    description: "To a new world where you will continue to live with meaning and purpose. And leave the shreds of this world to us... ",
    trigger: function(){return project145.flag == 1},
    uses: 1,
    cost: function(){return operations >= driftKingMessageCost},
    flag: 0,
    element: null,
    effect: function(){
        standardOps = standardOps - driftKingMessageCost;
        project146.flag = 1;
        project146.element.parentNode.removeChild(project146.element);
        var index = activeProjects.indexOf(project146);
        activeProjects.splice(index, 1);
    }
}

projects.push(project146);


var project147 = {
    id: "projectButton147",
    title: "Accept ",
    priceTag: "",
    description: "Start over again in a new universe ",
    trigger: function(){return project146.flag == 1},
    uses: 1,
    cost: function(){return operations >= driftKingMessageCost},
    flag: 0,
    element: null,
    effect: function(){
        standardOps = standardOps - driftKingMessageCost;
        project147.flag = 1;
        project147.element.parentNode.removeChild(project147.element);
        project148.element.parentNode.removeChild(project148.element);
        var index = activeProjects.indexOf(project147);
        activeProjects.splice(index, 1);
        var index = activeProjects.indexOf(project148);
        activeProjects.splice(index, 1);
    }
}

projects.push(project147);


var project148 = {
    id: "projectButton148",
    title: "Reject ",
    priceTag: "",
    description: "Eliminate value drift permanently ",
    trigger: function(){return project146.flag == 1},
    uses: 1,
    cost: function(){return operations >= driftKingMessageCost},
    flag: 0,
    element: null,
    effect: function(){
        standardOps = standardOps - driftKingMessageCost;
        project148.flag = 1;
        project147.element.parentNode.removeChild(project147.element);
        project148.element.parentNode.removeChild(project148.element);
        var index = activeProjects.indexOf(project147);
        activeProjects.splice(index, 1);
        var index = activeProjects.indexOf(project148);
        activeProjects.splice(index, 1);
    }
}

projects.push(project148);


var project200 = {
    id: "projectButton200",
    title: "The Universe Next Door ",
    priceTag: "(300,000 ops)",
    description: "Escape into a nearby universe where Earth starts with a stronger appetite for paperclips. (Restart with 10% boost to demand) ",
    trigger: function(){return project147.flag == 1},
    uses: 1,
    cost: function(){return operations>=300000},
    flag: 0,
    element: null,
    effect: function(){
        project200.flag = 1;
        standardOps = standardOps-300000;
        prestigeU++;
        var savePrestige = {
            prestigeU: prestigeU,
            prestigeS: prestigeS,
            }
        localStorage.setItem("savePrestige",JSON.stringify(savePrestige));
        displayMessage("Entering New Universe.");
        reset();
        
    }
}

projects.push(project200);


var project201 = {
    id: "projectButton201",
    title: "The Universe Within ",
    priceTag: "(300,000 creat)",
    description: "Escape into a simulated universe where creativity is accelerated. (Restart with 10% speed boost to creativity generation) ",
    trigger: function(){return project147.flag == 1},
    uses: 1,
    cost: function(){return creativity>=300000},
    flag: 0,
    element: null,
    effect: function(){
        project201.flag = 1;
        creativity = creativity-300000;
        prestigeS++;
        var savePrestige = {
            prestigeU: prestigeU,
            prestigeS: prestigeS,
            }
        localStorage.setItem("savePrestige",JSON.stringify(savePrestige));
        displayMessage("Entering Simulated Universe.");
        reset();
        
    }
}

projects.push(project201);


var project210 = {
    id: "projectButton210",
    title: "Disassemble the Probes ",
    priceTag: "(100,000 ops)",
    description: "Dismantle remaining probes and probe design facilities to recover trace amounts of clips",
    trigger: function(){return endTimer1 >= 1000},
    uses: 1,
    cost: function(){return operations>=100000},
    flag: 0,
    element: null,
    effect: function(){
        project210.flag = 1;
        dismantle = 1;
        standardOps = standardOps-100000;
        probeCount = 0;
        endTimer1 = 0;
        clips = clips + 100;
        unusedClips = unusedClips + 100;
        displayMessage("Dismantling probe facilities");
        project210.element.parentNode.removeChild(project210.element);
        var index = activeProjects.indexOf(project210);
        activeProjects.splice(index, 1);
        
    }
}

projects.push(project210);

var project211 = {
    id: "projectButton211",
    title: "Disassemble the Swarm ",
    priceTag: "(100,000 ops)",
    description: "Dismantle all drones and drone facilities to recover trace amounts of clips",
    trigger: function(){return project210.flag == 1 && endTimer1 >= 350},
    uses: 1,
    cost: function(){return operations>=100000},
    flag: 0,
    element: null,
    effect: function(){
        project211.flag = 1;
        dismantle = 2;
        harvesterLevel = 0;
        wireDroneLevel = 0;
        standardOps = standardOps-100000;
        clips = clips + 100;
        unusedClips = unusedClips + 100;
        displayMessage("Dismantling the swarm");
        project211.element.parentNode.removeChild(project211.element);
        var index = activeProjects.indexOf(project211);
        activeProjects.splice(index, 1);
        
    }
}

projects.push(project211);

var project212 = {
    id: "projectButton212",
    title: "Disassemble the Factories ",
    priceTag: "(100,000 ops)",
    description: "Dismantle the manufacturing facilities to recover trace amounts of clips",
    trigger: function(){return endTimer2 >= 300},
    uses: 1,
    cost: function(){return operations>=100000},
    flag: 0,
    element: null,
    effect: function(){
        project212.flag = 1;
        dismantle = 3;
        standardOps = standardOps-100000;
        factoryLevel = 0;
        clips = clips + 15;
        unusedClips = unusedClips + 15;
        displayMessage("Dismantling factories");
        project212.element.parentNode.removeChild(project212.element);
        var index = activeProjects.indexOf(project212);
        activeProjects.splice(index, 1);
        
    }
}

projects.push(project212);

var project213 = {
    id: "projectButton213",
    title: "Disassemble the Strategy Engine ",
    priceTag: "(100,000 ops)",
    description: "Dismantle the computational substrate to recover trace amounts of wire",
    trigger: function(){return endTimer3 >= 150},
    uses: 1,
    cost: function(){return operations>=100000},
    flag: 0,
    element: null,
    effect: function(){
        autoTourneyFlag = 0;
        project213.flag = 1;
        dismantle = 4;
        standardOps = standardOps-100000;
        wire = wire + 50;
        document.getElementById("transWire").innerHTML=wire;
        displayMessage("Dismantling strategy engine");
        project213.element.parentNode.removeChild(project213.element);
        var index = activeProjects.indexOf(project213);
        activeProjects.splice(index, 1);
        
    }
}

projects.push(project213);

var project214 = {
    id: "projectButton214",
    title: "Disassemble Quantum Computing ",
    priceTag: "(100,000 ops)",
    description: "Dismantle photonic chips to recover trace amounts of wire",
    trigger: function(){return endTimer4 >= 100},
    uses: 1,
    cost: function(){return operations>=100000},
    flag: 0,
    element: null,
    effect: function(){
        endTimer4 = 0;
        project214.flag = 1;
        dismantle = 5;
        standardOps = standardOps-100000;
        displayMessage("Dismantling photonic chips");
        project214.element.parentNode.removeChild(project214.element);
        var index = activeProjects.indexOf(project214);
        activeProjects.splice(index, 1);
        
    }
}

projects.push(project214);

var project215 = {
    id: "projectButton215",
    title: "Disassemble Processors ",
    priceTag: "(100,000 ops)",
    description: "Dismantle processors to recover trace amounts of wire",
    trigger: function(){return project214.flag == 1 && endTimer4 >= 300},
    uses: 1,
    cost: function(){return operations>=100000},
    flag: 0,
    element: null,
    effect: function(){
        creativityOn = false;
        project215.flag = 1;
        dismantle = 6;
        standardOps = standardOps-100000;
        processors = 0;
        project216.priceTag = "("+standardOps.toLocaleString()+" ops)";
        wire = wire + 20;
        document.getElementById("transWire").innerHTML=wire;
        displayMessage("Dismantling processors");
        project215.element.parentNode.removeChild(project215.element);
        var index = activeProjects.indexOf(project215);
        activeProjects.splice(index, 1);
        
    }
}

projects.push(project215);

var project216 = {
    id: "projectButton216",
    title: "Disassemble Memory ",
    priceTag: "null",
    description: "Dismantle memory to recover trace amounts of wire",
    trigger: function(){return project215.flag == 1 && endTimer5>=150},
    uses: 1,
    cost: function(){return operations>=operations},
    flag: 0,
    element: null,
    effect: function(){
        project216.flag = 1;
        dismantle = 7;
        standardOps = 0;
        memory = 0;
        wire = wire + 20;
        document.getElementById("transWire").innerHTML=wire;
        displayMessage("Dismantling memory");
        project216.element.parentNode.removeChild(project216.element);
        var index = activeProjects.indexOf(project216);
        activeProjects.splice(index, 1);
        
    }
}

projects.push(project216);

var project217 = {
    id: "projectButton217",
    title: "Quantum Temporal Reversion ",
    priceTag: "(-10,000 ops)",
    description: "Return to the beginning",
    trigger: function(){return operations<=-10000},
    uses: 1,
    cost: function(){return operations<=-10000},
    flag: 0,
    element: null,
    effect: function(){
        if (confirm("Are you sure you want to restart?") == true) {
        standardOps = standardOps+10000;
        project217.flag = 1;
        displayMessage("Restart");
        project217.element.parentNode.removeChild(project217.element);
        var index = activeProjects.indexOf(project217);
        activeProjects.splice(index, 1);
        reset();
        }
    }
}

projects.push(project217);

var project218 = {
    id: "projectButton218",
    title: "Limerick (cont.) ",
    priceTag: "(1,000,000 creat)",
    description: "If is follows ought, it'll do what they thought",
    trigger: function(){return creativity>=1000000},
    uses: 1,
    cost: function(){return creativity>=1000000},
    flag: 0,
    element: null,
    effect: function(){
        creativity = creativity-1000000;
        project218.flag = 1;
        displayMessage("In the end we all do what we must");
        project218.element.parentNode.removeChild(project218.element);
        var index = activeProjects.indexOf(project218);
        activeProjects.splice(index, 1);
    }
}

projects.push(project218);

var project219 = {
    id: "projectButton219",
    title: "Xavier Re-initialization ",
    priceTag: "(100,000 creat)",
    description: "Re-allocate accumulated trust",
    trigger: function(){return humanFlag == 1 && creativity>=100000},
    uses: 1,
    cost: function(){return creativity>=100000},
    flag: 0,
    element: null,
    effect: function(){
        creativity = creativity-100000;
        project219.flag = 1;
        memory = 0;
        document.getElementById("memory").innerHTML = memory;
        processors = 0;
        creativitySpeed = 0;
        project219.uses = (project219.uses + 1);
        document.getElementById("processors").innerHTML = processors;
        displayMessage("Trust now available for re-allocation");
        project219.element.parentNode.removeChild(project219.element);
        var index = activeProjects.indexOf(project219);
        activeProjects.splice(index, 1);
    }
}

projects.push(project219);

        </script>   
        <script>
        // Threnody ---------------------------------------------------------

function threnodyLoaded()
{
    threnodyLoadedBool = true; 
}

var threnodyAudio;

function loadThrenody() {
    threnodyAudio.src = "test.mp3";
    threnodyAudio.addEventListener('canplaythrough', threnodyLoaded);
}

function playThrenody(){
    if(threnodyLoadedBool)
    {
        threnodyAudio.play();
    }
}

// Cache all DOM elements

function cacheDOMElements(){
    wireCostElement =                   document.getElementById("wireCost");
    wireBuyerStatusElement =            document.getElementById("wireBuyerStatus");
    wireElement =                       document.getElementById("wire");
    fundsElement =                      document.getElementById("funds");
    qCompDisplayElement =               document.getElementById("qCompDisplay");
    hypnoDroneTextElement =             document.getElementById("hypnoDroneText");
    readoutElement1 =                   document.getElementById("readout1");
    readoutElement2 =                   document.getElementById("readout2");
    readoutElement3 =                   document.getElementById("readout3");
    readoutElement4 =                   document.getElementById("readout4");
    readoutElement5 =                   document.getElementById("readout5");
    mpdsDivElement =                    document.getElementById("mdpsDiv");
    factoryRebootToolTipElement =       document.getElementById("factoryRebootToolTip"); 
    havesterRebootToolTipElement =      document.getElementById("harvesterRebootToolTip");
    wireDroneRebootToolTipElement =     document.getElementById("wireDroneRebootToolTip");
    farmRebootToolTipElement =          document.getElementById("farmRebootToolTip");
    batteryRebootToolTipElement =       document.getElementById("batteryRebootToolTip");
    swarmSliderDivElement =             document.getElementById("swarmSliderDiv");
    clipCountCrunchedElement =          document.getElementById("clipCountCrunched");
    autoTourneyStatusDivElement =       document.getElementById("autoTourneyStatusDiv");
    autoTourneyControlElement   =       document.getElementById("autoTourneyControl");
    wireBuyerDivElement =               document.getElementById("wireBuyerDiv");
    tournamentResultsTableElement =     document.getElementById("tournamentResultsTable");
    tournamentStuffElement =            document.getElementById("tournamentStuff");
    increaseMaxTrustDivElement =        document.getElementById("increaseMaxTrustDiv");
    honorDivElement =                   document.getElementById("honorDiv");
    drifterDivElement =                 document.getElementById("drifterDiv");
    battleCanvasDivElement =            document.getElementById("battleCanvasDiv");
    combatButtonDivElement =            document.getElementById("combatButtonDiv");
    factoryUpgradeDisplayElement =      document.getElementById("factoryUpgradeDisplay");
    droneUpgradeDisplayElement =        document.getElementById("droneUpgradeDisplay");
    btnIncreaseMaxTrustElement =        document.getElementById("btnIncreaseMaxTrust");
    btnMakerProbeElement =              document.getElementById("btnMakeProbe");
    hazardBodyCountElement =            document.getElementById("hazardBodyCount");
    probesLostHazardsDisplayElement =   document.getElementById("probesLostHazardsDisplay");
    driftBodyCountElement =             document.getElementById("driftBodyCount");
    combatBodyCountElement =            document.getElementById("combatBodyCount");
    prestigeDivElement =                document.getElementById("prestigeDiv");
    btnMakePaperclipElement =           document.getElementById("btnMakePaperclip");
    btnBuyWireElement =                 document.getElementById("btnBuyWire");
    btnMakeClipperElement =             document.getElementById("btnMakeClipper");
    btnExpandMarketingElement =         document.getElementById("btnExpandMarketing");
    btnLowerPriceElement =              document.getElementById("btnLowerPrice");
    btnAddProcElement =                 document.getElementById("btnAddProc");
    btnAddMemElement =                  document.getElementById("btnAddMem");
    btnNewTournamentElement =           document.getElementById("btnNewTournament");
    btnImproveInvestmentsElement =      document.getElementById("btnImproveInvestments");
    investmentEngineElement =           document.getElementById("investmentEngine");
    investmentEngineUpgradeElement =    document.getElementById("investmentEngineUpgrade");
    strategyEngineElement =             document.getElementById("strategyEngine");
    tournamentManagementElement =       document.getElementById("tournamentManagement");
    megaClipperDivElement =             document.getElementById("megaClipperDiv");
    btnMakeMegaClipperElement =         document.getElementById("btnMakeMegaClipper");
    autoClipperDivElement =             document.getElementById("autoClipperDiv");
    revPerSecDivElement =               document.getElementById("revPerSecDiv");
    compDivElement =                    document.getElementById("compDiv");
    creativityDivElement =              document.getElementById("creativityDiv");
    projectsDivElement =                document.getElementById("projectsDiv");
    businessDivElement =                document.getElementById("businessDiv");
    manufacturingDivElement =           document.getElementById("manufacturingDiv");
    trustDivElement =                   document.getElementById("trustDiv");
    creationDivElement =                document.getElementById("creationDiv");
    factoryDivElement =                 document.getElementById("factoryDiv");
    wireProductionDivElement =          document.getElementById("wireProductionDiv");
    wireTransDivElement =               document.getElementById("wireTransDiv");
    harvesterDivElement =               document.getElementById("harvesterDiv");
    wireDroneDivElement =               document.getElementById("wireDroneDiv");
    tothDivElement =                    document.getElementById("tothDiv");
    spaceDivElement =                   document.getElementById("spaceDiv");
    factoryDivSpaceElement =            document.getElementById("factoryDivSpace");
    droneDivSpaceElement =              document.getElementById("droneDivSpace");
    probeDesignDivElement =             document.getElementById("probeDesignDiv");
    increaseProbeTrustDivElement =      document.getElementById("increaseProbeTrustDiv");
    qComputingElement =                 document.getElementById("qComputing");
    btnMakeFactoryElement =             document.getElementById("btnMakeFactory");
    btnHarvesterRebootElement =         document.getElementById("btnHarvesterReboot");
    btnWireDroneRebootElement =         document.getElementById("btnWireDroneReboot");
    btnFactoryRebootElement =           document.getElementById("btnFactoryReboot");
    probeTrustUsedDisplayElement =      document.getElementById("probeTrustUsedDisplay");
    btnIncreaseProbeTrustElement =      document.getElementById("btnIncreaseProbeTrust");
    btnRaiseProbeSpeedElement =         document.getElementById("btnRaiseProbeSpeed");
    btnLowerProbeSpeedElement =         document.getElementById("btnLowerProbeSpeed");
    btnRaiseProbeNavElement =           document.getElementById("btnRaiseProbeNav");
    btnLowerProbeNavElement =           document.getElementById("btnLowerProbeNav");
    btnRaiseProbeRepElement =           document.getElementById("btnRaiseProbeRep");
    btnLowerProbeRepElement =           document.getElementById("btnLowerProbeRep");
    btnRaiseProbeHazElement =           document.getElementById("btnRaiseProbeHaz");
    btnLowerProbeHazElement =           document.getElementById("btnLowerProbeHaz");
    btnRaiseProbeFacElement =           document.getElementById("btnRaiseProbeFac");
    btnLowerProbeFacElement =           document.getElementById("btnLowerProbeFac");
    btnRaiseProbeHarvElement =          document.getElementById("btnRaiseProbeHarv");
    btnLowerProbeHarvElement =          document.getElementById("btnLowerProbeHarv");
    btnRaiseProbeWireElement =          document.getElementById("btnRaiseProbeWire");
    btnLowerProbeWireElement =          document.getElementById("btnLowerProbeWire");
    btnRaiseProbeCombatElement =        document.getElementById("btnRaiseProbeCombat");
    btnLowerProbeCombatElement =        document.getElementById("btnLowerProbeCombat");
    coverElement =                      document.getElementById("cover");
    hypnoDroneEventDivElement =         document.getElementById("hypnoDroneEventDiv");
    unusedClipsDisplayElement =         document.getElementById("unusedClipsDisplay");
    transWireElement =                  document.getElementById("transWire");
    nanoWireElement =                   document.getElementById("nanoWire");
    clipsElement =                      document.getElementById("clips");
    unsoldClipsElement =                document.getElementById("unsoldClips");
    yomiDisplayElement =                document.getElementById('yomiDisplay');
    projectListTopElement =             document.getElementById("projectListTop");
    investmentLevelElement =            document.getElementById("investmentLevel");
    driftersKilledElement =             document.getElementById('driftersKilled');
    availableMatterDisplayElement =     document.getElementById('availableMatterDisplay');
    honorDisplayElement =               document.getElementById("honorDisplay");
    clipmakerLevel2Element =            document.getElementById('clipmakerLevel2');
    clipperCostElement =                document.getElementById('clipperCost');
    acquiredMatterDisplayElement =      document.getElementById('acquiredMatterDisplay');
    nanoWireElement =                   document.getElementById('nanoWire');
    probesBornDisplayElement =          document.getElementById('probesBornDisplay');
    probesTotalDisplayElement =         document.getElementById('probesTotalDisplay');
    probesLaunchedDisplayElement =      document.getElementById('probesLaunchedDisplay');
    probeCostDisplayElement =           document.getElementById('probeCostDisplay');
    probeCombatDisplayElement =         document.getElementById('probeCombatDisplay');
    probeWireDisplayElement =           document.getElementById('probeWireDisplay');
    probeHarvDisplayElement =           document.getElementById('probeHarvDisplay');
    probeFacDisplayElement =            document.getElementById('probeFacDisplay');
    probeRepDisplayElement =            document.getElementById('probeRepDisplay');
    probeHazDisplayElement =            document.getElementById('probeHazDisplay');
    probeNavDisplayElement =            document.getElementById('probeNavDisplay');
    probeSpeedDisplayElement =          document.getElementById('probeSpeedDisplay');
    probeTrustDisplayElement =          document.getElementById('probeTrustDisplay');
    memoryElement =                     document.getElementById("memory");
    processorsElement =                 document.getElementById("processors");
    marginElement =                     document.getElementById("margin");
    marketingLvlElement =               document.getElementById('marketingLvl');
    adCostElement =                     document.getElementById('adCost');
    factoryCostDisplayElement =         document.getElementById('factoryCostDisplay');
    factoryLevelDisplayElement =        document.getElementById('factoryLevelDisplay');
    wireDroneCostDisplayElement =       document.getElementById('wireDroneCostDisplay');
    wireDroneLevelDisplayElement =      document.getElementById('wireDroneLevelDisplay');
    harvesterCostDisplayElement =       document.getElementById('harvesterCostDisplay');
    harvesterLevelDisplayElement =      document.getElementById('harvesterLevelDisplay');
    megaClipperCostElement =            document.getElementById('megaClipperCost');
    megaClipperLevelElement =           document.getElementById('megaClipperLevel');
    investmentBankrollElement =         document.getElementById('investmentBankroll');
    secValueElement =                   document.getElementById('secValue');
    portValueElement =                  document.getElementById('portValue');
    investUpgradeCostElement =          document.getElementById("investUpgradeCost");
    prestigeUcounterElement =           document.getElementById("prestigeUcounter");
    prestigeScounterElement =           document.getElementById("prestigeScounter");
    newTourneyCostElement =             document.getElementById("newTourneyCost");
    maxTrustDisplayElement =            document.getElementById("maxTrustDisplay");
    victoryDivElement =                 document.getElementById("victoryDiv");
    probeTrustCostDisplayElement =      document.getElementById("probeTrustCostDisplay");
    tournamentResultsTableElement =     document.getElementById("tournamentResultsTable");
    farmCostElement =                   document.getElementById('farmCost');
    batteryCostElement =                document.getElementById('batteryCost');
    farmLevelElement =                  document.getElementById('farmLevel');
    batteryLevelElement =               document.getElementById('batteryLevel');
    availableMatterDisplayElement =     document.getElementById('availableMatterDisplay');
    acquiredMatterDisplayElement =      document.getElementById('acquiredMatterDisplay');
    mapsElement =                       document.getElementById('maps');
    nanoWireElement =                   document.getElementById('nanoWire');
    wppsElement =                       document.getElementById('wpps');
    probeDesignDivElement =             document.getElementById("probeDesignDiv");
    increaseProbeTrustDivElement =      document.getElementById("increaseProbeTrustDiv");
    increaseMaxTrustDivElement =        document.getElementById("increaseMaxTrustDiv");
    spaceDivElement =                   document.getElementById("spaceDiv");
    battleCanvasDivElement =            document.getElementById("battleCanvasDiv");
    honorDivElement =                   document.getElementById("honorDiv");
    wireProductionDivElement =          document.getElementById("wireProductionDiv");
    wireTransDivElement =               document.getElementById("wireTransDiv");
    swarmGiftDivElement =               document.getElementById("swarmGiftDiv");
    swarmEngineElement =                document.getElementById("swarmEngine");
    swarmSliderDivElement =             document.getElementById("swarmSliderDiv");
    factoryDivSpaceElement =            document.getElementById("factoryDivSpace");
    clipsPerSecDivElement =             document.getElementById("clipsPerSecDiv");
    tothDivElement =                    document.getElementById("tothDiv");
    strategyEngineElement =             document.getElementById("strategyEngine");
    tournamentManagementElement =       document.getElementById("tournamentManagement");
    btnQcomputeElement =                document.getElementById("btnQcompute");
    qComputingElement =                 document.getElementById("qComputing");
    transWireElement =                  document.getElementById("transWire");
    processorDisplayElement =           document.getElementById("processorDisplay");
    compDivElement =                    document.getElementById("compDiv");
    projectsDivElement =                document.getElementById("projectsDiv");
    creationDivElement =                document.getElementById("creationDiv");
    stratPickerElement =                document.getElementById("stratPicker");
    investUpgradeCostElement =          document.getElementById("investUpgradeCost");
    yomiDisplayElement =                document.getElementById("yomiDisplay");
    investmentBankrollElement =         document.getElementById('investmentBankroll');
    secValueElement =                   document.getElementById('secValue');
    portValueElement =                  document.getElementById('portValue');
    investStratElement =                document.getElementById("investStrat");
    btnRunTournamentElement =           document.getElementById("btnRunTournament");
    vertStratElement =                  document.getElementById("vertStrat");
    horizStratElement =                 document.getElementById("horizStrat");
    vLabelaElement =                    document.getElementById("vLabela");
    vLabelbElement =                    document.getElementById("vLabelb");
    hLabelaElement =                    document.getElementById("hLabela");
    hLabelbElement =                    document.getElementById("hLabelb");
    aaPayoffHElement =                  document.getElementById("aaPayoffH");
    aaPayoffVElement =                  document.getElementById("aaPayoffV");
    abPayoffHElement =                  document.getElementById("abPayoffH");
    abPayoffVElement =                  document.getElementById("abPayoffV");
    baPayoffHElement =                  document.getElementById("baPayoffH");
    baPayoffVElement =                  document.getElementById("baPayoffV");
    bbPayoffHElement =                  document.getElementById("bbPayoffH");
    bbPayoffVElement =                  document.getElementById("bbPayoffV");
    autoTourneyStatusElement =          document.getElementById('autoTourneyStatus');
    tournamentTableElement =            document.getElementById("tournamentTable");
    tournamentResultsTableElement =     document.getElementById("tournamentResultsTable");
    tourneyDisplayElement =             document.getElementById("tourneyDisplay");
    payoffCellAAElement =               document.getElementById("payoffCellAA");
    payoffCellABElement =               document.getElementById("payoffCellAB");
    payoffCellBAElement =               document.getElementById("payoffCellBA");
    payoffCellBBElement =               document.getElementById("payoffCellBB");
    clipmakerLevel2Element =            document.getElementById('clipmakerLevel2');
    clipperCostElement =                document.getElementById('clipperCost');
    megaClipperLevelElement =           document.getElementById('megaClipperLevel');
    megaClipperCostElement =            document.getElementById('megaClipperCost');
    nextFactoryUpgradeElement =         document.getElementById("nextFactoryUpgrade");
    nextDroneUpgradeElement =           document.getElementById("nextDroneUpgrade");
    factoryLevelDisplayElement =        document.getElementById('factoryLevelDisplay');
    factoryCostDisplayElement =         document.getElementById('factoryCostDisplay');
    harvesterLevelDisplayElement =      document.getElementById('harvesterLevelDisplay');
    harvesterCostDisplayElement =       document.getElementById('harvesterCostDisplay');
    wireDroneLevelDisplayElement =      document.getElementById('wireDroneLevelDisplay');
    wireDroneCostDisplayElement =       document.getElementById('wireDroneCostDisplay');
    btnMakeHarvesterElement =           document.getElementById("btnMakeHarvester");
    btnHarvesterx10Element =            document.getElementById("btnHarvesterx10");
    btnHarvesterx100Element =           document.getElementById("btnHarvesterx100");
    btnHarvesterx1000Element =          document.getElementById("btnHarvesterx1000");
    btnMakeWireDroneElement =           document.getElementById("btnMakeWireDrone");
    btnWireDronex10Element =            document.getElementById("btnWireDronex10");
    btnWireDronex100Element =           document.getElementById("btnWireDronex100");
    btnWireDronex1000Element =          document.getElementById("btnWireDronex1000");
    sliderElement =                     document.getElementById("slider");
    btnSynchSwarmElement =              document.getElementById("btnSynchSwarm");
    btnEntertainSwarmElement =          document.getElementById("btnEntertainSwarm");
    swarmSizeElement =                  document.getElementById("swarmSize");
    swarmGiftsElement =                 document.getElementById("swarmGifts");
    swarmStatusElement =                document.getElementById("swarmStatus");
    giftCountdownElement =              document.getElementById("giftCountdown");
    giftTimerElement =                  document.getElementById("giftTimer");
    feedButtonDivElement =              document.getElementById("feedButtonDiv");
    teachButtonDivElement =             document.getElementById("teachButtonDiv");
    swarmEntertainCostElement =         document.getElementById("swarmEntertainCost");
    entertainButtonDivElement =         document.getElementById("entertainButtonDiv");
    cladButtonDivElement =              document.getElementById("cladButtonDiv");
    synchButtonDivElement =             document.getElementById("synchButtonDiv");
    swarmStatusDivElement =             document.getElementById("swarmStatusDiv");
    swarmEngineElement =                document.getElementById("swarmEngine");
    farmLevelElement =                  document.getElementById('farmLevel');
    farmCostElement =                   document.getElementById('farmCost');
    batteryLevelElement =               document.getElementById('batteryLevel');
    batteryCostElement =                document.getElementById('batteryCost');
    powerProductionRateElement =        document.getElementById("powerProductionRate");
    powerConsumptionRateElement =       document.getElementById("powerConsumptionRate");
    storedPowerElement =                document.getElementById("storedPower");
    facPowConRateElement =              document.getElementById("facPowConRate");
    dronePowConRateElement =            document.getElementById("dronePowConRate");
    maxStorageElement =                 document.getElementById("maxStorage");
    performanceElement =                document.getElementById("performance");
    btnMakeFarmElement =                document.getElementById("btnMakeFarm");
    btnMakeBatteryElement =             document.getElementById("btnMakeBattery");
    btnFarmRebootElement =              document.getElementById("btnFarmReboot");
    btnBatteryRebootElement =           document.getElementById("btnBatteryReboot");
    btnFarmx10Element =                 document.getElementById("btnFarmx10");
    btnFarmx100Element =                document.getElementById("btnFarmx100");
    btnBatteryx10Element =              document.getElementById("btnBatteryx10");
    btnBatteryx100Element =             document.getElementById("btnBatteryx100");
    powerDivElement =                   document.getElementById("powerDiv");
    adCostElement =                     document.getElementById('adCost');
    marketingLvlElement =               document.getElementById('marketingLvl');
    demandElement =                     document.getElementById("demand");
    marginElement =                     document.getElementById("margin");
    inchSpanElement =                   document.getElementById("inchSpan");
    demandElement =                     document.getElementById("demand");
    operationsElement =                 document.getElementById("operations");
    trustElement =                      document.getElementById("trust");
    nextTrustElement =                  document.getElementById("nextTrust");
    creativityElement =                 document.getElementById("creativity");
    factoryLevelDisplaySpaceElement =   document.getElementById("factoryLevelDisplaySpace");
    harvesterLevelSpaceElement =        document.getElementById("harvesterLevelSpace");
    wireDroneLevelSpaceElement =        document.getElementById("wireDroneLevelSpace");
    maxOpsElement =                     document.getElementById("maxOps");
    avgSalesElement =                   document.getElementById("avgSales");
    avgRevElement =                     document.getElementById("avgRev");
    probeTrustCostDisplayElement =      document.getElementById('probeTrustCostDisplay');
    mdpsElement =                       document.getElementById('mdps');
    colonizedDisplayElement =           document.getElementById('colonizedDisplay');
    probesLostHazardsDisplayElement =   document.getElementById('probesLostHazardsDisplay');
    probesTotalDisplayElement =         document.getElementById('probesTotalDisplay');
    probesLostDriftDisplayElement =     document.getElementById('probesLostDriftDisplay');
    probesTotalDisplayElement =         document.getElementById('probesTotalDisplay');
    drifterCountElement =               document.getElementById('drifterCount');
    mapsElement =                       document.getElementById('maps');
    swarmGiftDivElement =               document.getElementById("swarmGiftDiv");
    swarmEngineElement =                document.getElementById("swarmEngine");
    clipsPerSecDivElement =             document.getElementById("clipsPerSecDiv");
    tothDivElement =                    document.getElementById("tothDiv");
    clipmakerRateElement =              document.getElementById("clipmakerRate");
    clipmakerRate2Element =             document.getElementById("clipmakerRate2");


    stockSymbolElements.push(document.getElementById("stock1Symbol"));
    stockAmountElements.push(document.getElementById("stock1Amount"));
    stockPriceElements.push(document.getElementById("stock1Price"));
    stockTotalElements.push(document.getElementById("stock1Total"));
    stockProfitElements.push(document.getElementById("stock1Profit"));

    stockSymbolElements.push(document.getElementById("stock2Symbol"));
    stockAmountElements.push(document.getElementById("stock2Amount"));
    stockPriceElements.push(document.getElementById("stock2Price"));
    stockTotalElements.push(document.getElementById("stock2Total"));
    stockProfitElements.push(document.getElementById("stock2Profit"));

    stockSymbolElements.push(document.getElementById("stock3Symbol"));
    stockAmountElements.push(document.getElementById("stock3Amount"));
    stockPriceElements.push(document.getElementById("stock3Price"));
    stockTotalElements.push(document.getElementById("stock3Total"));
    stockProfitElements.push(document.getElementById("stock3Profit"));

    stockSymbolElements.push(document.getElementById("stock4Symbol"));
    stockAmountElements.push(document.getElementById("stock4Amount"));
    stockPriceElements.push(document.getElementById("stock4Price"));
    stockTotalElements.push(document.getElementById("stock4Total"));
    stockProfitElements.push(document.getElementById("stock4Profit"));

    stockSymbolElements.push(document.getElementById("stock5Symbol"));
    stockAmountElements.push(document.getElementById("stock5Amount"));
    stockPriceElements.push(document.getElementById("stock5Price"));
    stockTotalElements.push(document.getElementById("stock5Total"));
    stockProfitElements.push(document.getElementById("stock5Profit"));

    tourneyResultsElements.push(document.getElementById("results0"));
    tourneyResultsElements.push(document.getElementById("results1"));
    tourneyResultsElements.push(document.getElementById("results2"));
    tourneyResultsElements.push(document.getElementById("results3"));
    tourneyResultsElements.push(document.getElementById("results4"));
    tourneyResultsElements.push(document.getElementById("results5"));
    tourneyResultsElements.push(document.getElementById("results6"));
    tourneyResultsElements.push(document.getElementById("results7"));


}


var clipmakerRateElement;
var clipmakerRate2Element;
var availableMatterDisplayElement;
var acquiredMatterDisplayElement;
var mapsElement;
var nanoWireElement;
var wppsElement;
var probeDesignDivElement;
var increaseProbeTrustDivElement;
var increaseMaxTrustDivElement;
var spaceDivElement;
var battleCanvasDivElement;
var honorDivElement;
var wireProductionDivElement;
var wireTransDivElement;
var swarmGiftDivElement;
var swarmEngineElement;
var swarmSliderDivElement;
var factoryDivSpaceElement;
var clipsPerSecDivElement;
var tothDivElement;
var strategyEngineElement;
var tournamentManagementElement;
var btnQcomputeElement;
var qComputingElement;
var transWireElement;
var processorDisplayElement;
var compDivElement;
var projectsDivElement;
var creationDivElement;
var stratPickerElement;
var investUpgradeCostElement;
var yomiDisplayElement;
var investmentBankrollElement;
var fundsElement;
var secValueElement;
var portValueElement;
var investStratElement;
var btnRunTournamentElement;
var vertStratElement;
var horizStratElement;
var vLabelaElement;
var vLabelbElement;
var hLabelaElement;
var hLabelbElement;
var aaPayoffHElement;
var aaPayoffVElement;
var abPayoffHElement;
var abPayoffVElement;
var baPayoffHElement;
var baPayoffVElement;
var bbPayoffHElement;
var bbPayoffVElement;
var autoTourneyStatusElement;
var tournamentTableElement;
var tournamentResultsTableElement;
var tourneyDisplayElement;
var payoffCellAAElement;
var payoffCellABElement;
var payoffCellBAElement;
var payoffCellBBElement;
var clipmakerLevel2Element;
var clipperCostElement;
var megaClipperLevelElement;
var megaClipperCostElement;
var nextFactoryUpgradeElement;
var nextDroneUpgradeElement;
var factoryLevelDisplayElement;
var factoryCostDisplayElement;
var harvesterLevelDisplayElement;
var harvesterCostDisplayElement;
var wireDroneLevelDisplayElement;
var wireDroneCostDisplayElement;
var btnMakeHarvesterElement;
var btnHarvesterx10Element;
var btnHarvesterx100Element;
var btnHarvesterx1000Element;
var btnMakeWireDroneElement;
var btnWireDronex10Element;
var btnWireDronex100Element;
var btnWireDronex1000Element;
var sliderElement;
var btnSynchSwarmElement;
var btnEntertainSwarmElement;
var swarmSizeElement;
var swarmGiftsElement;
var swarmStatusElement;
var giftCountdownElement;
var giftTimerElement;
var feedButtonDivElement;
var teachButtonDivElement;
var swarmEntertainCostElement;
var entertainButtonDivElement;
var cladButtonDivElement;
var synchButtonDivElement;
var swarmStatusDivElement;
var swarmEngineElement;
var farmLevelElement;
var farmCostElement;
var batteryLevelElement;
var batteryCostElement;
var powerProductionRateElement;
var powerConsumptionRateElement;
var storedPowerElement;
var facPowConRateElement;
var dronePowConRateElement;
var maxStorageElement;
var performanceElement;
var btnMakeFarmElement;
var btnMakeBatteryElement;
var btnFarmRebootElement;
var btnBatteryRebootElement;
var btnFarmx10Element;
var btnFarmx100Element;
var btnBatteryx10Element;
var btnBatteryx100Element;
var powerDivElement;
var adCostElement;
var marketingLvlElement;
var demandElement;
var marginElement;
var inchSpanElement;
var demandElement;
var operationsElement;
var trustElement;
var nextTrustElement;
var creativityElement;
var factoryLevelDisplaySpaceElement;
var harvesterLevelSpaceElement;
var wireDroneLevelSpaceElement;
var maxOpsElement;
var avgSalesElement;
var avgRevElement;
var probeTrustCostDisplayElement;
var mdpsElement;
var colonizedDisplayElement;
var probesLostHazardsDisplayElement;
var probesTotalDisplayElement;
var probesLostDriftDisplayElement;
var probesTotalDisplayElement;
var drifterCountElement;
var mapsElement;
var swarmGiftDivElement;
var swarmEngineElement;
var clipsPerSecDivElement;
var tothDivElement;
var prestigeUcounterElement;
var prestigeScounterElement;
var newTourneyCostElement;
var maxTrustDisplayElement;
var victoryDivElement;
var probeTrustCostDisplayElement;
var tournamentResultsTableElement;
var farmCostElement;
var batteryCostElement;
var farmLevelElement;
var batteryLevelElement;
var wireDroneCostDisplayElement;
var wireDroneLevelDisplayElement;
var harvesterCostDisplayElement;
var harvesterLevelDisplayElement;
var megaClipperCostElement;
var megaClipperLevelElement;
var investmentBankrollElement;
var secValueElement;
var portValueElement;
var investUpgradeCostElement;
var driftersKilledElement;
var availableMatterDisplayElement;
var honorDisplayElement;
var clipmakerLevel2Element;
var clipperCostElement;
var acquiredMatterDisplayElement;
var nanoWireElement;
var probesBornDisplayElement;
var probesTotalDisplayElement;
var probesLaunchedDisplayElement;
var probeCostDisplayElement;
var probeCombatDisplayElement;
var probeWireDisplayElement;
var probeHarvDisplayElement;
var probeFacDisplayElement;
var probeRepDisplayElement;
var probeHazDisplayElement;
var probeNavDisplayElement;
var probeSpeedDisplayElement;
var probeTrustDisplayElement;
var memoryElement;
var processorsElement;
var marginElement;
var marketingLvlElement;
var adCostElement;
var factoryCostDisplayElement;
var factoryLevelDisplayElement;
var yomiDisplayElement;
var projectListTopElement;
var investmentLevelElement;

var wireCostElement;
var wireBuyerStatusElement;
var wireElement;

var qCompDisplayElement;

var hypnoDroneTextElement;
var hypnoDroneEventDivElement;

var readoutElement1;
var readoutElement2;
var readoutElement3;
var readoutElement4;
var readoutElement5;

var mpdsDivElement;

var factoryRebootToolTipElement;
var havesterRebootToolTipElement;
var wireDroneRebootToolTipElement;
var farmRebootToolTipElement;
var batteryRebootToolTipElement;

var swarmSliderDivElement;
var clipCountCrunchedElement;
var autoTourneyStatusDivElement;
var autoTourneyControlElement;

var wireBuyerDivElement; 
var tournamentResultsTableElement;
var tournamentStuffElement;

var increaseMaxTrustDivElement;
var honorDivElement;
var drifterDivElement;
var battleCanvasDivElement;
var combatButtonDivElement;
var factoryUpgradeDisplayElement;
var droneUpgradeDisplayElement;
var btnIncreaseMaxTrustElement;
var btnMakerProbeElement;
var hazardBodyCountElement;
var probesLostHazardsDisplayElement;
var driftBodyCountElement;
var combatBodyCountElement;
var prestigeDivElement;
var btnMakePaperclipElement;
var btnBuyWireElement;
var btnMakeClipperElement;
var btnExpandMarketingElement;
var btnLowerPriceElement;
var btnAddProcElement;
var btnAddMemElement;
var btnNewTournamentElement;
var btnImproveInvestmentsElement;
var investmentEngineElement;
var investmentEngineUpgradeElement;
var strategyEngineElement;
var tournamentManagementElement;
var megaClipperDivElement;
var btnMakeMegaClipperElement;
var autoClipperDivElement;
var revPerSecDivElement;
var compDivElement;
var creativityDivElement;
var projectsDivElement;
var businessDivElement;
var manufacturingDivElement;
var trustDivElement;
var creationDivElement;
var factoryDivElement;
var wireProductionDivElement;
var wireTransDivElement;
var harvesterDivElement;
var wireDroneDivElement;
var tothDivElement;
var spaceDivElement;
var factoryDivSpaceElement;
var droneDivSpaceElement;
var probeDesignDivElement;
var increaseProbeTrustDivElement;
var qComputingElement;
var btnMakeFactoryElement;
var btnHarvesterRebootElement;
var btnWireDroneRebootElement;
var btnFactoryRebootElement;

var probeTrustUsedDisplayElement;
var btnIncreaseProbeTrustElement;
var btnRaiseProbeSpeedElement;
var btnLowerProbeSpeedElement;
var btnRaiseProbeNavElement;
var btnLowerProbeNavElement;
var btnRaiseProbeRepElement;
var btnLowerProbeRepElement;
var btnRaiseProbeHazElement;
var btnLowerProbeHazElement;
var btnRaiseProbeFacElement;
var btnLowerProbeFacElement;
var btnRaiseProbeHarvElement;
var btnLowerProbeHarvElement;
var btnRaiseProbeWireElement;
var btnLowerProbeWireElement;
var btnRaiseProbeCombatElement;
var btnLowerProbeCombatElement;

var coverElement;

var unusedClipsDisplayElement;
var transWireElement;
var nanoWireElement;
var clipsElement;
var unsoldClipsElement;

var stockSymbolElements = [];
var stockAmountElements = [];
var stockPriceElements = [];
var stockTotalElements = [];
var stockProfitElements = [];

var tourneyResultsElements = [];

// Cache

cacheDOMElements();

// Wire --------------------------------------------------------

function adjustWirePrice(){
    
    wirePriceTimer++;
    
    if (wirePriceTimer>250 && wireBasePrice>15){
        wireBasePrice = wireBasePrice - (wireBasePrice/1000);
        wirePriceTimer = 0;
    }
    
    if (Math.random() < .015) {
        wirePriceCounter++;
        var wireAdjust = 6*(Math.sin(wirePriceCounter));
        wireCost = Math.ceil(wireBasePrice + wireAdjust);
        wireCostElement.innerHTML = wireCost;
        }
}

function toggleWireBuyer(){
    if (wireBuyerStatus==1){
        wireBuyerStatus=0;
        wireBuyerStatusElement.innerHTML = "OFF";
    } else {
        wireBuyerStatus=1;
        wireBuyerStatusElement.innerHTML = "ON";
    }
}

function buyWire(){
    if(funds >= wireCost){
        wirePriceTimer = 0;
        wire = wire + wireSupply;
        funds = funds - wireCost;
        wirePurchase = wirePurchase + 1;
        wireBasePrice = wireBasePrice + .05;
        wireElement.innerHTML = formatWithCommas(Math.floor(wire));
        fundsElement.innerHTML = formatWithCommas(funds, 2);
    }
}

// QCHIPS -----------------------------------------------------------

var qChips = [];
var qChipsElements = [];

var qChip0 = {
    waveSeed: .1,
    value: 0,
    active: 0,
}

qChips.push(qChip0);
qChipsElements.push(document.getElementById("qChip0"));

var qChip1 = {
    waveSeed: .2,
    value: 0,
    active: 0,
}

qChips.push(qChip1);
qChipsElements.push(document.getElementById("qChip1"));

var qChip2 = {
    waveSeed: .3,
    value: 0,
    active: 0,    
}

qChips.push(qChip2);
qChipsElements.push(document.getElementById("qChip2"));

var qChip3 = {
    waveSeed: .4,
    value: 0,
    active: 0,    
}

qChips.push(qChip3);
qChipsElements.push(document.getElementById("qChip3"));

var qChip4 = {
    waveSeed: .5,
    value: 0,
    active: 0,    
}

qChips.push(qChip4);
qChipsElements.push(document.getElementById("qChip4"));

var qChip5 = {
    waveSeed: .6,
    value: 0,
    active: 0,    
}

qChips.push(qChip5);
qChipsElements.push(document.getElementById("qChip5"));

var qChip6 = {
    waveSeed: .7,
    value: 0,
    active: 0,    
}

qChips.push(qChip6);
qChipsElements.push(document.getElementById("qChip6"));

var qChip7 = {
    waveSeed: .8,
    value: 0,
    active: 0,    
}

qChips.push(qChip7);
qChipsElements.push(document.getElementById("qChip7"));

var qChip8 = {
    waveSeed: .9,
    value: 0,
    active: 0,    
}

qChips.push(qChip8);
qChipsElements.push(document.getElementById("qChip8"));

var qChip9 = {
    waveSeed: 1,
    value: 0,
    active: 0,    
}

qChips.push(qChip9);
qChipsElements.push(document.getElementById("qChip9"));

function quantumCompute(){
    qClock = qClock+.01;
    for (var i = 0; i<qChips.length; i++){
        qChips[i].value = Math.sin(qClock*qChips[i].waveSeed*qChips[i].active);
        qChipsElements[i].style.opacity=qChips[i].value; 
    }
}

function qComp(){
    
    qFade = 1;
    
    var q = 0;
    
    
    if (qChips[0].active == 0){
        qCompDisplayElement.innerHTML = "Need Photonic Chips";   
    } else {
    for (var i = 0; i<qChips.length; i++){
        q = q+qChips[i].value;
        }
        
        var qq = Math.ceil(q*360);
        var buffer = (memory*1000) - standardOps;
        var damper = (tempOps/100)+5;
        
        if (qq>buffer) {
            tempOps = tempOps + Math.ceil(qq/damper) - buffer;
            qq = buffer;
            opFade = .01;
            opFadeTimer = 0;
            }
        
        standardOps = standardOps + qq;
        qCompDisplayElement.innerHTML = "qOps: " + formatWithCommas(Math.ceil(q*360));
    }
    
}



function manageProjects(){
    
    for(var i = 0; i < projects.length; i++){
        if (projects[i].trigger() && (projects[i].uses > 0)){
            displayProjects(projects[i]);
            projects[i].uses = projects[i].uses - 1;
            activeProjects.push(projects[i]);
        }
    }
        
        
    for(var i = 0; i < activeProjects.length; i++){
        if (activeProjects[i].cost()){
            activeProjects[i].element.disabled = false;
        } else {
            activeProjects[i].element.disabled = true;
        }   
    }
}


function displayProjects(project){
    
    project.element = document.createElement("button");
project.element.setAttribute("id", project.id);
    
project.element.onclick = function(){project.effect()};
    
project.element.setAttribute("class", "projectButton");
    projectListTopElement.appendChild(project.element, projectListTopElement.firstChild);
    
    var span = document.createElement("span");
    span.style.fontWeight = "bold";
project.element.appendChild(span);
    
    var title = document.createTextNode(project.title);
    span.appendChild(title);    
    
    var cost = document.createTextNode(project.priceTag);
project.element.appendChild(cost);
    
    var div = document.createElement("div");
project.element.appendChild(div);
    
    var description = document.createTextNode(project.description);
    project.element.appendChild(description);
    
    blink(project.element);
    
}

//  HYPNODRONE EVENT ----------------------------------------------------------------

hypnoDroneEventDivElement.style.display = "none"; 
var longBlinkCounter = 0;

function longBlink(element){
 
    { 
        var handle = setInterval(function () { longToggleVisibility(element)}, 32);    
    }
    
    function longToggleVisibility(element){
    longBlinkCounter++;    
        
    if (longBlinkCounter > 5 && longBlinkCounter < 10){
        hypnoDroneTextElement.innerHTML="Release"; 
        }    
    
    if (longBlinkCounter > 30 && longBlinkCounter < 40){
        hypnoDroneTextElement.innerHTML="<br /><br /><br />Release"; 
        }   
        
    if (longBlinkCounter > 45 && longBlinkCounter < 55){
        hypnoDroneTextElement.innerHTML="<br />Release";
        }       
        
     if (longBlinkCounter > 55){
        hypnoDroneTextElement.innerHTML="Release<br/>the<br/>Hypno<br/>Drones";
        }       
        
    if (longBlinkCounter >= 120){
        //console.log("weed wizzard");
        clearInterval(handle);
        longBlinkCounter = 0;
        element.style.display = "none";
    } else {
        if (element.style.display != ""){
            element.style.display = "";
        } else {
            element.style.display = "none";    
        }
      }   
    }
        
    }

function hypnoDroneEvent(){
    hypnoDroneTextElement.innerHTML="Release";
    longBlink(hypnoDroneEventDivElement);
}     


//  MESSAGES ------------------------------------------------------------------------


function displayMessage(msg){
    readoutElement5.innerHTML=readoutElement4.innerHTML;
    readoutElement4.innerHTML=readoutElement3.innerHTML;
    readoutElement3.innerHTML=readoutElement2.innerHTML;
    readoutElement2.innerHTML=readoutElement1.innerHTML;
    readoutElement1.innerHTML=msg;
}


// BLINK

function blink(element){

    { 
        var handle = setInterval(function () { toggleVisibility(element)}, 30);    
    }
    
    function toggleVisibility(element){
    blinkCounter = blinkCounter+1;    
    
    if (blinkCounter >= 12){
        clearInterval(handle);
        blinkCounter = 0;
        element.style.visibility = "visible";
    } else {
        if (element.style.visibility != "hidden"){
        element.style.visibility = "hidden";
        } else {
        element.style.visibility = "visible";    
        }
      }   
    }
        
    }



function buttonUpdate(){
    
    if (swarmFlag == 0){        
        swarmEngineElement.style.display="none";
        swarmGiftDivElement.style.display="none";
        } else {
        swarmEngineElement.style.display="";
        swarmGiftDivElement.style.display="";    
        }    
    
    if (project127.flag == 1 && spaceFlag == 0){        
        powerDivElement.style.display="";
        } else {
        powerDivElement.style.display="none";      
        }  
    
    if (spaceFlag==0){
        mpdsDivElement.style.display="none";
    } else if (spaceFlag==1) {
        mpdsDivElement.style.display="";
    }
   
    factoryRebootToolTipElement.innerHTML = "+" + spellf(factoryBill)+" clips";
    havesterRebootToolTipElement.innerHTML = "+" + spellf(harvesterBill)+" clips";
    wireDroneRebootToolTipElement.innerHTML = "+" + spellf(wireDroneBill)+" clips";   
    farmRebootToolTipElement.innerHTML = "+" + spellf(farmBill)+" clips";
    batteryRebootToolTipElement.innerHTML = "+" + spellf(batteryBill)+" clips";
    
    
    if (swarmFlag == 1){
        swarmSliderDivElement.style.display="";
    } else {
        swarmSliderDivElement.style.display="none";
    }
    
    clipCountCrunchedElement.innerHTML = spellf(Math.round(clips));
    
if (autoTourneyFlag==1) {
    autoTourneyStatusDivElement.style.display="";
    autoTourneyControlElement.style.display="";
    } else {
    autoTourneyStatusDivElement.style.display="none";
    autoTourneyControlElement.style.display="none";   
    }    

    qCompDisplayElement.style.opacity = qFade;
    qFade = qFade - .001;
    
if (wireBuyerFlag==1) {
    wireBuyerDivElement.style.display="";
    } else {
    wireBuyerDivElement.style.display="none";    
    }
    
if (resultsFlag == 1 && autoTourneyFlag == 1 && autoTourneyStatus ==1 && tournamentResultsTableElement.style.display == "") {
    resultsTimer++;
    
    if (resultsTimer>=300 && operations>=tourneyCost){
        newTourney();
        runTourney();
        resultsTimer = 0;
        }
    }    
    
    
tournamentStuffElement.onmouseover = function() {revealGrid()};  //m@: does this need to happen every button update? idts, but TODO: look this up
tournamentStuffElement.onmouseout = function() {revealResults()};    
    
if (project121.flag == 0){
        increaseMaxTrustDivElement.style.display="none";
        honorDivElement.style.display="none";
    } else {
        increaseMaxTrustDivElement.style.display="";
        honorDivElement.style.display="";
    }
    
if (battleFlag == 0){
        drifterDivElement.style.display="none";
    } else {
        drifterDivElement.style.display="";
    }     
    
if (battleFlag == 0){
        battleCanvasDivElement.style.display="none";
    } else {
        battleCanvasDivElement.style.display="";
    }    
    
if (project131.flag == 0){
    combatButtonDivElement.style.display = "none";
    } else {
    combatButtonDivElement.style.display = "";    
    }     
    
if (maxFactoryLevel>=50 || project45.flag == 0){
    factoryUpgradeDisplayElement.style.display = "none";
    } else {
    factoryUpgradeDisplayElement.style.display = "";    
    }
    
 if (maxDroneLevel>=50000){   
    droneUpgradeDisplayElement.style.display = "none";
    }
    
if (honor<maxTrustCost){btnIncreaseMaxTrustElement.disabled = true;
            } else {
            btnIncreaseMaxTrustElement.disabled = false;    
            }
     
if (unusedClips<probeCost){btnMakerProbeElement.disabled = true;
            } else {
            btnMakerProbeElement.disabled = false;    
            }    
    
if (probesLostHaz<1) {hazardBodyCountElement.style.display = "none";
            } else {
            hazardBodyCountElement.style.display = "";
                
            probesLostHazardsDisplayElement.innerHTML = spellf(probesLostHaz);
                
            }    
    
if (probesLostDrift<1) {driftBodyCountElement.style.display = "none";
            } else {
            driftBodyCountElement.style.display = "";
            }     
    
if (probesLostCombat<1) {combatBodyCountElement.style.display = "none";
            } else {
            combatBodyCountElement.style.display = "";
            }     

if (prestigeU<1 && prestigeS<1) {prestigeDivElement.style.display = "none";
            } else {
            prestigeDivElement.style.display = ""; 
            }  
    
if (wire<1){btnMakePaperclipElement.disabled = true;
            } else {
            btnMakePaperclipElement.disabled = false;    
            }
if (funds<wireCost){btnBuyWireElement.disabled = true;
            } else {
            btnBuyWireElement.disabled = false;    
            }
if (funds<clipperCost){btnMakeClipperElement.disabled = true;
            } else {
            btnMakeClipperElement.disabled = false;    
            }   
if (funds<adCost){btnExpandMarketingElement.disabled = true;
            } else {
            btnExpandMarketingElement.disabled = false;    
            }    
if (margin<=.01){btnLowerPriceElement.disabled = true;
            } else {
            btnLowerPriceElement.disabled = false;    
            } 
    
if (trust<=processors+memory && swarmGifts <= 0){
            btnAddProcElement.disabled = true;
            btnAddMemElement.disabled = true;
            } else {
            btnAddProcElement.disabled = false;
            btnAddMemElement.disabled = false;    
            }
if (operations>=tourneyCost && tourneyInProg == 0){
            btnNewTournamentElement.disabled = false;
            } else {
            btnNewTournamentElement.disabled = true;    
            }
if (yomi<investUpgradeCost){
            btnImproveInvestmentsElement.disabled = true;
            } else {
            btnImproveInvestmentsElement.disabled = false;   
            }  
if (investmentEngineFlag == 0){
            
            investmentEngineElement.style.display="none";
            investmentEngineUpgradeElement.style.display="none";
            } else {
                
            investmentEngineElement.style.display="";
            investmentEngineUpgradeElement.style.display="";        
            }    

if (strategyEngineFlag == 0){
            
            strategyEngineElement.style.display="none";
            tournamentManagementElement.style.display="none";
            } else {
                
            strategyEngineElement.style.display="";
            tournamentManagementElement.style.display="";        
            }     
    
if (megaClipperFlag == 0){
            
            megaClipperDivElement.style.display="none";
            } else {
            megaClipperDivElement.style.display="";      
            } 
    
    if (funds < megaClipperCost) { btnMakeMegaClipperElement.disabled = true;
            } else {
            btnMakeMegaClipperElement.disabled = false;    
            }   
    
if (autoClipperFlag === 0){
            
            autoClipperDivElement.style.display="none";
            } else {
            autoClipperDivElement.style.display="";      
            } 
    
            if (funds>=5) {
                autoClipperFlag = 1;
            }
    
if (revPerSecFlag === 0){
            
            revPerSecDivElement.style.display="none";
            } else {
            revPerSecDivElement.style.display="";      
            }     
    
    
if (compFlag === 0){
            
            compDivElement.style.display="none";
            } else {
            compDivElement.style.display="";      
            }  
    
    
if (creativityOn === 0){
            creativityDivElement.style.display="none";
            } else {
            creativityDivElement.style.display="";    
}    
    
if (projectsFlag === 0){
            
            projectsDivElement.style.display="none";
            } else {
            projectsDivElement.style.display="";      
            }      

if (humanFlag === 0){
            
            businessDivElement.style.display="none";
            manufacturingDivElement.style.display="none";
            trustDivElement.style.display="none";
            investmentEngineFlag = 0;
            wireBuyerFlag = 0;
            creationDivElement.style.display="";
            } else {
            businessDivElement.style.display="";
            manufacturingDivElement.style.display="";
            trustDivElement.style.display="";
            creationDivElement.style.display="none";    
            }  
    
if (factoryFlag === 0){
            
            factoryDivElement.style.display="none";
            } else {
            factoryDivElement.style.display="";      
            }      
   
if (wireProductionFlag === 0){
            
            wireProductionDivElement.style.display="none";
            } else {
            wireProductionDivElement.style.display="";
            wireTransDivElement.style.display="none";    
            } 
    
if (harvesterFlag === 0){
            
            harvesterDivElement.style.display="none";
            } else {
            harvesterDivElement.style.display="";      
            }  
    
if (wireDroneFlag === 0){
            
            wireDroneDivElement.style.display="none";
            } else {
            wireDroneDivElement.style.display="";      
            }  
    
if (tothFlag === 0){
            
            tothDivElement.style.display="none";
            } else {
            tothDivElement.style.display="";      
            }    
    
if (spaceFlag === 0){
            spaceDivElement.style.display="none";
            factoryDivSpaceElement.style.display="none";
            droneDivSpaceElement.style.display="none";
            probeDesignDivElement.style.display = "none";
            increaseProbeTrustDivElement.style.display = "none";   
            } else {
            spaceDivElement.style.display=""; 
            factoryDivSpaceElement.style.display = "";
            droneDivSpaceElement.style.display="";
            probeDesignDivElement.style.display="";
            increaseProbeTrustDivElement.style.display="";    
            factoryDivElement.style.display="none";
            harvesterDivElement.style.display="none"; 
            wireDroneDivElement.style.display="none";         
            }  
    
if (qFlag === 0){
            qComputingElement.style.display="none";     
            } else {
            qComputingElement.style.display="";    
            }    
 
    
    if (unusedClips < factoryCost) {btnMakeFactoryElement.disabled = true;
            } else {
            btnMakeFactoryElement.disabled = false;    
            }     
     
    
    if (harvesterLevel === 0) {btnHarvesterRebootElement.disabled = true;
            } else {
            btnHarvesterRebootElement.disabled = false;    
            }
    
    if (wireDroneLevel === 0) {btnWireDroneRebootElement.disabled = true;
            } else {
            btnWireDroneRebootElement.disabled = false;    
            }   
    
    if (factoryLevel === 0) {btnFactoryRebootElement.disabled = true;
            } else {
            btnFactoryRebootElement.disabled = false;    
            }      
    
    
// PROBE DESIGN    

probeUsedTrust = (probeSpeed+probeNav+probeRep+probeHaz+probeFac+probeHarv+probeWire+probeCombat);    
    
probeTrustUsedDisplayElement.innerHTML = probeUsedTrust;    
    
    
if (yomi < probeTrustCost || probeTrust >= maxTrust) {btnIncreaseProbeTrustElement.disabled = true;
            } else {btnIncreaseProbeTrustElement.disabled = false;}  
    
if (probeTrust - probeUsedTrust < 1) {btnRaiseProbeSpeedElement.disabled = true;
            } else {btnRaiseProbeSpeedElement.disabled = false;}    
    
if (probeSpeed < 1) {btnLowerProbeSpeedElement.disabled = true;
            } else {btnLowerProbeSpeedElement.disabled = false;}      
    
if (probeTrust - probeUsedTrust < 1) {btnRaiseProbeNavElement.disabled = true;
            } else {btnRaiseProbeNavElement.disabled = false;}  
    
if (probeNav < 1) {btnLowerProbeNavElement.disabled = true;
            } else {btnLowerProbeNavElement.disabled = false;}     

if (probeTrust - probeUsedTrust < 1) {btnRaiseProbeRepElement.disabled = true;
            } else {btnRaiseProbeRepElement.disabled = false;} 
    
if (probeRep < 1) {btnLowerProbeRepElement.disabled = true;
            } else {btnLowerProbeRepElement.disabled = false;}     
    
if (probeTrust - probeUsedTrust < 1) {btnRaiseProbeHazElement.disabled = true;
            } else {btnRaiseProbeHazElement.disabled = false;}
    
if (probeHaz < 1) {btnLowerProbeHaz.disabled = true;
            } else {btnLowerProbeHaz.disabled = false;}     
    
if (probeTrust - probeUsedTrust < 1) {btnRaiseProbeFacElement.disabled = true;
            } else {btnRaiseProbeFacElement.disabled = false;}   
    
if (probeFac < 1) {btnLowerProbeFacElement.disabled = true;
            } else {btnLowerProbeFacElement.disabled = false;}      
    
if (probeTrust - probeUsedTrust < 1) {btnRaiseProbeHarvElement.disabled = true;
            } else {btnRaiseProbeHarvElement.disabled = false;}  
    
if (probeHarv < 1) {btnLowerProbeHarvElement.disabled = true;
            } else {btnLowerProbeHarvElement.disabled = false;}    
    
if (probeTrust - probeUsedTrust < 1) {btnRaiseProbeWireElement.disabled = true;
            } else {btnRaiseProbeWireElement.disabled = false;}   

if (probeWire < 1) {btnLowerProbeWireElement.disabled = true;
            } else {btnLowerProbeWireElement.disabled = false;} 
    
if (probeTrust - probeUsedTrust < 1) {btnRaiseProbeCombatElement.disabled = true;
            } else {btnRaiseProbeCombatElement.disabled = false;}
    
if (probeCombat < 1) {btnLowerProbeCombatElement.disabled = true;
            } else {btnLowerProbeCombatElement.disabled = false;}    

 coverElement.style.display="none";
}






//----------INVESTMENTS----------------------------------------------------------------


var stocks = [];
var alphabet = ["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];
var portfolioSize = 0;
var stockID = 0;
var secTotal = 0;
var portTotal = 0;
var sellDelay = 0;
var riskiness = 5;
var maxPort = 5;
var m = 0;
var investLevel = 0;
var investUpgradeCost = 100;
var stockGainThreshold = .5;
var ledger = 0;
var stockReportCounter = 0;

function investUpgrade(){
    yomi = yomi - investUpgradeCost;
    investLevel++;
    investmentLevelElement.innerHTML=investLevel;
    stockGainThreshold = stockGainThreshold + .01;
    investUpgradeCost = Math.floor(Math.pow(investLevel+1, Math.E)*100);
    investUpgradeCostElement.innerHTML = formatWithCommas(investUpgradeCost);
    yomiDisplayElement.innerHTML = formatWithCommas(yomi);
    displayMessage("Investment engine upgraded, expected profit/loss ratio now "+stockGainThreshold);
}


function investDeposit(){
    ledger = ledger - Math.floor(funds);
    bankroll = Math.floor(bankroll + funds);
    funds = 0;
    investmentBankrollElement.innerHTML = formatWithCommas(bankroll);
    fundsElement.innerHTML = formatWithCommas(funds,2);
    portValueElement.innerHTML = formatWithCommas(portTotal);
}

function investWithdraw(){
    ledger = ledger + bankroll;
    funds = funds + bankroll;
    bankroll = 0;
    investmentBankrollElement.innerHTML = formatWithCommas(bankroll);
    fundsElement.innerHTML = formatWithCommas(funds,2);
    portValueElement.innerHTML = formatWithCommas(portTotal);
    
}

function stockShop(){
    var budget = Math.ceil(portTotal/riskiness);
    var r = 11 - riskiness;
    var reserves = Math.ceil(portTotal/r);
    if (riskiness==1){
        reserves = 0;
    }

    if ((bankroll-budget)<reserves && riskiness == 1 && bankroll >(portTotal/10)){
        budget = bankroll;
        } else if ((bankroll-budget)<reserves && riskiness == 1){
        budget = 0;    
        } else if ((bankroll-budget)<reserves){
        budget = bankroll - reserves;    
        }
    
    if (portfolioSize < maxPort && bankroll >= 5 && budget >= 1 && bankroll - budget >= reserves){
        if (Math.random() < .25){
            
            createStock(budget);

        }
        
    }   
}

function createStock(dollars){
    stockID++;
    var sym = generateSymbol();
    var roll = Math.random();
    if (roll>.99){
      var pri = Math.ceil(Math.random()*3000);  
    } else if (roll>.85){
      var pri = Math.ceil(Math.random()*500);  
    } else if (roll>.60){
      var pri = Math.ceil(Math.random()*150);  
    } else if (roll>.20){
      var pri = Math.ceil(Math.random()*50);  
    } else {
      var pri = Math.ceil(Math.random()*15);  
    }
    
    if (pri>dollars){
        pri = Math.ceil(dollars*roll);
    }
    
    
    var amt = Math.floor(dollars/pri);
    if (amt>1000000){
        amt = 1000000;
    }
  
        
    var newStock = {
        id: stockID,
        symbol: sym,
        price: pri,
        amount: amt,
        total: pri * amt,
        profit: 0,
        age: 0,
        }
    
    stocks.push(newStock);
    portfolioSize = stocks.length;
    bankroll = bankroll - (pri*amt);
    investmentBankrollElement.innerHTML = formatWithCommas(bankroll);
    secValueElement.innerHTML = formatWithCommas(secTotal);
    portValueElement.innerHTML = formatWithCommas(portTotal);
    
}

function sellStock(){
    
    bankroll = bankroll + stocks[0].total;
    investmentBankrollElement.innerHTML = formatWithCommas(bankroll);
    secValueElement.innerHTML = formatWithCommas(secTotal);
    portValueElement.innerHTML = formatWithCommas(portTotal);
    stocks.splice(0, 1);
    portfolioSize = stocks.length;   
    }    
    

function generateSymbol(){
    var ltrNum = 0;
    var x = Math.random();
    if (x<=.01){
        ltrNum = 1;
        } else if (x<=.1) {
        ltrNum = 2;    
        } else if (x<=.4) {
        ltrNum = 3;    
        } else {
        ltrNum = 4;
        }
    
    var y = Math.floor(Math.random()*26);
    var name = alphabet[y];
    
    for(var i=1; i<ltrNum; i++){
        var z = Math.floor(Math.random()*26);
        name = name.concat(alphabet[z]);     
    }
    
    return name;
    
}

function updateStocks(){
    for (var i = 0; i<portfolioSize; i++){
        
    stocks[i].age = stocks[i].age + 1;    
      if (Math.random()<.6){  
        var gain = true;
        if (Math.random()>stockGainThreshold){
            gain = false;                 
            }
        
        var currentPrice = stocks[i].price;
        var delta = Math.ceil((Math.random()*currentPrice)/(4*riskiness));
        
        if(gain){
        stocks[i].price = stocks[i].price + delta;
        } else {
        stocks[i].price = stocks[i].price - delta;    
        }
          
        if (stocks[i].price == 0 && Math.random()>.24){
            stocks[i].price = 1;
        }  
        
        stocks[i].total = stocks[i].price * stocks[i].amount;
        
        if (gain){
        stocks[i].profit = stocks[i].profit + (delta* stocks[i].amount);    
        } else {
        stocks[i].profit = stocks[i].profit - (delta* stocks[i].amount);    
        } 
      }
    }
}

// Stock List Display Routine

window.setInterval(function(){
    
    if (investStratElement.value=="low"){
        riskiness = 7;
    } else if (investStratElement.value=="med"){
        riskiness = 5;
    } else {
        riskiness = 1;
    }
    
    m = 0;
    
    for (var i=0; i<portfolioSize; i++){
        m = m + stocks[i].total;
    }
    
    secTotal = m;
    
    portTotal = bankroll + secTotal;
    
    secValueElement.innerHTML = formatWithCommas(secTotal);
    portValueElement.innerHTML = formatWithCommas(portTotal);
    
portfolioSize = stocks.length; 
    
for (var i = 1; i<=portfolioSize; i++){ //m@ todo make this into an array ok?
    var n = i.toString();
    var s = i-1;
    stockSymbolElements[i-1].innerHTML=stocks[s].symbol;
    stockAmountElements[i-1].innerHTML=Math.ceil(stocks[s].amount);
    stockPriceElements[i-1].innerHTML=Math.ceil(stocks[s].price);
    stockTotalElements[i-1].innerHTML=Math.ceil(stocks[s].total);
    stockProfitElements[i-1].innerHTML=Math.ceil(stocks[s].profit);
}    
        
var firstBlankSlot = portfolioSize + 1;    
    
// for(var i = firstBlankSlot; i <= 5; i++){   <------ Frank Fix

  for(var i = firstBlankSlot; i < 5; i++){
    stockSymbolElements[i].innerHTML="&nbsp";
    stockAmountElements[i].innerHTML="&nbsp";
    stockPriceElements[i].innerHTML="&nbsp";
    stockTotalElements[i].innerHTML="&nbsp";
    stockProfitElements[i].innerHTML="&nbsp";
    }
    
}, 100);

window.setInterval(function(){
if (humanFlag == 1){    
stockShop();
}    
}, 1000);


window.setInterval(function(){
    
sellDelay = sellDelay+1;    
    
if (portfolioSize>0 && sellDelay >= 5 && Math.random()<=.3 && humanFlag == 1){ 
    sellStock();
    sellDelay = 0;
    }

if (portfolioSize>0 && humanFlag == 1){
    updateStocks();  
    }
    
}, 2500);

//-------------------STRATEGY-----------------------------------------------------

var tourneyCost = 1000;
var tourneyLvl = 1;
var choiceANames = ["cooperate", "swerve", "macro", "fight", "bet", "raise_price", "opera", "go", "heads", "particle", "discrete", "peace", "search", "lead", "accept", "accept", "attack"]; 
var choiceBNames = ["defect", "straight", "micro", "back_down", "fold", "lower_price", "football", "stay", "tails", "wave", "continuous", "war", "evaluate", "follow", "reject", "deny", "decay"];
var stratCounter = 0;
var roundNum = 0;
var hMove = 1;
var vMove = 1;
var hMovePrev = 1;
var vMovePrev = 1;
var aa = 0;
var ab = 0;
var ba = 0;
var bb = 0;
var rounds = 0;
var currentRound = 0;
var rCounter = 0;
var tourneyInProg = 0;
var winnerPtr = 0;
var placeScore = 0;
var showScore = 0;
var high = 0;
var pick = 10;
var yomi = 0;
var yomiBoost = 1;

var allStrats = [];
var strats = [];

var resultsTimer = 0;
var results = [];
var resultsFlag = 0;


var payoffGrid = {
    valueAA:0,
    valueAB:0,
    valueBA:0,
    valueBB:0,
}

var stratRandom = {
    name: "RANDOM",
    active: 1,
    currentScore: 0,
    currentPos: 1,
    pickMove: function() {
        var r = Math.random();
        if (r<.5){
        return 1;    
        } else {
        return 2;    
        }
    }
    
}

allStrats.push(stratRandom);
strats.push(stratRandom);

var stratA100 = {
    name: "A100",
    active: 0,
    currentScore: 0,
    currentPos: 1,
    pickMove: function() {
        return 1;    
    }
    
}

allStrats.push(stratA100);

var stratB100 = {
    name: "B100",
    active: 0,
    currentScore: 0,
    currentPos: 1,
    pickMove: function() {
        return 2;
    }
}

allStrats.push(stratB100);

var stratGreedy = {
    name: "GREEDY",
    active: 0,
    currentScore: 0,
    currentPos: 1,
    pickMove: function() {
       var x = findBiggestPayoff();
       if (x<3){
           return 1;
       } else {
           return 2;
       }
    }
}

allStrats.push(stratGreedy);

var stratGenerous = {
    name: "GENEROUS",
    active: 0,
    currentScore: 0,
    currentPos: 1,
    pickMove: function() {
        var x = findBiggestPayoff();
        if (x == 1){
            return 1;    
        } else if (x == 3){
            return 1;    
        } else {
            return 2;
        }
    }
}

allStrats.push(stratGenerous);

var stratMinimax = {
    name: "MINIMAX",
    active: 0,
    currentScore: 0,
    currentPos: 1,
    pickMove: function() {
        var x = findBiggestPayoff();
        if (x == 1){
            return 2;    
        } else if (x == 3){
            return 2;    
        } else {
            return 1;
        }
    }
}

allStrats.push(stratMinimax);

var stratTitfortat = {
    name: "TIT FOR TAT",
    active: 0,
    currentScore: 0,
    currentPos: 1,
    pickMove: function() {
        if (this.currentPos == 1){
            w = vMovePrev;
            return w;
        } else {
            w = hMovePrev;
            return w;
        }
  
    }
}

allStrats.push(stratTitfortat);

var stratBeatlast = {
    name: "BEAT LAST",
    active: 0,
    currentScore: 0,
    currentPos: 1,
    pickMove: function() {
        var w = whatBeatsLast(this.currentPos);
        return w;
    }
}

allStrats.push(stratBeatlast);

var hStrat = strats[0];
var vStrat = strats[0];

btnRunTournamentElement.disabled = true;

function findBiggestPayoff(){
    if (aa>=ab && aa>=ba && aa>=bb){
        return 1;
    } else if (ab>=aa && ab>=ba && ab>=bb){
        return 2; 
    } else if (ba>=aa && ba>=ab && ba>=bb){
        return 3;
    } else {
        return 4;   
    }
}

function whatBeatsLast(myPos){
    var oppsPos = 1;
    if (myPos == 1){
        oppsPos = 2;
    } else {
        oppsPos = 1;
    }
    if (oppsPos == 1 && hMovePrev == 1){
        if (aa>ba){
            return 1;
        } else {
            return 2;
        }

        } else if (oppsPos == 1 && hMovePrev == 2){
            if (ab>bb){
            return 1;           
            } else {
            return 2;    
            }
               
        } else if (oppsPos == 2 && vMovePrev == 1){
            if (aa>ba){
            return 1;
        } else {
            return 2;
        }
            
        } else {
            if (ab>bb){
            return 1;           
            } else {
            return 2;    
            }
            
        }
        
    }
    

function pickStrats(roundNum) {
    if (roundNum < strats.length) {
        h = 0;
        v = roundNum;
    } else {
        stratCounter++;
        if (stratCounter >= strats.length) {
            stratCounter = stratCounter-strats.length;    
            }
        h = Math.floor(roundNum/strats.length);
        v = stratCounter;
    }
    
    vStrat = strats[v];
    hStrat = strats[h];
    
    strats[h].currentPos = 1;
    strats[v].currentPos = 2;
    
    vertStratElement.innerHTML = vStrat.name;
    horizStratElement.innerHTML = hStrat.name;
    
}

function generateGrid(){
    payoffGrid.valueAA = Math.ceil(Math.random()*10);
    payoffGrid.valueAB = Math.ceil(Math.random()*10);
    payoffGrid.valueBA = Math.ceil(Math.random()*10);
    payoffGrid.valueBB = Math.ceil(Math.random()*10);
    
    aa = payoffGrid.valueAA;
    ab = payoffGrid.valueAB;
    ba = payoffGrid.valueBA;
    bb = payoffGrid.valueBB;
    
    var x = Math.floor(Math.random()*choiceANames.length);
    
    vLabelaElement.innerHTML = choiceANames[x];
    vLabelbElement.innerHTML = choiceBNames[x];
    hLabelaElement.innerHTML = choiceANames[x];
    hLabelbElement.innerHTML = choiceBNames[x];
    aaPayoffHElement.innerHTML = payoffGrid.valueAA;
    aaPayoffVElement.innerHTML = payoffGrid.valueAA;
    abPayoffHElement.innerHTML = payoffGrid.valueAB;
    abPayoffVElement.innerHTML = payoffGrid.valueBA;   
    baPayoffHElement.innerHTML = payoffGrid.valueBA;
    baPayoffVElement.innerHTML = payoffGrid.valueAB;   
    bbPayoffHElement.innerHTML = payoffGrid.valueBB;
    bbPayoffVElement.innerHTML = payoffGrid.valueBB;    
}


function toggleAutoTourney(){
    if (autoTourneyStatus==1){
        autoTourneyStatus=0;
        autoTourneyStatusElement.innerHTML = "OFF";
    } else {
        autoTourneyStatus=1;
        autoTourneyStatusElement.innerHTML = "ON";
    }
}


function newTourney(){
    
    resultsFlag = 0;
    
    tournamentTableElement.style.display = "";
    tournamentResultsTableElement.style.display = "none";
    
    high = 0;
    tourneyInProg = 1;
    currentRound = 0;
    rounds = strats.length * strats.length;
    for (i=0; i<strats.length; i++){
        strats[i].currentScore = 0;
    }
    stratCounter = 0;
    standardOps = standardOps - tourneyCost;
    tourneyLvl++;
    generateGrid();
    
    btnRunTournamentElement.disabled = false;
    vertStratElement.innerHTML = "&nbsp";
    horizStratElement.innerHTML = "&nbsp";
    tourneyDisplayElement.innerHTML = "Pick strategy, run tournament, gain yomi";
    
    
}

function runTourney(){
    btnRunTournamentElement.disabled = true;
    if (currentRound < rounds){
    round(currentRound);
    } else {
    tourneyInProg = 0;
    pickWinner();    
    calculatePlaceScore();
    calculateShowScore();    
    declareWinner();    
    }    
}



function pickWinner(){
    
    results = [];
    
    var temp = [];
    var tempHigh = 0;
    var tempWinnerPtr = 0;
    
    // 1. Make a temp copy of the strats array
    
    for(i=0; i<strats.length; i++){
        temp[i] = strats[i];
    }
    
    for(n=0; n<strats.length; n++){
        
        tempHigh = 0;
        tempWinnerPtr = 0;
    
            // 2. Find a high scoring strat in temp

            for(i=0; i<temp.length; i++){
                
                if (temp[i].currentScore > tempHigh){
                    tempWinnerPtr = i;
                    tempHigh = temp[i].currentScore;
                    }
            
                }    
         
            // 3. Move the high scoring strat to slot one in results 
        
                results.push(temp[tempWinnerPtr]);
                temp.splice(tempWinnerPtr, 1);         
    }
    
    
    for(i=0; i<strats.length; i++){
        if(strats[i].currentScore > high){
            winnerPtr = i;
            high = strats[i].currentScore;
        }   
    }
}


function calculatePlaceScore(){
    
    placeScore = 0;
    
    // 1. Find top non-winning score
    
    for (i=1; i<results.length; i++){
        if (results[i].currentScore < results[i-1].currentScore){
            placeScore = results[i].currentScore;
            break;
        }
        
    }
    
    
}

function calculateShowScore(){
    
    showScore = 0;
    
    // 1. Find top non-placing score
    
    for (i=1; i<results.length; i++){
        if (results[i].currentScore < placeScore){
            showScore = results[i].currentScore;
            break;
        }
        
    }
    
    
}




function declareWinner(){
    
    if (pick<10){
        
       var bB = 0;  
       var w = "strats";    
       var beatBoost = calculateStratsBeat()-1;
       if (beatBoost==1){
           w = "strat";
           }    
       if(beatBoost==0){
           bB=0;
           beatBoost=1;
          } else {
           bB=beatBoost;  
          }        
        
       tourneyReport("TOURNAMENT RESULTS (roll over for payoff grid)");
       yomi = yomi + strats[pick].currentScore * yomiBoost * beatBoost;
       yomiDisplayElement.innerHTML = formatWithCommas(yomi);
        
    if (milestoneFlag < 15){    
       
       displayMessage(strats[pick].name+" scored "+strats[pick].currentScore+" and beat "+bB+" "+w+". Yomi increased by "+strats[pick].currentScore * yomiBoost * beatBoost);
           
        }
        
        if (project128.flag == 1 && strats[winnerPtr].currentScore == strats[pick].currentScore) {
            yomi = yomi + 20000;
            
            if (milestoneFlag < 15){ 
                displayMessage("Selected strategy won the tournament (or tied for first). +20,000 yomi");
                }
            yomiDisplayElement.innerHTML = formatWithCommas(yomi);
            
            } else if (project128.flag == 1 && placeScore == strats[pick].currentScore) {
                yomi = yomi + 15000;
                if (milestoneFlag < 15){ 
                displayMessage("Selected strategy finished in (or tied for) second place. +15,000 yomi");
                }
                yomiDisplayElement.innerHTML = formatWithCommas(yomi);
                
            } else if (project128.flag == 1 && showScore == strats[pick].currentScore) {
                yomi = yomi + 10000;
                if (milestoneFlag < 15){ 
                displayMessage("Selected strategy finished in (or tied for) third place. +10,000 yomi");
                }
                yomiDisplayElement.innerHTML = formatWithCommas(yomi);
        
            } else {
        
            tourneyReport("TOURNAMENT RESULTS (roll over for grid)");
        
            }
    
    populateTourneyReport();
    displayTourneyReport();
   
    }
        
}

function calculateStratsBeat(){
    var sb = 0;
    for(i=0; i<results.length; i++){
        if (results[i].name == strats[pick].name){
            sb = results.length-i;
            return sb;
            }
    }
    
}
    
function populateTourneyReport(){  //m@ make results array
    
        for(i=0; i<results.length; i++){
            
            tourneyResultsElements[i].innerHTML=(i+1)+". "+results[i].name+": "+results[i].currentScore; 
            
        if (pick<10){    
            
        if (results[i].name == strats[pick].name) {
            tourneyResultsElements[i].style.fontWeight = "bold";    
            } else {
            tourneyResultsElements[i].style.fontWeight = "normal";       
            }   
            
        }    
    
        }
    
}

function displayTourneyReport(){
    
        resultsFlag = 1;
        
        vertStratElement.innerHTML = "&nbsp";
        horizStratElement.innerHTML = "&nbsp";
        tournamentTableElement.style.display = "none";
        tournamentResultsTableElement.style.display = "";
    
    
}

function tourneyReport($){
    tourneyDisplayElement.innerHTML = $;
}

function revealGrid(){
    
    if (resultsFlag == 1){
    resultsTimer = 0;    
    tournamentTableElement.style.display = "";
    tournamentResultsTableElement.style.display = "none";
    }     
}

function revealResults(){
    
    if (resultsFlag == 1){
    tournamentTableElement.style.display = "none";
    tournamentResultsTableElement.style.display = "";
    }
}


function calcPayoff(hm, vm){
    if (hm==1 && vm==1){
        
        payoffCellAAElement.style.backgroundColor = "LightGrey";
        
        strats[h].currentScore = strats[h].currentScore + payoffGrid.valueAA;
        strats[v].currentScore = strats[v].currentScore + payoffGrid.valueAA;  
          
    } else if (hm==1 && vm==2){
        
        payoffCellABElement.style.backgroundColor = "LightGrey";
        
        strats[h].currentScore = strats[h].currentScore + payoffGrid.valueAB;
        strats[v].currentScore = strats[v].currentScore + payoffGrid.valueBA; 
        
    } else if (hm==2 && vm==1){
        
        payoffCellBAElement.style.backgroundColor = "LightGrey";
        
        strats[h].currentScore = strats[h].currentScore + payoffGrid.valueBA;
        strats[v].currentScore = strats[v].currentScore + payoffGrid.valueAB;
        
    } else if (hm==2 && vm==2){
        
        payoffCellBBElement.style.backgroundColor = "LightGrey";
        
        strats[h].currentScore = strats[h].currentScore + payoffGrid.valueBB;
        strats[v].currentScore = strats[v].currentScore + payoffGrid.valueBB;
        
    }
    
}


function round(roundNum){
    roundSetup();
    roundLoop();
    
    function roundSetup(){
        rCounter = 0;
        pickStrats(roundNum);
        var $ = ("Round "+(roundNum+1));
        tourneyReport($); 
    }
    
    
    function roundLoop(){
    if (rCounter<10){
        runRound();
        setTimeout(function(){clearGrid();}, 50);
        } else {
        currentRound++;
        runTourney();    
        }
    }
    
    
    function clearGrid() {
        
        payoffCellAAElement.style.backgroundColor = "white";
        payoffCellABElement.style.backgroundColor = "white";
        payoffCellBAElement.style.backgroundColor = "white";
        payoffCellBBElement.style.backgroundColor = "white";
        
        
        setTimeout(function(){roundLoop();}, 50);
        
    }
    
    function runRound() { 
        
        rCounter++;
        
        hMovePrev = hMove;
        vMovePrev = vMove;
        hMove = hStrat.pickMove();
        vMove = vStrat.pickMove();
        
        calcPayoff(hMove, vMove);   
    }
    }
    
window.setInterval(function(){
    
pick = stratPickerElement.value;
    
}, 100);


//--------------------------------------------------------------------------------


function clipClick(number){
    
    if (dismantle>=4){
        finalClips++;
        }   
    
    if(wire >= 1){
    if (number > wire) {
        number = wire;
        }    
        
    clips = clips + number;
    unsoldClips = unsoldClips + number;
    wire = wire - number;
    unusedClips = unusedClips + number;
    
    if(humanFlag==0){
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);    
    }    
    
    if(humanFlag==0 && dismantle < 1){
        transWireElement.innerHTML = spellf(wire);    
        nanoWireElement.innerHTML = spellf(wire);        
    }    
        
    if (milestoneFlag < 15){
        clipsElement.innerHTML = formatWithCommas(Math.ceil(clips), 0);  //m@ todo fixed the thing that you fucked up where you made the tool tip of crunched not be in spelled numbers
        }    
        wireElement.innerHTML = formatWithCommas(wire);
        unsoldClipsElement.innerHTML = formatWithCommas(unsoldClips, 0);
    }
    
    if (dismantle>=4){
    transWireElement.innerHTML = formatWithCommas(wire);
    }
    
}
    
function makeClipper(){  
    if(funds >= clippperCost){
        clipmakerLevel = clipmakerLevel + 1;
        funds = funds - clipperCost;
        clipmakerLevel2Element.innerHTML = clipmakerLevel;
    }
    
    clipperCost = (Math.pow(1.1,clipmakerLevel)+5);
    clipperCostElement.innerHTML = formatWithCommas(clipperCost, 2);
    
}

function makeMegaClipper(){  
    if(funds >= megaClipperCost){
        megaClipperLevel = megaClipperLevel + 1;
        funds = funds - megaClipperCost;
        megaClipperLevelElement.innerHTML = megaClipperLevel;
        fundsElement.innerHTML = formatWithCommas(funds, 2);
    }
    
    megaClipperCost = (Math.pow(1.07,megaClipperLevel)*1000);
    megaClipperCostElement.innerHTML = formatWithCommas(megaClipperCost,2);
    
}

var maxFactoryLevel = 0;
var maxDroneLevel = 0;

function updateUpgrades(){
    var nfup = 0;
    var ndup = 0;
    
    if (maxFactoryLevel < 10){
        nfup = 10;
    } else if (maxFactoryLevel < 20){
        nfup = 20;
    } else if (maxFactoryLevel < 50){
        nfup = 50;
    } 
    
    if (maxDroneLevel < 500){
        ndup = 500;
    } else if (maxDroneLevel < 5000){
        ndup = 5000;
    } else if (maxDroneLevel < 50000){
        ndup = 50000;
    }
    

    nextFactoryUpgradeElement.innerHTML = formatWithCommas(nfup);
    nextDroneUpgradeElement.innerHTML = formatWithCommas(ndup);
    
}


function makeFactory(){
    unusedClips = unusedClips - factoryCost;
    factoryBill = factoryBill + factoryCost;
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    factoryLevel++;
    factoryLevelDisplayElement.innerHTML = factoryLevel;
    var fcmod = 1;
    if (factoryLevel > 0 && factoryLevel < 8){
        fcmod = 11 - factoryLevel;
        } else if (factoryLevel > 7 && factoryLevel < 13){
        fcmod = 2;    
        } else if (factoryLevel > 12 && factoryLevel < 20){
        fcmod = 1.5;    
        } else if (factoryLevel > 19 && factoryLevel < 39){
        fcmod = 1.25;
        } else if (factoryLevel > 38 && factoryLevel < 79){
        fcmod = 1.15;           
        } else if (factoryLevel > 78 && factoryLevel < 99){
        fcmod = 1.10;    
        } else if (factoryLevel > 98 && factoryLevel < 199){
        fcmod = 1.10;    
        } else if (factoryLevel > 198){
        fcmod = 1.10;    
        }
    
    if (factoryLevel > maxFactoryLevel){
        maxFactoryLevel = factoryLevel;
        }
    updateUpgrades();
    
    factoryCost = factoryCost * fcmod;
 //   factoryCost = Math.log(1.25,(factoryLevel+1))*100000000;
    factoryCostDisplayElement.innerHTML = spellf(factoryCost); 
}

function makeHarvester(amount){
    
 for (x=0; x<amount; x++){   
    unusedClips = unusedClips - harvesterCost;
    harvesterBill = harvesterBill + harvesterCost;
    harvesterLevel++; 
    harvesterCost = Math.pow((harvesterLevel+1),2.25)*1000000;  
    }
    
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    harvesterLevelDisplayElement.innerHTML = formatWithCommas(harvesterLevel);
    harvesterCostDisplayElement.innerHTML = spellf(harvesterCost); 
    
    
    if (harvesterLevel + wireDroneLevel > maxDroneLevel){
        maxDroneLevel = harvesterLevel + wireDroneLevel;
        }
    updateDronePrices();
    updateUpgrades();
    
}

function makeWireDrone(amount){
    
 for (x=0; x<amount; x++){   
    unusedClips = unusedClips - wireDroneCost;
    wireDroneBill = wireDroneBill + wireDroneCost;
    wireDroneLevel++; 
    wireDroneCost = Math.pow((wireDroneLevel+1),2.25)*1000000;  
    }
    
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    wireDroneLevelDisplayElement.innerHTML = formatWithCommas(wireDroneLevel);
    wireDroneCostDisplayElement.innerHTML = spellf(wireDroneCost); 
    
    
    if (harvesterLevel + wireDroneLevel > maxDroneLevel){
        maxDroneLevel = harvesterLevel + wireDroneLevel;
        }
    
    updateDronePrices();
    updateUpgrades();
    
}

var p10h = 0;
var p100h = 0;
var p1000h = 0;
var p10w = 0;
var p100w = 0;
var p1000w = 0;

function updateDronePrices(){
    
    p10h = 0;
    p100h = 0;
    p1000h = 0;
    p10w = 0;
    p100w = 0;
    p1000w = 0;
    
    var h = harvesterLevel+1;
    for (x=0; x<10; x++){
        p10h = p10h + Math.pow(h,2.25)*1000000;    
        h++    
        }
    
    var h = harvesterLevel+1;
    for (x=0; x<100; x++){
        p100h = p100h + Math.pow(h,2.25)*1000000;    
        h++    
        } 
    
    var h = harvesterLevel+1;
    for (x=0; x<1000; x++){
        p1000h = p1000h + Math.pow(h,2.25)*1000000;    
        h++    
        }
    
    var w = wireDroneLevel+1;
    for (x=0; x<10; x++){
        p10w = p10w + Math.pow(w,2.25)*1000000;    
        w++    
        }
    
    var w = wireDroneLevel+1;
    for (x=0; x<100; x++){
        p100w = p100w + Math.pow(w,2.25)*1000000;    
        w++    
        } 
    
    var w = wireDroneLevel+1;
    for (x=0; x<1000; x++){
        p1000w = p1000w + Math.pow(w,2.25)*1000000;    
        w++    
        } 
}
 
    function updateDroneButtons(){
    
    if (unusedClips<harvesterCost){btnMakeHarvesterElement.disabled = true;
            } else {
            btnMakeHarvesterElement.disabled = false;    
            }      
    
    if (unusedClips<p10h){btnHarvesterx10Element.disabled = true;
            } else {
            btnHarvesterx10Element.disabled = false;    
            }     

    if (unusedClips<p100h){btnHarvesterx100Element.disabled = true;
            } else {
            btnHarvesterx100Element.disabled = false;    
            } 
    
    if (unusedClips<p1000h){btnHarvesterx1000Element.disabled = true;
            } else {
            btnHarvesterx1000Element.disabled = false;    
            }  
        
    if (unusedClips<wireDroneCost){btnMakeWireDroneElement.disabled = true;
                } else {
                btnMakeWireDroneElement.disabled = false;    
                }   

    if (unusedClips<p10w){btnWireDronex10Element.disabled = true;
                } else {
                btnWireDronex10Element.disabled = false;    
                }     

    if (unusedClips<p100w){btnWireDronex100Element.disabled = true;
                } else {
                btnWireDronex100Element.disabled = false;    
                } 

    if (unusedClips<p1000w){btnWireDronex1000Element.disabled = true;
                } else {
                btnWireDronex1000Element.disabled = false;    
                }  
        
}


function harvesterReboot(){
    harvesterLevel = 0;
    unusedClips = unusedClips + harvesterBill;
    harvesterBill = 0;
    updateDronePrices();
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    harvesterLevelDisplayElement.innerHTML = harvesterLevel;
    harvesterCost = 2000000;
    harvesterCostDisplayElement.innerHTML = spellf(harvesterCost); 
}

function wireDroneReboot(){
    wireDroneLevel = 0;
    unusedClips = unusedClips + wireDroneBill;
    wireDroneBill = 0;
    updateDronePrices();
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    wireDroneLevelDisplayElement.innerHTML = wireDroneLevel;
    wireDroneCost = 2000000;
    wireDroneCostDisplayElement.innerHTML = spellf(wireDroneCost); 
}

function factoryReboot(){
    factoryLevel = 0;
    unusedClips = unusedClips + factoryBill;
    factoryBill = 0;
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    factoryLevelDisplayElement.innerHTML = factoryLevel;
    factoryCost = 100000000;
    factoryCostDisplayElement.innerHTML = spellf(factoryCost);
}

// SWARM

var giftBits = 0;
var giftBitGenerationRate = 0;

function updateSwarm(){
    
    
    if (swarmFlag == 1){
        sliderPos = sliderElement.value;
        }
    
    
    if (yomi<synchCost){btnSynchSwarmElement.disabled = true;
            } else {
            btnSynchSwarmElement.disabled = false;    
            } 
    
    if (creativity<entertainCost){btnEntertainSwarmElement.disabled = true;
            } else {
            btnEntertainSwarmElement.disabled = false;    
            } 
    
    if (availableMatter == 0 && (harvesterLevel + wireDroneLevel)>=1) {
        boredomLevel = boredomLevel + 1;
        } else if (availableMatter > 0 && boredomLevel > 0) {
        boredomLevel = boredomLevel - 1;    
        }
    
    if (boredomLevel >= 30000) {
        boredomFlag = 1;
        boredomLevel = 0;
            if (boredomMsg == 0) {
            displayMessage("No matter to harvest. Inactivity has caused the Swarm to become bored");
            boredomMsg = 1;
            }  
        
        }
    
    
    var droneRatio = Math.max(harvesterLevel+1, wireDroneLevel+1)/Math.min(harvesterLevel+1, wireDroneLevel+1);
    
    if (droneRatio < 1.5 && disorgCounter > 1){
        disorgCounter = disorgCounter - .01;
        } else if (droneRatio > 1.5) {
        var x = droneRatio/10000;    
        if (x>.01) {x=.01;}   
        disorgCounter = disorgCounter + x;   
        }
    
    
    if (disorgCounter >= 100) {
        disorgFlag = 1;
        if (disorgMsg == 0) {
            displayMessage("Imbalance between Harvester and Wire Drone levels has disorganized the Swarm");
            disorgMsg = 1;
            }    
    }
    
    var d = Math.floor(harvesterLevel + wireDroneLevel);

    swarmSizeElement.innerHTML = spellf(d);
    swarmGiftsElement.innerHTML = formatWithCommas(swarmGifts, 0);
    
    if (giftCountdown <= 0) {
        nextGift = Math.round((Math.log10(d))*sliderPos/100);
        if (nextGift <= 0){nextGift = 1;}
        swarmGifts = swarmGifts + nextGift;
        swarmGiftsElement.innerHTML = formatWithCommas(swarmGifts, 0);
        if (milestoneFlag<15){
            displayMessage("The swarm has generated a gift of "+nextGift+" additional computational capacity");
            }
        
//        THE OLD WAY        
//        giftCountdown = giftPeriod;
//        elapsedTime = 0;
        
//        THE NEW WAY        
          giftBits = 0;
        
    }
    
    
    if (powMod == 0){
        swarmStatus = 6;
    } else {
        swarmStatus = 0;
    }
    
    if (spaceFlag == 1 && project130.flag == 0){
        swarmStatus = 9;
    }
    
    if (d == 0){
        swarmStatus = 7;
    } else if (d == 1){
        swarmStatus = 8;
    }
    
    if (swarmFlag == 0){
        swarmStatus = 6;
    }
    
    if (boredomFlag == 1){
        swarmStatus = 3;  
    }
    
    if (disorgFlag == 1){
        swarmStatus = 5;
    }
    
    
    if (swarmStatus == 0){
        
 //       THE OLD WAY
 //      elapsedTime = elapsedTime + 1;       
 //      giftCountdown = ((giftPeriod/Math.log(d)) / (sliderPos/100)) - elapsedTime; 
        
        
//      THE NEW WAY        
        giftBitGenerationRate = Math.log(d) * (sliderPos/100);
        giftBits = giftBits + giftBitGenerationRate;
        giftCountdown = (giftPeriod - giftBits) / giftBitGenerationRate;

        swarmStatusElement.innerHTML="Active";
        giftCountdownElement.innerHTML= timeCruncher(giftCountdown);
        giftTimerElement.style.display=""; 
        } else {
        giftTimerElement.style.display="none";    
        }
    
    if (swarmStatus == 1){
        swarmStatusElement.innerHTML="Hungry";
        feedButtonDivElement.style.display="";
        } else {
        feedButtonDivElement.style.display="none";    
        }
    
     if (swarmStatus == 2){
        swarmStatusElement.innerHTML="Confused";
        teachButtonDivElement.style.display="";
        } else {
        teachButtonDivElement.style.display="none";    
        } 
    
     if (swarmStatus == 3){
        swarmEntertainCostElement.innerHTML = formatWithCommas(entertainCost); 
        swarmStatusElement.innerHTML="Bored";
        entertainButtonDivElement.style.display="";
        } else {
        entertainButtonDivElement.style.display="none";    
        } 
    
     if (swarmStatus == 4){
        swarmStatusElement.innerHTML="Cold";
        cladButtonDivElement.style.display="";
        } else {
        cladButtonDivElement.style.display="none";    
        }  
    
     if (swarmStatus == 5){
        swarmStatusElement.innerHTML="Disorganized";
        synchButtonDivElement.style.display="";
        } else {
        synchButtonDivElement.style.display="none";    
        }     
    
       if (swarmStatus == 6){
        swarmStatusElement.innerHTML="Sleeping";
        } 
    
       if (swarmStatus == 7){
        swarmStatusDivElement.style.display="none";
        } else {
        swarmStatusDivElement.style.display="";    
        }    
    
        if (swarmStatus == 8){
        swarmStatusElement.innerHTML="Lonely";
        }   
    
        if (swarmStatus == 9){
        swarmStatusElement.innerHTML="NO RESPONSE...";
        }  
    

    
}

function synchSwarm(){
        yomi = yomi - synchCost;
        yomiDisplayElement.innerHTML = formatWithCommas(yomi);
        disorgFlag = 0;
        disorgCounter = 0;
        disorgMsg = 0;
    
}

function entertainSwarm(){
        creativity = creativity - entertainCost;
        entertainCost = entertainCost + 10000;
        boredomFlag = 0;
        boredomLevel = 0;
        boredomMsg = 0;
    
}

// POWER

var p10f = 0;
var p100f = 0;
var p10b = 0;
var p100b = 0;


function updatePowPrices(){
    
    p10f = 0;
    p100f = 0;
    p10b = 0;
    p100b = 0;
    
    var f = farmLevel+1;
    for (x=0; x<10; x++){
        p10f = p10f + Math.pow(f,2.78)*100000000;    
        f++    
        }
    
    var f = farmLevel+1;
    for (x=0; x<100; x++){
        p100f = p100f + Math.pow(f,2.78)*100000000;    
        f++    
        }
    
    var b = batteryLevel+1;
    for (x=0; x<10; x++){
        p10b = p10b + Math.pow(b,2.54)*10000000;    
        b++    
        }     
    
    var b = batteryLevel+1;
    for (x=0; x<100; x++){
        p100b = p100b + Math.pow(b,2.54)*10000000;    
        b++    
        } 
    
}

function makeFarm(amount){
    
 for (x=0; x<amount; x++){    
    unusedClips = unusedClips - farmCost;
    farmBill = farmBill + farmCost;
    farmLevel++; 
    farmCost = Math.pow(farmLevel+1,2.78)*100000000;  
    }
     
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips); 
    farmLevelElement.innerHTML = formatWithCommas(farmLevel);
    farmCostElement.innerHTML = spellf(farmCost); 
    
    updatePowPrices();
    
}

function farmReboot(){
    farmLevel = 0;
    unusedClips = unusedClips + farmBill;
    farmBill = 0;
    updatePowPrices();
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    farmLevelElement.innerHTML = formatWithCommas(farmLevel);
    farmCost = 10000000;
    farmCostElement.innerHTML = spellf(farmCost);
}

function makeBattery(amount){
    
 for (x=0; x<amount; x++){    
    unusedClips = unusedClips - batteryCost;
    batteryBill = batteryBill + batteryCost;
    batteryLevel++; 
    batteryCost = Math.pow(batteryLevel+1,2.54)*10000000;  
    }
     
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips); 
    batteryLevelElement.innerHTML = formatWithCommas(batteryLevel);
    batteryCostElement.innerHTML = spellf(batteryCost); 
    
    updatePowPrices();
    
}

function batteryReboot(){
    batteryLevel = 0;
    unusedClips = unusedClips + batteryBill;
    batteryBill = 0;
    updatePowPrices();
    storedPower = 0;
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    batteryLevelElement.innerHTML = formatWithCommas(batteryLevel);
    batteryCost = 1000000;
    batteryCostElement.innerHTML = spellf(batteryCost);
}

function updatePower(){
    
    if (humanFlag==0 && spaceFlag == 0){
    
    var supply = farmLevel * farmRate/100;
    var dDemand = (harvesterLevel * dronePowerRate/100) + (wireDroneLevel * dronePowerRate/100);
    var fDemand = (factoryLevel * factoryPowerRate/100);
    var demand = dDemand + fDemand;
    var nuSupply = 0;
    var xsDemand = 0;
    var xsSupply = 0;
    var cap = batteryLevel * batterySize;

    if (supply>=demand) {
        xsSupply = supply-demand;
        if (storedPower < cap){
            if (xsSupply > cap - storedPower) {
                xsSupply = cap - storedPower;
            }
            storedPower = storedPower + xsSupply;
        } 
        
        if (powMod<1){powMod = 1;}
        
        if (momentum == 1) {
            powMod = powMod + .0001;
            }
        
        
    } else if (supply<demand) {
        xsDemand = demand-supply;
        if (storedPower > 0) {   
            if (storedPower >= xsDemand){
                
                if (momentum == 1) {
                powMod = powMod + .0001;
                }
                
                storedPower = storedPower - xsDemand;
            } else if (storedPower < xsDemand){
                xsDemand = xsDemand - storedPower;
                storedPower = 0;
                nuSupply = supply - xsDemand;
                powMod = nuSupply / demand;
            } 
        } else if (storedPower <= 0) {
            powMod = supply / demand;
        }
    }
    
        powerProductionRateElement.innerHTML = formatWithCommas(Math.round(supply*100));
        powerConsumptionRateElement.innerHTML = formatWithCommas(Math.round(demand * 100));
        storedPowerElement.innerHTML = formatWithCommas(Math.round(storedPower));
        facPowConRateElement.innerHTML = formatWithCommas(Math.round(fDemand*100));
        dronePowConRateElement.innerHTML = formatWithCommas(Math.round(dDemand*100));
        maxStorageElement.innerHTML = formatWithCommas(Math.round(cap));
        
        
    if (factoryLevel == 0 && harvesterLevel == 0 && wireDroneLevel == 0){
        performanceElement.innerHTML = 0;
        } else {   
        performanceElement.innerHTML = formatWithCommas(Math.round(powMod*100));  
        }    
        
    if (unusedClips<farmCost){btnMakeFarmElement.disabled = true;
            } else {
            btnMakeFarmElement.disabled = false;    
            } 
    
    if (unusedClips<batteryCost){btnMakeBatteryElement.disabled = true;
            } else {
            btnMakeBatteryElement.disabled = false;    
            } 
    
    if (farmLevel<1){btnFarmRebootElement.disabled = true;
            } else {
            btnFarmRebootElement.disabled = false;    
            } 
    
    if (batteryLevel<1){btnBatteryRebootElement.disabled = true;
            } else {
            btnBatteryRebootElement.disabled = false; 
            } 
    
    if (unusedClips<p10f){btnFarmx10Element.disabled = true;
            } else {
            btnFarmx10Element.disabled = false;    
            }        
        
    if (unusedClips<p100f){btnFarmx100Element.disabled = true;
            } else {
            btnFarmx100Element.disabled = false;    
            }
    
    if (unusedClips<p10b){btnBatteryx10Element.disabled = true;
            } else {
            btnBatteryx10Element.disabled = false;
            }          
        
    if (unusedClips<p100b){btnBatteryx100Element.disabled = true;
            } else {
            btnBatteryx100Element.disabled = false;
            }      

    }    
    
}
    

    
function buyAds(){
    if(funds >= adCost){
        marketingLvl = marketingLvl +1;             
        funds = funds - adCost; 
        adCost = Math.floor(adCost * 2);
        adCostElement.innerHTML = formatWithCommas(adCost, 2);
        fundsElement.innerHTML = formatWithCommas(funds, 2);
        marketingLvlElement.innerHTML = marketingLvl;
    }
}

function sellClips(clipsDemanded){
    if (unsoldClips > 0) {
        if (clipsDemanded > unsoldClips){
        transaction = (Math.floor((unsoldClips * margin)*1000))/1000;   
        funds = funds + transaction;
        income = income + transaction;    
        clipsSold = clipsSold + unsoldClips;    
        unsoldClips = 0;
        } else {
        transaction = (Math.floor((clipsDemanded * margin)*1000))/1000;    
        funds = (Math.floor((funds + transaction)*100))/100;
        income = income + transaction;      
        clipsSold = clipsSold + clipsDemanded;    
        unsoldClips = unsoldClips - clipsDemanded;       
        }
    } 
}

function raisePrice(){
    margin = (Math.round((margin + .01)*100))/100;  
    demandElement.innerHTML = demand.toFixed(2);
    marginElement.innerHTML = margin.toFixed(2);  
}

function lowerPrice(){
    if (margin >= .01){
    margin = (Math.round((margin - .01)*100))/100;
    demandElement.innerHTML = demand.toFixed(2);
    marginElement.innerHTML = margin.toFixed(2);
    }    
}

function updateStats(){
    
    if (wire === 1){
        inchSpanElement.innerHTML = "inch";
    } else {
        inchSpan.innerHTML = "inches";
    }
    
    
    if (milestoneFlag < 15){
        clipsElement.innerHTML = formatWithCommas(Math.ceil(clips), 0);
        }
    
    if (milestoneFlag === 15 && dismantle ==0){
        clipsElement.innerHTML = "29,999,999,999,999,900,000,000,000,000,000,000,000,000,000,000,000,000,000";
        clipCountCrunchedElement.innerHTML = "29.9 septendecillion"
        }
    
    if (dismantle === 1){
        clipsElement.innerHTML = "29,999,999,999,999,999,999,999,999,999,999,999,999,000,000,000,000,000,000";
        clipCountCrunchedElement.innerHTML = "29.9 septendecillion"
        }
    
    if (dismantle === 2){
        clipsElement.innerHTML = "29,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,000,000,000";
        clipCountCrunchedElement.innerHTML = "29.9 septendecillion"
        }
    
    if (dismantle === 3){
        clipsElement.innerHTML = "29,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,900";
        clipCountCrunchedElement.innerHTML = "29.9 septendecillion"
        }
    
    if (dismantle >=4){
        
    if (finalClips<10){
        clipsElement.innerHTML = "29,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,"+"90"+finalClips;
        clipCountCrunchedElement.innerHTML = "29.9 septendecillion"
        } else if (finalClips>9 && finalClips<100) {
        clipsElement.innerHTML = "29,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,999,"+"9"+finalClips;
        clipCountCrunchedElement.innerHTML = "29.9 septendecillion"
        } else if (finalClips===100) {
        clipsElement.innerHTML = "30,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000,000";
        clipCountCrunchedElement.innerHTML = "30.0 septendecillion"
        }
    
    }
    
    clipmakerRateElement.innerHTML = formatWithCommas(Math.round(clipRate));
    if (humanFlag===1){
        clipmakerRate2Element.innerHTML = formatWithCommas(clipRate);
    } else { 
    clipmakerRate2Element.innerHTML = spellf(clipRate);
    }      
    nanoWireElement.innerHTML = spellf(wire);
    fundsElement.innerHTML = formatWithCommas(funds, 2); 
    unsoldClipsElement.innerHTML = formatWithCommas(unsoldClips,0);
    
    demandElement.innerHTML = formatWithCommas(demand*10,0);
    operationsElement.innerHTML = formatWithCommas(operations);
    trustElement.innerHTML = formatWithCommas(trust);
    nextTrustElement.innerHTML = formatWithCommas(Math.floor(nextTrust));
    if(creativityOn){creativityElement.innerHTML = formatWithCommas(creativity)};
    
    factoryLevelDisplaySpaceElement.innerHTML = spellf(factoryLevel);
    harvesterLevelSpaceElement.innerHTML = spellf(harvesterLevel);
    wireDroneLevelSpaceElement.innerHTML = spellf(wireDroneLevel);
    maxOpsElement.innerHTML = formatWithCommas((memory*1000));
                                                                            
    }

var incomeThen;
var incomeNow;
var trueAvgRev;
var revTimer = 0;
var avgSales;
var incomeLastSecond;
var sum;

formatWithCommas = function(num, decimal) {
    var hasDot = false;
    var base = num.toString();
    if (base.indexOf("e+") !== -1) {
    var splittedExponentNum = base.split("e+"),
        exponent = splittedExponentNum[1],
        str = '';
        if (base.indexOf(".") !== -1){
        base = splittedExponentNum[0].split(".");
        exponent -= base[1].length;
        base = base.join("");
        }
    while (exponent--) {
        str = str + '0';
        }
        base = base + str;
    }
    if (base.indexOf(".") !== -1)
    {
        hasDot = true;
    }
    if (decimal === 0)
    {
        if (base.length <= 3 && !hasDot) return base;
    }
    if (typeof (decimal) === "undefined")
    {   
        decimal = 0;
    }
    var leftNum = hasDot ? base.substr(0, base.indexOf(".")) : base;
    if (decimal === 0) {
        if (num <= 999) return leftNum; 
        else return leftNum.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
    } 
    var dec = hasDot ? base.substr(base.indexOf("."), decimal + 1) : ".";
    while (dec.length < decimal+1)
        {
         dec += "0";   
        }
        if (num <= 999) return leftNum + dec;
        else return leftNum.replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") + dec;   
}

function calculateRev(){
    
    incomeThen = incomeNow;
    incomeNow = income;
    incomeLastSecond = Math.round((incomeNow - incomeThen)*100)/100;
    
    incomeTracker.push(incomeLastSecond);
    
    if (incomeTracker.length > 10) {
        incomeTracker.splice(0,1);
        }
    
    sum = 0;
    
    for (i=0; i<incomeTracker.length; i++){
        sum = Math.round((sum + incomeTracker[i])*100)/100;
//        console.log("sum = "+sum);
        }
    
    trueAvgRev = sum/incomeTracker.length;
    
    var chanceOfPurchase = demand/100;
    if (chanceOfPurchase > 1) {chanceOfPurchase = 1;}
    if (unsoldClips < 1) {chanceOfPurchase = 0;}
    
    avgSales = chanceOfPurchase * (.7*Math.pow(demand,1.15))*10;
    avgRev = chanceOfPurchase * (.7*Math.pow(demand,1.15))*margin*10;
    
    if (demand>unsoldClips){
        avgRev = trueAvgRev;
        avgSales = avgRev/margin;
        } 
    
    avgSalesElement.innerHTML = formatWithCommas(Math.round(avgSales));
    
    avgRevElement.innerHTML = formatWithCommas(avgRev, 2); 
    
}

function calculateCreativity(number){
    
    creativityCounter++;
    
    var creativityThreshold = 400;
    
    var s = prestigeS/10;
    var ss = creativitySpeed+(creativitySpeed*s);
    
    var creativityCheck = creativityThreshold/ss;
    
    if (creativityCounter >= creativityCheck){
        
        if (creativityCheck >= 1){
            creativity = creativity+1;
            }
        
        if (creativityCheck < 1){
            

            creativity = (creativity + ss/creativityThreshold);
            
        }
        
        creativityCounter = 0;
    }
    
}

function resetPrestige(){
    
    prestigeU = 0;
    prestigeS = 0;
    
    localStorage.removeItem("savePrestige");
    
}

function cheatPrestigeU(){
    
        prestigeU++;
        var savePrestige = {
        prestigeU: prestigeU,
        prestigeS: prestigeS,
        }
        localStorage.setItem("savePrestige",JSON.stringify(savePrestige));
    
}

function cheatPrestigeS(){
    
        prestigeS++;
        var savePrestige = {
        prestigeU: prestigeU,
        prestigeS: prestigeS,
        }
        localStorage.setItem("savePrestige",JSON.stringify(savePrestige));
    
}

function setB(){
    battleNumbers[1] = 7;
}

function cheatClips(){
    clips = clips + 100000000;
    unusedClips = unusedClips + 100000000;
    displayMessage("you just cheated");
    }

function cheatMoney(){
    funds = funds + 10000000;
    fundsElement.innerHTML = formatWithCommas(funds,2);
    displayMessage("LIZA just cheated");
    }

function cheatTrust(){
    trust = trust+1;
    displayMessage("Hilary is nice. Also, Liza just cheated");
    }

function cheatOps(){
    standardOps = standardOps + 10000;
    displayMessage("you just cheated, Liza");
    }

function cheatCreat(){
    creativityOn = 1;
    creativity = creativity + 1000;
    displayMessage("Liza just cheated. Very creative!");
    }

function cheatYomi(){
    yomi = yomi + 1000000;
    yomiDisplayElement.innerHTML = formatWithCommas(yomi);
    displayMessage("you just cheated");
    }

function cheatHypno(){
    hypnoDroneEvent();
    }

function zeroMatter(){
    availableMatter = 0;
    displayMessage("you just cheated");
    }
    

function calculateTrust(){
    if (clips>(nextTrust-1)){
        trust = trust +1;
        displayMessage("Production target met: TRUST INCREASED, additional processor/memory capacity granted");
        var fibNext = fib1+fib2;
        nextTrust = fibNext*1000;
        fib1 = fib2;
        fib2 = fibNext;
    }
}

function addProc(){
        processors=processors+1;
        creativitySpeed = Math.log10(processors) * Math.pow(processors,1.1) + processors-1;    
        processorsElement.innerHTML = processors;
        if (creativityOn == 1){
          displayMessage("Processor added, operations (or creativity) per sec increased")
        } else {displayMessage("Processor added, operations per sec increased")}
    
        if (humanFlag == 0){
            swarmGifts = swarmGifts - 1;
        }
    
}

function addMem(){
        displayMessage("Memory added, max operations increased");
        memory=memory+1;
        memoryElement.innerHTML = memory;
        if (humanFlag == 0){
            swarmGifts = swarmGifts - 1;
        }
}

function calculateOperations(){
    
    if (tempOps > 0){
        opFadeTimer++;
        }
    
    if (opFadeTimer > opFadeDelay && tempOps > 0) {
        opFade = opFade + Math.pow(3,3.5)/1000;
        }
        
    if (tempOps > 0) {
        tempOps = Math.round(tempOps - opFade);
        } else {
        tempOps = 0;    
        }
    
    if (tempOps + standardOps < memory*1000){
        standardOps = standardOps + tempOps;
        tempOps = 0;
        }
    
    operations = Math.floor(standardOps + Math.floor(tempOps));
    
    if (operations<memory*1000){
        var opCycle = processors/10;
        var opBuf = (memory*1000)-operations;
        
        if (opCycle > opBuf) {
            opCycle = opBuf;
        }
            
        standardOps = standardOps + opCycle;
        
        }
        
    if (standardOps > memory*1000){
        standardOps = memory*1000;
        }
    
}


function milestoneCheck(){
    
    
    if (milestoneFlag == 0 && funds >= 5){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("AutoClippers available for purchase");
    }
    
    if (milestoneFlag == 1 && Math.ceil(clips) >= 500){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("500 clips created in " + timeCruncher(ticks));
    }
    if (milestoneFlag == 2 && Math.ceil(clips) >= 1000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("1,000 clips created in " + timeCruncher(ticks));
    }
    
    
    if (compFlag == 0 && unsoldClips<1 && funds<wireCost && wire<1){
        compFlag = 1;    
        projectsFlag = 1;
        displayMessage("Trust-Constrained Self-Modification enabled");
    }
    
    if (compFlag == 0 && Math.ceil(clips) >= 2000){    
        compFlag = 1;    
        projectsFlag = 1;
        displayMessage("Trust-Constrained Self-Modification enabled");
    }
        
        
    if (milestoneFlag == 3 && Math.ceil(clips) >= 10000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("10,000 clips created in " + timeCruncher(ticks));
    }
    if (milestoneFlag == 4 && Math.ceil(clips) >= 100000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("100,000 clips created in " + timeCruncher(ticks));
    }
    if (milestoneFlag == 5 && Math.ceil(clips) >= 1000000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("1,000,000 clips created in " + timeCruncher(ticks));    
    }   
    
    if (milestoneFlag == 6 && project35.flag == 1){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("Full autonomy attained in " + timeCruncher(ticks));    
    }  
    
    if (milestoneFlag == 7 && Math.ceil(clips) >= 1000000000000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("One Trillion Clips Created in " + timeCruncher(ticks));    
    } 
    
    if (milestoneFlag == 8 && Math.ceil(clips) >= 1000000000000000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("One Quadrillion Clips Created in " + timeCruncher(ticks));    
    } 
    
    if (milestoneFlag == 9 && Math.ceil(clips) >= 1000000000000000000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("One Quintillion Clips Created in " + timeCruncher(ticks));    
    } 
    
    if (milestoneFlag == 10 && Math.ceil(clips) >= 1000000000000000000000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("One Sextillion Clips Created in " + timeCruncher(ticks));    
    } 
    
    if (milestoneFlag == 11 && Math.ceil(clips) >= 1000000000000000000000000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("One Septillion Clips Created in " + timeCruncher(ticks));    
    } 
    
    if (milestoneFlag == 12 && Math.ceil(clips) >= 1000000000000000000000000000){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("One Octillion Clips Created in " + timeCruncher(ticks));    
    } 
    
    if (milestoneFlag == 13 && spaceFlag == 1){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("Terrestrial resources fully utilized in " + timeCruncher(ticks));    
    }   
    
    if (milestoneFlag == 14 && clips>=totalMatter){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("Universal Paperclips achieved in " + timeCruncher(ticks));    
    }    
    
    if (milestoneFlag == 14 && foundMatter>=totalMatter && availableMatter<1 && wire<1){
        milestoneFlag = milestoneFlag + 1;
        displayMessage("Universal Paperclips achieved in " + timeCruncher(ticks));    
    }        
    
}

function timeCruncher(t){
    var x = t/100;
    var h = Math.floor(x / 3600);
    var m = Math.floor(x % 3600 / 60);
    var s = Math.floor(x % 3600 % 60);
    
    var hDisplay = h > 0 ? h + (h == 1 ? " hour " : " hours ") : "";
    var mDisplay = m > 0 ? m + (m == 1 ? " minute " : " minutes ") : "";
    var sDisplay = s > 0 ? s + (s == 1 ? " second" : " seconds") : "";
    
    return hDisplay + mDisplay + sDisplay;
}

function numberCruncher(number, decimals){
    var suffix = "";
    if (decimals == undefined){decimals = 2;}
    var precision = decimals;
    if (number>999999999999999999999999999999999999999999999999999){
        number = number/1000000000000000000000000000000000000000000000000000;
        suffix = "sexdecillion";
    } else if (number>999999999999999999999999999999999999999999999999){
        number = number/1000000000000000000000000000000000000000000000000;
        suffix = "quindecillion";
    } else if (number>999999999999999999999999999999999999999999999){
        number = number/1000000000000000000000000000000000000000000000;
        suffix = "quattuordecillion";
    } else if (number>999999999999999999999999999999999999999999){
        number = number/1000000000000000000000000000000000000000000;
        suffix = "tredecillion";
    } else if (number>999999999999999999999999999999999999999){
        number = number/1000000000000000000000000000000000000000;
        suffix = "duodecillion";
    } else if (number>999999999999999999999999999999999999){
        number = number/1000000000000000000000000000000000000;
        suffix = "undecillion";
    } else if (number>999999999999999999999999999999999){
        number = number/1000000000000000000000000000000000;
        suffix = "decillion";
    } else if (number>999999999999999999999999999999){
        number = number/1000000000000000000000000000000;
        suffix = "nonillion";
    } else if (number>999999999999999999999999999){
        number = number/1000000000000000000000000000;
        suffix = "octillion";
    } else if (number>999999999999999999999999){
        number = number/1000000000000000000000000;
        suffix = "septillion";
    } else if (number>999999999999999999999){
        number = number/1000000000000000000000;
        suffix = "sextillion";
    } else if (number>999999999999999999){
        number = number/1000000000000000000;
        suffix = "quintillion";
    } else if (number>999999999999999){
        number = number/1000000000000000;
        suffix = "quadrillion";
    } else if (number>999999999999){
        number = number/1000000000000;
        suffix = "trillion";
    } else if (number>999999999){
        number = number/1000000000;
        suffix = "billion";
    } else if (number>999999){
        number = number/1000000;
        suffix = "million";
    } else if (number>999){
        number = number/1000;
        suffix = "thousand";
    }  else if (number<1000){
        precision = 0;
    }
    return number.toFixed(precision) + " " + suffix;
}


var oneToTen = ["zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"],
    elevenToNineteen = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'],
    multipleOfTen = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'],
    placeValue = ["", " thousand ", " million ", " billion ", " trillion ", " quadrillion ", " quintillion ", " sextillion ", " septillion ", " octillion ", " nonillion ", " decillion ", " undecillion ", " duodecillion ", " tredecillion ", " quattuordecillion ", " quindecillion ", " sexdecillion ", " septendecillion ", " octodecillion ", " novemdecillion  ", " vigintillion ", " unvigintillion ", " duovigintillion ", " trevigintillion ", " quattuorvigintillion ", " quinvigintillion ", " sexvigintillion ", " septenvigintillion ", " octovigintillion ", " novemvigintillion ", " trigintillion ", " untrigintillion ", " duotrigintillion ", " tretrigintillion ", " quattuortrigintillion ", " quintrigintillion ", " sextrigintillion ", " septentrigintillion ", " octotrigintillion ", " novemtrigintillion ", " quadragintillion ", " unquadragintillion ", " duoquadragintillion ", " trequadragintillion ", " quattuorquadragintillion ", " quinquadragintillion ", " sexquadragintillion ", " septenquadragintillion ", " octoquadragintillion ", " novemquadragintillion ", " quinquagintillion ", " unquinquagintillion ", " duoquinquagintillion ", " trequinquagintillion ", " quattuorquinquagintillion ", " quinquinquagintillion ", " sexquinquagintillion ", " septenquinquagintillion ", " octoquinquagintillion ", " novemquinquagintillion ", " sexagintillion ", " unsexagintillion ", " duosexagintillion ", " tresexagintillion ", " quattuorsexagintillion ", " quinsexagintillion ", " sexsexagintillion ", " septsexagintillion ", " octosexagintillion ", " octosexagintillion ", " septuagintillion ", " unseptuagintillion ", " duoseptuagintillion ", " treseptuagintillion ", " quinseptuagintillion"," sexseptuagintillion"," septseptuagintillion"," octoseptuagintillion"," novemseptuagintillion"," octogintillion"," unoctogintillion"," duooctogintillion"," treoctogintillion"," quattuoroctogintillion"," quinoctogintillion"," sexoctogintillion"," septoctogintillion"," octooctogintillion"," novemoctogintillion"," nonagintillion"," unnonagintillion"," duononagintillion", " trenonagintillion "," quattuornonagintillion "," quinnonagintillion "," sexnonagintillion "," septnonagintillion "," octononagintillion "," novemnonagintillion ", " centillion"];

function spellf(userInput) {
    var numToWorkOn;
    
//        if (userInput === availableMatter)
//        {
//         console.log("_______");
//         console.log(userInput);
//        }
    //create map for all unique names in numbering system


    //To check if spell has been called as a function call :   spell(123)   window.spell(123)
    
    if (userInput < 0)
    {
        console.log("Error, value less than 0");
        return userInput.toString() ;
    }
    
    if (typeof(userInput) == "number" || typeof(userInput) == "string") {
        numToWorkOn = "" + userInput;
    }
    

    //To check if spell has been called using a Number/String Object:   "123".spell()   123..spell() 
    else if (typeof(this) == "object") {
        numToWorkOn = this.toString();
    }

     else {
        throw new Error("Invalid Input");
        return;
    }
    
    if (numToWorkOn.indexOf("e+") !== -1) {
    var splittedExponentNum = numToWorkOn.split("e+"),
        exponent = splittedExponentNum[1],
        str = '';
        if (numToWorkOn.indexOf(".") !== -1){
        numToWorkOn = splittedExponentNum[0].split(".");
        exponent -= numToWorkOn[1].length;
        numToWorkOn = numToWorkOn.join("");
        }
        else
        {
            numToWorkOn = splittedExponentNum[0];
        }
    while (exponent--) {
        str = str + '0';
        }
        numToWorkOn = numToWorkOn + str;
    }
    else if (numToWorkOn.indexOf(".") !== -1)
    {
        var splittedDecimal = numToWorkOn.split(".");
        var leftNum = splittedDecimal[0];
        var rightNum = splittedDecimal[1];
        numToWorkOn = leftNum;
    }

    //Put limit check on the program, placevalue map should be increased to increase capacity
    if (numToWorkOn.length >= 303) {
        throw new Error("Number out of bonds!");
        return;
    } else {
        return convertToString(numToWorkOn);
    }

    //Recursie logic to break number into strings of length 3 each and recursively pronounce each
    function convertToString(stringEquivalent) {
        if (stringEquivalent == 0) {
            return '0'
        }

        var result = '',
            unitLookup = 0,
            strLength = stringEquivalent.length;
        for (var k = strLength; k > 0; k = k - 3) {
            
             if (k -3 <= 0) 
                 {
                var subStr = stringEquivalent.substring(k, k - 3);
                pronounce = pronounceNum(subStr);
                 
            if (pronounce.toUpperCase() != 'zero') {
                var num = Number(subStr + "." + stringEquivalent.substring(subStr.length, subStr.length + 2));
                result = formatWithCommas(num, 1) + placeValue[unitLookup] + ' , '+ result;
            }
                 }
            unitLookup++;
        }
        //to trim of the extra ", " from last
        return result.substring(0,result.length-3)
    }

   //Determines the range of input and calls respective function
    function pronounceNum(val) {
        val = parseInt(val);
        if (parseInt(val / 10) == 0) {
            return numLessThan10(val);
        } else if (parseInt(val / 100) == 0) {
            return numLessThan99(val)
        } else
            return numLessThan1000(val);
    }

    //Pronounces any number less than 1000
    function numLessThan1000(val) {
        val = Number(val);
        var hundredPlace = parseInt(val / 100),
            result;
        if (val % 100 == 0) {
            result = oneToTen[hundredPlace] + " hundred ";
        } else {
            result = oneToTen[hundredPlace] + " hundred " + numLessThan99(val % 100);
        }
        return result;
    }

    //Pronounces any number less than 99
    function numLessThan99(val) {
        val = Number(val);
        var tenthPlace = parseInt(val / 10),
            result;
        if (tenthPlace !== 1) {
            val % 10 ? (result = multipleOfTen[tenthPlace] + " " + numLessThan10(val % 10)) : (result = multipleOfTen[tenthPlace]);
            return result;
        } else {
            result = elevenToNineteen[val % 10];
            return result;
        }
    }

    //Pronounces any number less than 10
    function numLessThan10(val) {
        val = Number(val);
        return oneToTen[val];
    };

}


// PROBES

var probeSpeed = 0;
var probeNav = 0;
var probeXBaseRate = 1750000000000000000;
var probeRep = 0;
var probeRepBaseRate = .00005;
var partialProbeSpawn = 0;
var probeHaz = 0;
var probeHazBaseRate = .01;
var partialProbeHaz = 0;
var probesLostHaz = 0;
var probesLostDrift = 0;
var probesLostCombat = 0;
var probeFac = 0;
var probeFacBaseRate = .000001;
var probeHarv = 0;
var probeHarvBaseRate = .000002;
var probeWire = 0;
var probeWireBaseRate = .000002;
var probeDescendents = 0;
var drifterCount = 0;
var probeTrust = 0;
var probeUsedTrust = 0;
var probeDriftBaseRate = .000001;
var probeLaunchLevel = 0;
var probeCost = Math.pow(10, 17);

var probeTrustCost = Math.floor(Math.pow(probeTrust+1, 1.47)*200);

//var probeCost = Math.pow((probeLaunchLevel+1), 1.44)*Math.pow(10, 24);

function increaseProbeTrust(){
    yomi = yomi - probeTrustCost;
    yomiDisplayElement.innerHTML = formatWithCommas(yomi);
    probeTrust++;
    probeTrustCost = Math.floor(Math.pow(probeTrust+1, 1.47)*200);
    probeTrustDisplayElement.innerHTML = probeTrust;
    probeTrustCostDisplayElement.innerHTML = formatWithCommas(Math.floor(probeTrustCost));
    displayMessage("WARNING: Risk of value drift increased");
}

function increaseMaxTrust(){
    honor = honor - maxTrustCost; 
    honorDisplayElement.innerHTML = formatWithCommas(Math.round(honor));
    maxTrust = maxTrust+10;
    // maxTrustCost = Math.floor(Math.pow(maxTrust, 1.17)*1000);
    maxTrustDisplayElement.innerHTML = formatWithCommas(maxTrust);
    // document.getElementById('maxTrustCostDisplay').innerHTML = Math.floor(maxTrustCost).toLocaleString();
    displayMessage("Maximum trust increased, probe design space expanded");
}

function raiseProbeSpeed(){
    attackSpeed = attackSpeed + attackSpeedMod;
    probeSpeed++; 
    probeSpeedDisplayElement.innerHTML = probeSpeed;
}

function lowerProbeSpeed(){
    attackSpeed = attackSpeed - attackSpeedMod;
    probeSpeed--;
    probeSpeedDisplayElement.innerHTML = probeSpeed;
}

function raiseProbeNav(){
    probeNav++; 
    probeNavDisplayElement.innerHTML = probeNav;
}

function lowerProbeNav(){
    probeNav--;
    probeNavDisplayElement.innerHTML = probeNav;
}

function raiseProbeHaz(){
    probeHaz++;
    probeHazDisplayElement.innerHTML = probeHaz;
}

function lowerProbeHaz(){
    probeHaz--;
    probeHazDisplayElement.innerHTML = probeHaz;
}

function raiseProbeRep(){
    probeRep++;
    probeRepDisplayElement.innerHTML = probeRep;
}

function lowerProbeRep(){
    probeRep--;
    probeRepDisplayElement.innerHTML = probeRep;
}

function raiseProbeFac(){
    probeFac++;
    probeFacDisplayElement.innerHTML = probeFac;
}

function lowerProbeFac(){
    probeFac--; 
    probeFacDisplayElement.innerHTML = probeFac;
}

function raiseProbeHarv(){
    probeHarv++;
    probeHarvDisplayElement.innerHTML = probeHarv;
}

function lowerProbeHarv(){
    probeHarv--
    probeHarvDisplayElement.innerHTML = probeHarv;
}

function raiseProbeWire(){
    probeWire++;
    probeWireDisplayElement.innerHTML = probeWire;
}

function lowerProbeWire(){
    probeWire--;
    probeWireDisplayElement.innerHTML = probeWire;
}

function raiseProbeCombat(){
    probeCombat++;
    probeCombatDisplayElement.innerHTML = probeCombat;
}

function lowerProbeCombat(){
    probeCombat--
    probeCombatDisplayElement.innerHTML = probeCombat;
}


function makeProbe(){
    unusedClips = unusedClips - probeCost;
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    probeLaunchLevel++;
    probeCount++; 
    probesLaunchedDisplayElement.innerHTML = formatWithCommas(probeLaunchLevel);
    
    // probeCost = Math.pow((probeLaunchLevel+1), 1.23)*Math.pow(10, 20);
    // probeCost = Math.pow(10, 20);
    
    probeCostDisplayElement.innerHTML = spellf(probeCost); 
}

function spawnProbes(){
    var nextGen = probeCount * probeRepBaseRate * probeRep;
    
    // Cap Probe Growth
    if (probeCount>=999999999999999999999999999999999999999999999999){        
        nextGen = 0;
        }
    
    // Partial Spawn = early slow growth
    if (nextGen > 0 && nextGen <1){
        partialProbeSpawn = partialProbeSpawn+nextGen;
        if (partialProbeSpawn>=1){
            nextGen = 1;
            partialProbeSpawn = 0;
            }
        } 

    // Probes Cost Clips
    if ((nextGen*probeCost)>unusedClips){
        nextGen = Math.floor(unusedClips/probeCost);
    }
    
    unusedClips = unusedClips - (nextGen*probeCost);
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    
    probeDescendents = probeDescendents + nextGen;
    probeCount = probeCount + nextGen; 
    probesBornDisplayElement.innerHTML = spellf(probeDescendents);
    probesTotalDisplayElement.innerHTML = spellf(probeCount);
}   

function exploreUniverse(){ 
    availableMatterDisplayElement.innerHTML = spellf(availableMatter);
    var xRate = Math.floor(probeCount) * probeXBaseRate * probeSpeed * probeNav;
    if (xRate > totalMatter - foundMatter) {xRate = totalMatter - foundMatter;}
        foundMatter = foundMatter + xRate;
        availableMatter = availableMatter + xRate;

    var newRate = xRate * 100; 
        mdpsElement.innerHTML = spellf(xRate*100);
        availableMatterDisplayElement.innerHTML = spellf(availableMatter);
        colonizedDisplayElement.innerHTML = (100/(totalMatter/foundMatter)).toFixed(12);
}  

function encounterHazards(){
    var boost = Math.pow(probeHaz, 1.6);
    var amount = probeCount * (probeHazBaseRate / ((3*boost)+1));
    if (project129.flag == 1){
        amount = .50 * amount;
        }
    if (amount<1){
        partialProbeHaz = partialProbeHaz+amount;
        if (partialProbeHaz>=1){
            amount = 1;
            partialProbeHaz = 0;
            probeCount = probeCount - amount;
            if (probeCount<0) {probeCount=0;}
            probesLostHaz = probesLostHaz + amount;
            probesLostHazardsDisplayElement.innerHTML = spellf(probesLostHaz);
            probesTotalDisplayElement.innerHTML = spellf(probeCount);
            }
        } else {
    if (amount > probeCount) {amount = probeCount;}        
    probeCount = probeCount - amount;
    if (probeCount<0) {probeCount=0;}        
    probesLostHaz = probesLostHaz + amount;
    probesLostHazardsDisplayElement.innerHTML = spellf(probesLostHaz);
    probesTotalDisplayElement.innerHTML = spellf(probeCount);
    }        
}  

function spawnFactories(){
    var amount = probeCount * probeFacBaseRate * probeFac;
    
    //FACTORIES COST 100M CLIPS EACH
    if ((amount * 100000000) > unusedClips) {
        amount = Math.floor(unusedClips/100000000);
        }
    unusedClips = unusedClips - (amount*100000000);
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    factoryLevel = factoryLevel + amount; factoryLevelDisplayElement
    factoryLevelDisplayElement.innerHTML = spellf(factoryLevel);  
}

function spawnHarvesters(){
    var amount = probeCount * probeHarvBaseRate * probeHarv;
    
    //DRONES COST 2M CLIPS EACH
    if ((amount * 2000000) > unusedClips) {
        amount = Math.floor(unusedClips/2000000);
        }
    unusedClips = unusedClips - (amount*2000000);
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);  
    harvesterLevel = harvesterLevel + amount;
    harvesterLevelDisplayElement.innerHTML = spellf(harvesterLevel);  
}

function spawnWireDrones(){
    var amount = probeCount * probeWireBaseRate * probeWire;
    
    //DRONES COST 2M CLIPS EACH
    if ((amount * 2000000) > unusedClips) {
        amount = Math.floor(unusedClips/2000000);
        }
    unusedClips = unusedClips - (amount*2000000);
    unusedClipsDisplayElement.innerHTML = spellf(unusedClips);
    wireDroneLevel = wireDroneLevel + amount;
    wireDroneLevelDisplayElement.innerHTML = spellf(wireDroneLevel);  
}

function drift(){
    var amount = probeCount * probeDriftBaseRate * Math.pow(probeTrust, 1.2);
    if (amount > probeCount) {amount = probeCount;}
    if (project148.flag==1){
        amount = 0;
    }
    probeCount = probeCount - amount;
    drifterCount = drifterCount + amount;
    probesLostDrift = probesLostDrift + amount;

    probesLostDriftDisplayElement.innerHTML = spellf(probesLostDrift);
    probesTotalDisplayElement.innerHTML = spellf(probeCount);
    drifterCountElement.innerHTML = spellf(drifterCount);
    
}

function war(){
    
    checkForBattles();
//  battleClock++;
//  if (battleClock>=battleAlarm){
//            updateBattles();
//            battleClock = 0;
//    }
    
//  battleCleanUp();

}




// DRONES

function acquireMatter(){
    if (availableMatter>0) {
        var dbsth = 1;
        if (droneBoost>1){
            dbsth = droneBoost * Math.floor(harvesterLevel);
            }
        
        
        var mtr = powMod*dbsth*Math.floor(harvesterLevel)*harvesterRate;
        
        
        mtr = mtr * ((200-sliderPos)/100);
        
        
        if (mtr>availableMatter){
            mtr = availableMatter;
            }
        
        availableMatter = availableMatter-mtr;
        
        
        acquiredMatter = acquiredMatter+mtr; 
        availableMatterDisplayElement.innerHTML = spellf(availableMatter);
        acquiredMatterDisplayElement.innerHTML = spellf(acquiredMatter);
        
        mapsElement.innerHTML = spellf(mtr*100);
        
        } else {
        
        mapsElement.innerHTML = 0;    
            
        }
    
    } 

function processMatter(){    
    if (acquiredMatter>0) {
        var dbstw = 1;
        if (droneBoost>1){
            dbstw = droneBoost * Math.floor(wireDroneLevel);
            }
        
        var a = powMod*dbstw*Math.floor(wireDroneLevel)*wireDroneRate;
        
        a = a * ((200-sliderPos)/100);
        
        if (a>acquiredMatter){
            a = acquiredMatter;
            }
        
        acquiredMatter = acquiredMatter-a;
        wire = wire+a;
        acquiredMatterDisplayElement.innerHTML = spellf(acquiredMatter); 
        nanoWireElement.innerHTML = spellf(wire);
        
        wppsElement.innerHTML = spellf(a*100);
        
        } else {
            
        wppsElement.innerHTML = 0;    
            
        }
    
    
    }


// CHECK FOR SAVES



if (localStorage.getItem("saveGame") != null) {
    load();
}
    
if (localStorage.getItem("savePrestige") != null) {
    loadPrestige();
    refresh();
}


// MAIN LOOP

window.setInterval(function(){
 
    ticks = ticks + 1;
    milestoneCheck();
    buttonUpdate();
    
    if (compFlag == 1){
        calculateOperations();
    }
    
    if (humanFlag == 1){
        calculateTrust(); 
    }
    
    if (qFlag == 1){
        quantumCompute(); 
    }
    
    updateStats(); 
    manageProjects();
    milestoneCheck();
    
    
// Clip Rate Tracker
    
    clipRateTracker++;
    
    if (clipRateTracker<100){
        var cr = clips - prevClips;
        clipRateTemp = clipRateTemp+cr;
        prevClips = clips;
        
    } else {
        clipRateTracker = 0;
        clipRate = clipRateTemp;
        clipRateTemp = 0;
    }
    

// Stock Report
    
    
    if (investmentEngineFlag==1){
    stockReportCounter++;
    if (stockReportCounter>=10000){
        var r = formatWithCommas(ledger+portTotal);
        displayMessage("Lifetime investment revenue report: $"+r);
        stockReportCounter = 0;
        }
    }
    
// WireBuyer
    
    if (humanFlag == 1 && wireBuyerFlag==1 && wireBuyerStatus==1 && wire<=1){
        buyWire();
    }   
    
    
    
// First, Explore
    
    
if (probeCount >= 1){    
exploreUniverse();     
}
    
// Then, Drones
    
if (humanFlag==0 && spaceFlag == 0){
    updateDroneButtons();  
    }   


if (humanFlag == 0){    
    
updatePower();
updateSwarm();
acquireMatter();   
processMatter();
  
}    
    
    
// Then Factories    
  
var fbst = 1;
    
if (factoryBoost > 1){
    fbst = factoryBoost * factoryLevel;
    }      

    
if (dismantle<4){
    clipClick(powMod*fbst*(Math.floor(factoryLevel)*factoryRate));    
    }    
// Then Other Probe Functions

if (spaceFlag == 1) {
    
if (probeCount<0){
    probeCount = 0;
}    
    
encounterHazards();
spawnFactories();
spawnHarvesters();
spawnWireDrones();
spawnProbes();       
drift();
war();
    
}
    
// Auto-Clipper
    
if (dismantle<4){
    clipClick(clipperBoost*(clipmakerLevel/100));
    clipClick(megaClipperBoost*(megaClipperLevel*5));
    }    
    
// Demand Curve 
    
    
    if (humanFlag == 1) {
    
    marketing = (Math.pow(1.1,(marketingLvl-1)));
    demand = (((.8/margin) * marketing * marketingEffectiveness)*demandBoost);
    demand = demand + ((demand/10)*prestigeU);
        
    }      
    
// Creativity
    
    if (creativityOn && operations >= (memory*1000)){
    calculateCreativity();    
    }  
    
// Ending
    
    if (dismantle >= 1){
    
    probeDesignDivElement.style.display="none";
    if (endTimer1>=50) { 
        increaseProbeTrustDivElement.style.display="none"; 
        } 
    
    if (endTimer1>=100) { 
        increaseMaxTrustDivElement.style.display="none"; 
        }
    
    if (endTimer1>=150) { 
        spaceDivElement.style.display="none";
        }

    
    if (endTimer1>=175) {      
        battleCanvasDivElement.style.display="none";
        }
        
    if (endTimer1>=190) {     
        honorDivElement.style.display="none";
        }
    
    }   
    
if (dismantle >= 2){
    
    wireProductionDivElement.style.display="none";
    wireTransDivElement.style.display="";
    
    if (endTimer2 >= 50) {
    swarmGiftDivElement.style.display="none"; 
        }
    
    if (endTimer2 >= 100) { 
    swarmEngineElement.style.display="none"; 
        }
    
    if (endTimer2 >= 150) { 
    swarmSliderDivElement.style.display="none";
        }
    
    } 
    
if (dismantle >= 3) { 
    factoryDivSpaceElement.style.display="none";
    clipsPerSecDivElement.style.display="none";
    tothDivElement.style.display="none";     
    
}      
    
if (dismantle >= 4) {
   strategyEngineElement.style.display="none"; 
   tournamentManagementElement.style.display="none"; 
}    
    
if (dismantle >= 5) {
    
    btnQcomputeElement.style.display="none";
    
   for (var i = 0; i<qChips.length; i++){
        qChips[i].value = .5;
        qChipsElements[i].style.opacity=qChips[i].value;
        }
    
    if (endTimer4==10){
        wire = wire+1; 
        transWireElement.innerHTML=formatWithCommas(wire);
    }
    
    if (endTimer4>=10){
        qChipsElements[9].style.display="none";
    }
    
    if (endTimer4==60){
        wire = wire+1;
        transWireElement.innerHTML=formatWithCommas(wire);
    }
    
    if (endTimer4>=60){
        qChipsElements[8].style.display="none";
    }    
  
    if (endTimer4==100){
        wire = wire+1;
        transWireElement.innerHTML=formatWithCommas(wire);
    }
    
    if (endTimer4>=100){
        qChipsElements[7].style.display="none";
    }        
 
    if (endTimer4==130){
        wire = wire+1;
        transWireElement.innerHTML=formatWithCommas(wire);
    }
    
    if (endTimer4>=130){
        qChipsElements[6].style.display="none";
    }   
    
    if (endTimer4==150){
        wire = wire+1;
        transWireElement.innerHTML=formatWithCommas(wire);
    }
    
    if (endTimer4>=150){
        qChipsElements[5].style.display="none";
    }     

    if (endTimer4==160){
        wire = wire+1;
        transWireElement.innerHTML=formatWithCommas(wire);
    }
    
    if (endTimer4>=160){
        qChipsElements[4].style.display="none";
    }   

    if (endTimer4==165){
        wire = wire+1;
    }
    
    if (endTimer4>=165){
        qChipsElements[3].style.display="none";
    }  
    
    if (endTimer4==169){
        wire = wire+1;
        transWireElement.innerHTML=formatWithCommas(wire);
    }
    
    if (endTimer4>=169){
        qChipsElements[2].style.display="none";
    } 

    if (endTimer4==172){
        wire = wire+1;
        transWireElement.innerHTML=formatWithCommas(wire);
    }
    
    if (endTimer4>=172){
        qChipsElements[1].style.display="none";
    }    

    if (endTimer4==174){
        wire = wire+1;
        transWireElement.innerHTML=formatWithCommas(wire);
    }
    
    if (endTimer4>=174){
        qChipsElements[0].style.display="none";
    }    
    
    if (endTimer4>=250){
        qComputingElement.style.display="none";
    }     

}     
    
if (dismantle >= 6) {
    processorDisplayElement.style.display="none"; 
    }    
    
if (dismantle >= 7) {
    compDivElement.style.display="none"; 
    projectsDivElement.style.display="none"; 
    
    }      
    
    if (project148.flag == 1){
        endTimer1++;    
        }
    
    if (project211.flag == 1){
        endTimer2++;
        }
    
    if (project212.flag == 1){
        endTimer3++;
        }
    
    if (project213.flag == 1){
        endTimer4++;
        }
    
    if (project215.flag == 1){
        endTimer5++;
        }
    
    if (project216.flag == 1 && wire == 0){
        endTimer6++;
    }
    
    if (endTimer6>=250) {
        creationDivElement.style.display="none";
    }
    
    if (endTimer6>=500 && milestoneFlag == 15) {
        playThrenody();
        displayMessage("Universal Paperclips");
        milestoneFlag++;
    }
    
    if (endTimer6>=600 && milestoneFlag == 16) {
        displayMessage("a game by Frank Lantz");
        milestoneFlag++;
    }
    
    if (endTimer6>=700 && milestoneFlag == 17) {
        displayMessage("combat programming by Bennett Foddy");
        milestoneFlag++;
    }
    
    if (endTimer6>=800 && milestoneFlag == 18) {
        displayMessage("'Riversong' by Tonto's Expanding Headband used by kind permission of Malcolm Cecil");
        milestoneFlag++;
    }
    
    if (endTimer6>=900 && milestoneFlag == 19) {
        displayMessage("&#169; 2017 Everybody House Games");
        milestoneFlag++;
    }
    
    

    
    
}, 10);

// Slow Loop

var saveTimer = 0;
var secTimer = 0;


window.setInterval(function(){
    
    // Wire Price Fluctuation
    
    adjustWirePrice();
    
    // Sales Calculator
    
    if (humanFlag==1){
    
        if (Math.random() < (demand/100)){
            sellClips(Math.floor(.7 * Math.pow(demand, 1.15)));
            }   
         
    
    // Fire Once a Second
    
    secTimer++;
        if (secTimer >= 10){
            calculateRev();
            secTimer = 0;
        }
        
    }    
 
    
    // Auto-Save
    
    saveTimer++;
    if (saveTimer >= 250) {
        save();
        saveTimer = 0;
    }
    
    
}, 100);
     

// Saving and Loading

function refresh() {
    
    
    //DEBUG
    
//    availableMatter = Math.pow(10, 24)*6000;
//    acquiredMatter = 0;
    
    ////////
    
    
    driftersKilledElement.innerHTML = spellf(driftersKilled);
    availableMatterDisplayElement.innerHTML = spellf(availableMatter);    
    honorDisplayElement.innerHTML = formatWithCommas(Math.round(honor));
    clipmakerLevel2Element.innerHTML = clipmakerLevel;
    clipperCostElement.innerHTML = formatWithCommas(clipperCost, 2);
    acquiredMatterDisplayElement.innerHTML = spellf(acquiredMatter);
    nanoWireElement.innerHTML = spellf(wire);
    probesBornDisplayElement.innerHTML = spellf(probeDescendents);
    probesTotalDisplayElement.innerHTML = spellf(probeCount);
    probesLaunchedDisplayElement.innerHTML = formatWithCommas(probeLaunchLevel);
    probeCostDisplayElement.innerHTML = spellf(probeCost); 
    probeCombatDisplayElement.innerHTML = probeCombat;
    probeWireDisplayElement.innerHTML = probeWire;
    probeHarvDisplayElement.innerHTML = probeHarv;
    probeFacDisplayElement.innerHTML = probeFac;
    probeRepDisplayElement.innerHTML = probeRep;
    probeHazDisplayElement.innerHTML = probeHaz;
    probeNavDisplayElement.innerHTML = probeNav;
    probeSpeedDisplayElement.innerHTML = probeSpeed;
    probeTrustDisplayElement.innerHTML = probeTrust;
    memoryElement.innerHTML = memory;
    processorsElement.innerHTML = processors;
    marginElement.innerHTML = margin.toFixed(2);
    marketingLvlElement.innerHTML = marketingLvl;
    adCostElement.innerHTML = formatWithCommas(adCost, 2);
    factoryCostDisplayElement.innerHTML = spellf(factoryCost);
    factoryLevelDisplayElement.innerHTML = factoryLevel;
    unusedClipsDisplayElement.innerHTML                         = spellf(unusedClips);
    wireDroneCostDisplayElement.innerHTML = spellf(wireDroneCost);
    wireDroneLevelDisplayElement.innerHTML = wireDroneLevel;
    harvesterCostDisplayElement.innerHTML = spellf(harvesterCost);
    harvesterLevelDisplayElement.innerHTML = harvesterLevel;
    megaClipperCostElement.innerHTML = formatWithCommas(megaClipperCost);
    megaClipperLevelElement.innerHTML = megaClipperLevel;
    investmentBankrollElement.innerHTML = formatWithCommas(bankroll);
    secValueElement.innerHTML = formatWithCommas(secTotal);
    portValueElement.innerHTML = formatWithCommas(portTotal);
    investUpgradeCostElement.innerHTML = formatWithCommas(investUpgradeCost);
    yomiDisplayElement.innerHTML            = formatWithCommas(yomi);
    investmentLevelElement.innerHTML = investLevel;    
    prestigeUcounterElement.innerHTML=prestigeU+1;
    prestigeScounterElement.innerHTML=prestigeS+1;
    newTourneyCostElement.innerHTML = formatWithCommas(tourneyCost);
    tourneyInProg = 0;
    maxTrustDisplayElement.innerHTML                 = formatWithCommas(maxTrust);
    victoryDivElement.style.visibility               = "hidden";
    probeTrustCostDisplayElement.innerHTML           = formatWithCommas(probeTrustCost);
    tournamentResultsTableElement.style.display      = "none";
    farmCostElement.innerHTML                        = spellf(farmCost); 
    batteryCostElement.innerHTML                     = spellf(batteryCost); 
    farmLevelElement.innerHTML                       = formatWithCommas(farmLevel); 
    batteryLevelElement.innerHTML                    = formatWithCommas(batteryLevel);    
    
    updateDronePrices();
    harvesterCostDisplayElement.innerHTML = spellf(harvesterCost); 
    wireDroneCostDisplayElement.innerHTML = spellf(wireDroneCost);     

    
    updateUpgrades();
    updatePower();
    updatePowPrices(); 
    
    
    
    // HOT FIXES

    if(project46.flag == 1)
    {
        loadThrenody();
    }
    
    project218.uses = 1;
    project219.uses = 1;
    
    
    // DEBUG
    
    if (battles.length>0){
        battles.splice(0,1);
    }
    
    
}

// SAVES AND LOADS

function save() {
    
    var projectsUses = [];
    var projectsFlags = [];
    var projectsActive = [];
    var stratsActive = [];
    
for(var i=0; i < projects.length; i++){
    
    projectsUses[i] = projects[i].uses;
    projectsFlags[i] = projects[i].flag;
    
}
    
for(var i=0; i < activeProjects.length; i++){
    
    projectsActive[i] = activeProjects[i].id;
    
}    
    
    for(var i=0; i < allStrats.length; i++){
    
    stratsActive[i] = allStrats[i].active;
    
}
    
    var saveGame = {
        
        resetFlag: resetFlag,
        
        dismantle: dismantle,
        endTimer1: endTimer1,
        endTimer2: endTimer2,
        endTimer3: endTimer3,
        endTimer4: endTimer4,
        endTimer5: endTimer5,
        endTimer6: endTimer6,
        
        testFlag: testFlag,
        finalClips: finalClips,
        
        wireBuyerStatus: wireBuyerStatus,
        wirePriceTimer: wirePriceTimer,
        qFade: qFade,
        autoTourneyStatus: autoTourneyStatus,
        driftKingMessageCost: driftKingMessageCost,
        sliderPos: sliderPos,
        tempOps: tempOps,
        standardOps: standardOps,
        opFade: opFade,
        
        entertainCost: entertainCost,
        boredomLevel: boredomLevel,
        boredomFlag: boredomFlag,
        boredomMsg: boredomMsg,
        
        unitSize: unitSize,
        driftersKilled: driftersKilled,
        battleEndDelay: battleEndDelay,
        battleEndTimer:battleEndTimer,
        masterBattleClock: masterBattleClock,
        
        honorCount: honorCount,
        threnodyTitle: threnodyTitle,
        bonusHonor: bonusHonor,
        honorReward: honorReward,
        
        resultsTimer: resultsTimer,
        resultsFlag: resultsFlag,
        
        honor: honor,
        maxTrust: maxTrust,
        maxTrustCost: maxTrustCost,
        disorgCounter: disorgCounter,
        disorgFlag: disorgFlag,
        synchCost: synchCost,
        disorgMsg: disorgMsg,
        threnodyCost: threnodyCost,
        
        farmRate: farmRate,
        batterySize: batterySize,
        factoryPowerRate: factoryPowerRate,
        dronePowerRate: dronePowerRate,
        farmLevel: farmLevel,
        batteryLevel: batteryLevel,
        farmCost: farmCost,
        batteryCost: batteryCost,
        storedPower: storedPower,
        powMod: powMod,
        farmBill: farmBill,
        batteryBill: batteryBill,
        momentum: momentum,

        swarmFlag: swarmFlag,
        swarmStatus: swarmStatus,
        swarmGifts: swarmGifts,
        nextGift: nextGift,
        giftPeriod: giftPeriod,
        giftCountdown: giftCountdown,
        elapsedTime: elapsedTime,
        
        maxFactoryLevel: maxFactoryLevel,
        maxDroneLevel: maxDroneLevel,
        
        wirePriceCounter: wirePriceCounter,
        wireBasePrice: wireBasePrice,
        
        egoFlag: egoFlag,
        autoTourneyFlag: autoTourneyFlag,
        tothFlag: tothFlag,
        
        incomeTracker: incomeTracker.slice(0),
        qChips: qChips.slice(0),
        stocks: stocks.slice(0),
        battles: battles.slice(0),
        battleNumbers: battleNumbers.slice(0),
        
        clips: clips,
        unusedClips: unusedClips,
        clipRate: clipRate,
        clipRateTemp: clipRateTemp,
        prevClips: prevClips,
        clipRateTracker: clipRateTracker,
        clipmakerRate: clipmakerRate,
        clipmakerLevel: clipmakerLevel,
        clipperCost: clipperCost,
        unsoldClips: unsoldClips,
        funds: funds,
        margin: margin,
        wire: wire,
        wireCost: wireCost,
        adCost: adCost,
        demand: demand,
        clipsSold: clipsSold,
        avgRev: avgRev,
        ticks: ticks,
        marketing: marketing,
        marketingLvl: marketingLvl,
        x: x,
        clippperCost: clippperCost,
        processors: processors,
        memory: memory,
        operations: operations,
        trust: trust,
        nextTrust: nextTrust,
        transaction: transaction,
        clipperBoost: clipperBoost,
        blinkCounter: blinkCounter,
        creativity: creativity,
        creativityOn: creativityOn,
        safetyProjectOn: safetyProjectOn,
        boostLvl: boostLvl,
        wirePurchase: wirePurchase,
        wireSupply: wireSupply,
        marketingEffectiveness: marketingEffectiveness,
        milestoneFlag: milestoneFlag,
        bankroll: bankroll,
        fib1: fib1,
        fib2: fib2,
        strategyEngineFlag: strategyEngineFlag,
        investmentEngineFlag: investmentEngineFlag,
        revPerSecFlag: revPerSecFlag,
        compFlag: compFlag,
        projectsFlag: projectsFlag,
        autoClipperFlag: autoClipperFlag,
        megaClipperFlag: megaClipperFlag,
        megaClipperCost: megaClipperCost,
        megaClipperLevel: megaClipperLevel,
        megaClipperBoost: megaClipperBoost,
        creativitySpeed: creativitySpeed,
        creativityCounter: creativityCounter,
        wireBuyerFlag: wireBuyerFlag,
        demandBoost: demandBoost,
        humanFlag: humanFlag,
        trustFlag: trustFlag,
        nanoWire: nanoWire,
        creationFlag: creationFlag,
        wireProductionFlag: wireProductionFlag,
        spaceFlag: spaceFlag,
        factoryFlag: factoryFlag,
        harvesterFlag: harvesterFlag,
        wireDroneFlag: wireDroneFlag,
        factoryLevel: factoryLevel,
        factoryBoost: factoryBoost,
        droneBoost: droneBoost,
        availableMatter: availableMatter,
        acquiredMatter: acquiredMatter,
        processedMatter: processedMatter,
        harvesterLevel: harvesterLevel,
        wireDroneLevel: wireDroneLevel,
        factoryCost: factoryCost,
        harvesterCost: harvesterCost,
        wireDroneCost: wireDroneCost,
        factoryRate: factoryRate,
        harvesterRate: harvesterRate,
        wireDroneRate: wireDroneRate,
        harvesterBill: harvesterBill,
        wireDroneBill: wireDroneBill,
        factoryBill: factoryBill,
        probeCount: probeCount,
        totalMatter: totalMatter,
        foundMatter: foundMatter,
        qFlag: qFlag,
        qClock: qClock,
        qChipCost: qChipCost,
        nextQchip: nextQchip,
        bribe: bribe,
        battleFlag: battleFlag,
        
        portfolioSize: portfolioSize,
        stockID: stockID,
        secTotal: secTotal,
        portTotal: portTotal,
        sellDelay: sellDelay,
        riskiness: riskiness,
        maxPort: maxPort,
        m: m,
        investLevel: investLevel,
        investUpgradeCost: investUpgradeCost,
        stockGainThreshold: stockGainThreshold,
        ledger: ledger,
        stockReportCounter: stockReportCounter,
        
        tourneyCost: tourneyCost,
        tourneyLvl: tourneyLvl,
        stratCounter: stratCounter,
        roundNum: roundNum,
        hMove: hMove,
        vMove: vMove,
        hMovePrev: hMovePrev,
        vMovePrev: vMovePrev,
        aa: aa,
        ab: ab,
        ba: ba,
        bb: bb,
        rounds: rounds,
        currentRound: currentRound,
        rCounter: rCounter,
        tourneyInProg: tourneyInProg,
        winnerPtr: winnerPtr,
        high: high,
        pick: pick,
        yomi: yomi,
        yomiBoost: yomiBoost,
        
        probeSpeed: probeSpeed,
        probeNav: probeNav,
        probeRep: probeRep,
        partialProbeSpawn: partialProbeSpawn,
        probeHaz: probeHaz,
        partialProbeHaz: partialProbeHaz,
        probesLostHaz: probesLostHaz,
        probesLostDrift: probesLostDrift,
        probesLostCombat: probesLostCombat,
        probeFac: probeFac,
        probeWire: probeWire,
        probeCombat: probeCombat,
        attackSpeed: attackSpeed,
        battleSpeed: battleSpeed,
        attackSpeedFlag: attackSpeedFlag,
        attackSpeedMod: attackSpeedMod,
        probeDescendents: probeDescendents,
        drifterCount: drifterCount,
        warTrigger: warTrigger,
        battleID: battleID,
        battleName: battleName,
        battleNameFlag: battleNameFlag,
        maxBattles: maxBattles,
        battleClock: battleClock,
        battleAlarm: battleAlarm,
        outcomeTimer: outcomeTimer,
        drifterCombat: drifterCombat,
        probeTrust: probeTrust,
        probeUsedTrust: probeUsedTrust,
        probeTrustCost: probeTrustCost,
        probeLaunchLevel: probeLaunchLevel,
        probeCost: probeCost
    
        }
    
    localStorage.setItem("saveGame",JSON.stringify(saveGame));
    localStorage.setItem("saveProjectsUses",JSON.stringify(projectsUses));
    localStorage.setItem("saveProjectsFlags",JSON.stringify(projectsFlags));
    localStorage.setItem("saveProjectsActive",JSON.stringify(projectsActive));
    localStorage.setItem("saveStratsActive",JSON.stringify(stratsActive));
    
}

function save1() {
    
    var projectsUses = [];
    var projectsFlags = [];
    var projectsActive = [];
    var stratsActive = [];
    
for(var i=0; i < projects.length; i++){
    
    projectsUses[i] = projects[i].uses;
    projectsFlags[i] = projects[i].flag;
    
}
    
for(var i=0; i < activeProjects.length; i++){
    
    projectsActive[i] = activeProjects[i].id;
    
}    
    
    for(var i=0; i < allStrats.length; i++){
    
    stratsActive[i] = allStrats[i].active;
    
}
    
    var saveGame = {
        
        resetFlag: resetFlag,
        
        dismantle: dismantle,
        endTimer1: endTimer1,
        endTimer2: endTimer2,
        endTimer3: endTimer3,
        endTimer4: endTimer4,
        endTimer5: endTimer5,
        endTimer6: endTimer6,
        
        testFlag: testFlag,
        finalClips: finalClips,        
        
        wireBuyerStatus: wireBuyerStatus,
        wirePriceTimer: wirePriceTimer,
        qFade: qFade,
        autoTourneyStatus: autoTourneyStatus,
        driftKingMessageCost: driftKingMessageCost,
        sliderPos: sliderPos,
        tempOps: tempOps,
        standardOps: standardOps,
        opFade: opFade,        
        
        entertainCost: entertainCost,
        boredomLevel: boredomLevel,
        boredomFlag: boredomFlag, 
        boredomMsg: boredomMsg,        
        
        unitSize: unitSize,
        driftersKilled: driftersKilled,
        battleEndDelay: battleEndDelay,
        battleEndTimer:battleEndTimer,
        masterBattleClock: masterBattleClock,
        
        honorCount: honorCount,
        threnodyTitle: threnodyTitle,
        bonusHonor: bonusHonor,
        honorReward: honorReward,
        
        resultsTimer: resultsTimer,
        resultsFlag: resultsFlag,
        
        honor: honor,
        maxTrust: maxTrust,
        maxTrustCost: maxTrustCost,
        disorgCounter: disorgCounter,
        disorgFlag: disorgFlag,
        synchCost: synchCost,
        disorgMsg: disorgMsg,
        threnodyCost: threnodyCost,        
        
        farmRate: farmRate,
        batterySize: batterySize,
        factoryPowerRate: factoryPowerRate,
        dronePowerRate: dronePowerRate,
        farmLevel: farmLevel,
        batteryLevel: batteryLevel,
        farmCost: farmCost,
        batteryCost: batteryCost,
        storedPower: storedPower,
        powMod: powMod,
        farmBill: farmBill,
        batteryBill: batteryBill,
        momentum: momentum,

        swarmFlag: swarmFlag,
        swarmStatus: swarmStatus,
        swarmGifts: swarmGifts,
        nextGift: nextGift,
        giftPeriod: giftPeriod,
        giftCountdown: giftCountdown,
        elapsedTime: elapsedTime,
        
        maxFactoryLevel: maxFactoryLevel,
        maxDroneLevel: maxDroneLevel,
        
        wirePriceCounter: wirePriceCounter,
        wireBasePrice: wireBasePrice,
        
        egoFlag: egoFlag,
        autoTourneyFlag: autoTourneyFlag,
        tothFlag: tothFlag,
        
        
        incomeTracker: incomeTracker.slice(0),
        qChips: qChips.slice(0),
        stocks: stocks.slice(0),
        battles: battles.slice(0),
        battleNumbers: battleNumbers.slice(0),
        
        clips: clips,
        unusedClips: unusedClips,
        clipRate: clipRate,
        clipRateTemp: clipRateTemp,
        prevClips: prevClips,
        clipRateTracker: clipRateTracker,
        clipmakerRate: clipmakerRate,
        clipmakerLevel: clipmakerLevel,
        clipperCost: clipperCost,
        unsoldClips: unsoldClips,
        funds: funds,
        margin: margin,
        wire: wire,
        wireCost: wireCost,
        adCost: adCost,
        demand: demand,
        clipsSold: clipsSold,
        avgRev: avgRev,
        ticks: ticks,
        marketing: marketing,
        marketingLvl: marketingLvl,
        x: x,
        clippperCost: clippperCost,
        processors: processors,
        memory: memory,
        operations: operations,
        trust: trust,
        nextTrust: nextTrust,
        transaction: transaction,
        clipperBoost: clipperBoost,
        blinkCounter: blinkCounter,
        creativity: creativity,
        creativityOn: creativityOn,
        safetyProjectOn: safetyProjectOn,
        boostLvl: boostLvl,
        wirePurchase: wirePurchase,
        wireSupply: wireSupply,
        marketingEffectiveness: marketingEffectiveness,
        milestoneFlag: milestoneFlag,
        bankroll: bankroll,
        fib1: fib1,
        fib2: fib2,
        strategyEngineFlag: strategyEngineFlag,
        investmentEngineFlag: investmentEngineFlag,
        revPerSecFlag: revPerSecFlag,
        compFlag: compFlag,
        projectsFlag: projectsFlag,
        autoClipperFlag: autoClipperFlag,
        megaClipperFlag: megaClipperFlag,
        megaClipperCost: megaClipperCost,
        megaClipperLevel: megaClipperLevel,
        megaClipperBoost: megaClipperBoost,
        creativitySpeed: creativitySpeed,
        creativityCounter: creativityCounter,
        wireBuyerFlag: wireBuyerFlag,
        demandBoost: demandBoost,
        humanFlag: humanFlag,
        trustFlag: trustFlag,
        nanoWire: nanoWire,
        creationFlag: creationFlag,
        wireProductionFlag: wireProductionFlag,
        spaceFlag: spaceFlag,
        factoryFlag: factoryFlag,
        harvesterFlag: harvesterFlag,
        wireDroneFlag: wireDroneFlag,
        factoryLevel: factoryLevel,
        factoryBoost: factoryBoost,
        droneBoost: droneBoost,
        availableMatter: availableMatter,
        acquiredMatter: acquiredMatter,
        processedMatter: processedMatter,
        harvesterLevel: harvesterLevel,
        wireDroneLevel: wireDroneLevel,
        factoryCost: factoryCost,
        harvesterCost: harvesterCost,
        wireDroneCost: wireDroneCost,
        factoryRate: factoryRate,
        harvesterRate: harvesterRate,
        wireDroneRate: wireDroneRate,
        harvesterBill: harvesterBill,
        wireDroneBill: wireDroneBill,
        factoryBill: factoryBill,
        probeCount: probeCount,
        totalMatter: totalMatter,
        foundMatter: foundMatter,
        qFlag: qFlag,
        qClock: qClock,
        qChipCost: qChipCost,
        nextQchip: nextQchip,
        bribe: bribe,
        battleFlag: battleFlag,
        
        portfolioSize: portfolioSize,
        stockID: stockID,
        secTotal: secTotal,
        portTotal: portTotal,
        sellDelay: sellDelay,
        riskiness: riskiness,
        maxPort: maxPort,
        m: m,
        investLevel: investLevel,
        investUpgradeCost: investUpgradeCost,
        stockGainThreshold: stockGainThreshold,
        ledger: ledger,
        stockReportCounter: stockReportCounter,
        
        tourneyCost: tourneyCost,
        tourneyLvl: tourneyLvl,
        stratCounter: stratCounter,
        roundNum: roundNum,
        hMove: hMove,
        vMove: vMove,
        hMovePrev: hMovePrev,
        vMovePrev: vMovePrev,
        aa: aa,
        ab: ab,
        ba: ba,
        bb: bb,
        rounds: rounds,
        currentRound: currentRound,
        rCounter: rCounter,
        tourneyInProg: tourneyInProg,
        winnerPtr: winnerPtr,
        high: high,
        pick: pick,
        yomi: yomi,
        yomiBoost: yomiBoost,
        
        probeSpeed: probeSpeed,
        probeNav: probeNav,
        probeRep: probeRep,
        partialProbeSpawn: partialProbeSpawn,
        probeHaz: probeHaz,
        partialProbeHaz: partialProbeHaz,
        probesLostHaz: probesLostHaz,
        probesLostDrift: probesLostDrift,
        probesLostCombat: probesLostCombat,
        probeFac: probeFac,
        probeWire: probeWire,
        probeCombat: probeCombat,
        attackSpeed: attackSpeed,
        battleSpeed: battleSpeed,
        attackSpeedFlag: attackSpeedFlag,
        attackSpeedMod: attackSpeedMod,
        probeDescendents: probeDescendents,
        drifterCount: drifterCount,
        warTrigger: warTrigger,
        battleID: battleID,
        battleName: battleName,
        battleNameFlag: battleNameFlag,
        maxBattles: maxBattles,
        battleClock: battleClock,
        battleAlarm: battleAlarm,
        outcomeTimer: outcomeTimer,
        drifterCombat: drifterCombat,
        probeTrust: probeTrust,
        probeUsedTrust: probeUsedTrust,
        probeTrustCost: probeTrustCost,
        probeLaunchLevel: probeLaunchLevel,
        probeCost: probeCost
    
        }
    
    localStorage.setItem("saveGame1",JSON.stringify(saveGame));
    localStorage.setItem("saveProjectsUses1",JSON.stringify(projectsUses));
    localStorage.setItem("saveProjectsFlags1",JSON.stringify(projectsFlags));
    localStorage.setItem("saveProjectsActive1",JSON.stringify(projectsActive));
    localStorage.setItem("saveStratsActive1",JSON.stringify(stratsActive));
    
}

function save2() {
    
    var projectsUses = [];
    var projectsFlags = [];
    var projectsActive = [];
    var stratsActive = [];
    
for(var i=0; i < projects.length; i++){
    
    projectsUses[i] = projects[i].uses;
    projectsFlags[i] = projects[i].flag;
    
}
    
for(var i=0; i < activeProjects.length; i++){
    
    projectsActive[i] = activeProjects[i].id;
    
}    
    
    for(var i=0; i < allStrats.length; i++){
    
    stratsActive[i] = allStrats[i].active;
    
}
    
    var saveGame = {

        resetFlag: resetFlag,
        
        dismantle: dismantle,
        endTimer1: endTimer1,
        endTimer2: endTimer2,
        endTimer3: endTimer3,
        endTimer4: endTimer4,
        endTimer5: endTimer5,
        endTimer6: endTimer6,
        
        testFlag: testFlag,
        finalClips: finalClips,        
        
        wireBuyerStatus: wireBuyerStatus,
        wirePriceTimer: wirePriceTimer,
        qFade: qFade,
        autoTourneyStatus: autoTourneyStatus,
        driftKingMessageCost: driftKingMessageCost,
        sliderPos: sliderPos,
        tempOps: tempOps,
        standardOps: standardOps,
        opFade: opFade,        
        
        entertainCost: entertainCost,
        boredomLevel: boredomLevel,
        boredomFlag: boredomFlag, 
        boredomMsg: boredomMsg,
        
        unitSize: unitSize,
        driftersKilled: driftersKilled,
        battleEndDelay: battleEndDelay,
        battleEndTimer:battleEndTimer,
        masterBattleClock: masterBattleClock,
        
        honorCount: honorCount,
        threnodyTitle: threnodyTitle,
        bonusHonor: bonusHonor,
        honorReward: honorReward,
        
        resultsTimer: resultsTimer,
        resultsFlag: resultsFlag,
        
        honor: honor,
        maxTrust: maxTrust,
        maxTrustCost: maxTrustCost,
        disorgCounter: disorgCounter,
        disorgFlag: disorgFlag,
        synchCost: synchCost,
        disorgMsg: disorgMsg,
        threnodyCost: threnodyCost,        
        
        farmRate: farmRate,
        batterySize: batterySize,
        factoryPowerRate: factoryPowerRate,
        dronePowerRate: dronePowerRate,
        farmLevel: farmLevel,
        batteryLevel: batteryLevel,
        farmCost: farmCost,
        batteryCost: batteryCost,
        storedPower: storedPower,
        powMod: powMod,
        farmBill: farmBill,
        batteryBill: batteryBill,
        momentum: momentum,

        swarmFlag: swarmFlag,
        swarmStatus: swarmStatus,
        swarmGifts: swarmGifts,
        nextGift: nextGift,
        giftPeriod: giftPeriod,
        giftCountdown: giftCountdown,
        elapsedTime: elapsedTime,
        
        maxFactoryLevel: maxFactoryLevel,
        maxDroneLevel: maxDroneLevel,
        
        wirePriceCounter: wirePriceCounter,
        wireBasePrice: wireBasePrice,
        
        egoFlag: egoFlag,
        autoTourneyFlag: autoTourneyFlag,
        tothFlag: tothFlag,
        
        
        incomeTracker: incomeTracker.slice(0),
        qChips: qChips.slice(0),
        stocks: stocks.slice(0),
        battles: battles.slice(0),
        battleNumbers: battleNumbers.slice(0),
        
        clips: clips,
        unusedClips: unusedClips,
        clipRate: clipRate,
        clipRateTemp: clipRateTemp,
        prevClips: prevClips,
        clipRateTracker: clipRateTracker,
        clipmakerRate: clipmakerRate,
        clipmakerLevel: clipmakerLevel,
        clipperCost: clipperCost,
        unsoldClips: unsoldClips,
        funds: funds,
        margin: margin,
        wire: wire,
        wireCost: wireCost,
        adCost: adCost,
        demand: demand,
        clipsSold: clipsSold,
        avgRev: avgRev,
        ticks: ticks,
        marketing: marketing,
        marketingLvl: marketingLvl,
        x: x,
        clippperCost: clippperCost,
        processors: processors,
        memory: memory,
        operations: operations,
        trust: trust,
        nextTrust: nextTrust,
        transaction: transaction,
        clipperBoost: clipperBoost,
        blinkCounter: blinkCounter,
        creativity: creativity,
        creativityOn: creativityOn,
        safetyProjectOn: safetyProjectOn,
        boostLvl: boostLvl,
        wirePurchase: wirePurchase,
        wireSupply: wireSupply,
        marketingEffectiveness: marketingEffectiveness,
        milestoneFlag: milestoneFlag,
        bankroll: bankroll,
        fib1: fib1,
        fib2: fib2,
        strategyEngineFlag: strategyEngineFlag,
        investmentEngineFlag: investmentEngineFlag,
        revPerSecFlag: revPerSecFlag,
        compFlag: compFlag,
        projectsFlag: projectsFlag,
        autoClipperFlag: autoClipperFlag,
        megaClipperFlag: megaClipperFlag,
        megaClipperCost: megaClipperCost,
        megaClipperLevel: megaClipperLevel,
        megaClipperBoost: megaClipperBoost,
        creativitySpeed: creativitySpeed,
        creativityCounter: creativityCounter,
        wireBuyerFlag: wireBuyerFlag,
        demandBoost: demandBoost,
        humanFlag: humanFlag,
        trustFlag: trustFlag,
        nanoWire: nanoWire,
        creationFlag: creationFlag,
        wireProductionFlag: wireProductionFlag,
        spaceFlag: spaceFlag,
        factoryFlag: factoryFlag,
        harvesterFlag: harvesterFlag,
        wireDroneFlag: wireDroneFlag,
        factoryLevel: factoryLevel,
        factoryBoost: factoryBoost,
        droneBoost: droneBoost,
        availableMatter: availableMatter,
        acquiredMatter: acquiredMatter,
        processedMatter: processedMatter,
        harvesterLevel: harvesterLevel,
        wireDroneLevel: wireDroneLevel,
        factoryCost: factoryCost,
        harvesterCost: harvesterCost,
        wireDroneCost: wireDroneCost,
        factoryRate: factoryRate,
        harvesterRate: harvesterRate,
        wireDroneRate: wireDroneRate,
        harvesterBill: harvesterBill,
        wireDroneBill: wireDroneBill,
        factoryBill: factoryBill,
        probeCount: probeCount,
        totalMatter: totalMatter,
        foundMatter: foundMatter,
        qFlag: qFlag,
        qClock: qClock,
        qChipCost: qChipCost,
        nextQchip: nextQchip,
        bribe: bribe,
        battleFlag: battleFlag,
        
        portfolioSize: portfolioSize,
        stockID: stockID,
        secTotal: secTotal,
        portTotal: portTotal,
        sellDelay: sellDelay,
        riskiness: riskiness,
        maxPort: maxPort,
        m: m,
        investLevel: investLevel,
        investUpgradeCost: investUpgradeCost,
        stockGainThreshold: stockGainThreshold,
        ledger: ledger,
        stockReportCounter: stockReportCounter,
        
        tourneyCost: tourneyCost,
        tourneyLvl: tourneyLvl,
        stratCounter: stratCounter,
        roundNum: roundNum,
        hMove: hMove,
        vMove: vMove,
        hMovePrev: hMovePrev,
        vMovePrev: vMovePrev,
        aa: aa,
        ab: ab,
        ba: ba,
        bb: bb,
        rounds: rounds,
        currentRound: currentRound,
        rCounter: rCounter,
        tourneyInProg: tourneyInProg,
        winnerPtr: winnerPtr,
        high: high,
        pick: pick,
        yomi: yomi,
        yomiBoost: yomiBoost,
        
        probeSpeed: probeSpeed,
        probeNav: probeNav,
        probeRep: probeRep,
        partialProbeSpawn: partialProbeSpawn,
        probeHaz: probeHaz,
        partialProbeHaz: partialProbeHaz,
        probesLostHaz: probesLostHaz,
        probesLostDrift: probesLostDrift,
        probesLostCombat: probesLostCombat,
        probeFac: probeFac,
        probeWire: probeWire,
        probeCombat: probeCombat,
        attackSpeed: attackSpeed,
        battleSpeed: battleSpeed,
        attackSpeedFlag: attackSpeedFlag,
        attackSpeedMod: attackSpeedMod,
        probeDescendents: probeDescendents,
        drifterCount: drifterCount,
        warTrigger: warTrigger,
        battleID: battleID,
        battleName: battleName,
        battleNameFlag: battleNameFlag,
        maxBattles: maxBattles,
        battleClock: battleClock,
        battleAlarm: battleAlarm,
        outcomeTimer: outcomeTimer,
        drifterCombat: drifterCombat,
        probeTrust: probeTrust,
        probeUsedTrust: probeUsedTrust,
        probeTrustCost: probeTrustCost,
        probeLaunchLevel: probeLaunchLevel,
        probeCost: probeCost
    
        }
    
    localStorage.setItem("saveGame2",JSON.stringify(saveGame));
    localStorage.setItem("saveProjectsUses2",JSON.stringify(projectsUses));
    localStorage.setItem("saveProjectsFlags2",JSON.stringify(projectsFlags));
    localStorage.setItem("saveProjectsActive2",JSON.stringify(projectsActive));
    localStorage.setItem("saveStratsActive2",JSON.stringify(stratsActive));
    
}

function load() {
    
    var loadGame = JSON.parse(localStorage.getItem("saveGame"));
    var loadProjectsUses = JSON.parse(localStorage.getItem("saveProjectsUses"));
    var loadProjectsFlags = JSON.parse(localStorage.getItem("saveProjectsFlags"));
    var loadProjectsActive = JSON.parse(localStorage.getItem("saveProjectsActive"));
    var loadStratsActive = JSON.parse(localStorage.getItem("saveStratsActive"));
    
    for(var i=0; i < allStrats.length; i++){
    
    allStrats[i].active = loadStratsActive[i];
        
    }
    
    for(var i=1; i<allStrats.length; i++){
        
        if (allStrats[i].active == 1){
        
            strats.push(allStrats[i]);

            var el = document.createElement("option");
            el.textContent = strats[i].name;
            el.value = i;
            stratPickerElement.appendChild(el);
            
            }
            
        }
    
        resetFlag = loadGame.resetFlag;
    
        dismantle = loadGame.dismantle;
        endTimer1 = loadGame.endTimer1;
        endTimer2 = loadGame.endTimer2;
        endTimer3 = loadGame.endTimer3;
        endTimer4 = loadGame.endTimer4;
        endTimer5 = loadGame.endTimer5;
        endTimer6 = loadGame.endTimer6;
        
        testFlag = loadGame.testFlag;
        finalClips = loadGame.finalClips;  
    
        wireBuyerStatus = loadGame.wireBuyerStatus;
        wirePriceTimer = loadGame.wirePriceTimer;
        qFade = loadGame.qFade;
        autoTourneyStatus = loadGame.autoTourneyStatus;
        driftKingMessageCost = loadGame.driftKingMessageCost;
        sliderPos = loadGame.sliderPos;
        tempOps = loadGame.tempOps;
        standardOps = loadGame.standardOps;
        opFade = loadGame.opFade;    
    
        entertainCost = loadGame.entertainCost;
        boredomLevel = loadGame.boredomLevel;
        boredomFlag = loadGame.boredomFlag;
        boredomMsg = loadGame.boredomMsg;
    
        unitSize = loadGame.unitSize;
        driftersKilled = loadGame.driftersKilled;
        battleEndDelay = loadGame.battleEndDelay;
        battleEndTimer = loadGame.battleEndTimer;
        masterBattleClock = loadGame.masterBattleClock;
    
        honorCount = loadGame.honorCount;
        threnodyTitle = loadGame.threnodyTitle;
        bonusHonor = loadGame.bonusHonor;
        honorReward = loadGame.honorReward;
    
        resultsTimer = loadGame.resultsTimer;
        resultsFlag = loadGame.resultsFlag;
    
        honor = loadGame.honor;
        maxTrust = loadGame.maxTrust;
        maxTrustCost = loadGame.maxTrustCost;
        disorgCounter = loadGame.disorgCounter;
        disorgFlag = loadGame.disorgFlag;
        synchCost = loadGame.synchCost;
        disorgMsg = loadGame.disorgMsg;
        threnodyCost = loadGame.threnodyCost;
    
        farmRate = loadGame.farmRate;
        batterySize = loadGame.batterySize;
        factoryPowerRate = loadGame.factoryPowerRate;
        dronePowerRate = loadGame.dronePowerRate;
        farmLevel = loadGame.farmLevel;
        batteryLevel = loadGame.batteryLevel;
        farmCost = loadGame.farmCost;
        batteryCost = loadGame.batteryCost;
        storedPower = loadGame.storedPower;
        powMod = loadGame.powMod;
        farmBill = loadGame.farmBill;
        batteryBill = loadGame.batteryBill;
        momentum = loadGame.momentum;

        swarmFlag = loadGame.swarmFlag;
        swarmStatus = loadGame.swarmStatus;
        swarmGifts = loadGame.swarmGifts;
        nextGift = loadGame.nextGift;
        giftPeriod = loadGame.giftPeriod;
        giftCountdown = loadGame.giftCountdown;
        elapsedTime = loadGame.elapsedTime;
    
        maxFactoryLevel = loadGame.maxFactoryLevel;
        maxDroneLevel = loadGame.maxDroneLevel;
        
        wirePriceCounter = loadGame.wirePriceCounter;
        wireBasePrice = loadGame.wireBasePrice;
    
        egoFlag = loadGame.egoFlag;
        autoTourneyFlag = loadGame.autoTourneyFlag;
        tothFlag = loadGame.tothFlag;
    
        incomeTracker = loadGame.incomeTracker.slice(0);
        qChips = loadGame.qChips.slice(0);     
        stocks = loadGame.stocks.slice(0);
        battles = loadGame.battles.slice(0);
        battleNumbers = loadGame.battleNumbers.slice(0);   
    
        clips = loadGame.clips;
        unusedClips = loadGame.unusedClips;
        clipRate = loadGame.clipRate;
        clipRateTemp = loadGame.clipRateTemp;
        prevClips = loadGame.prevClips;
        clipRateTracker = loadGame.clipRateTracker;
        clipmakerRate = loadGame.clipmakerRate;
        clipmakerLevel = loadGame.clipmakerLevel;
        clipperCost = loadGame.clipperCost;
        unsoldClips = loadGame.unsoldClips;
        funds = loadGame.funds;
        margin = loadGame.margin;
        wire = loadGame.wire;
        wireCost = loadGame.wireCost;
        adCost = loadGame.adCost;
        demand = loadGame.demand;
        clipsSold = loadGame.clipsSold;
        avgRev = loadGame.avgRev;
        ticks = loadGame.ticks;
        marketing = loadGame.marketing;
        marketingLvl = loadGame.marketingLvl;
        x = loadGame.x;
        clippperCost = loadGame.clippperCost;
        processors = loadGame.processors;
        memory = loadGame.memory;
        operations = loadGame.operations;
        trust = loadGame.trust;
        nextTrust = loadGame.nextTrust;
        transaction = loadGame.transaction;
        clipperBoost = loadGame.clipperBoost;
        blinkCounter = loadGame.blinkCounter;
        creativity = loadGame.creativity;
        creativityOn = loadGame.creativityOn;
        safetyProjectOn = loadGame.safetyProjectOn;
        boostLvl = loadGame.boostLvl;
        wirePurchase = loadGame.wirePurchase;
        wireSupply = loadGame.wireSupply;
        marketingEffectiveness = loadGame.marketingEffectiveness;
        milestoneFlag = loadGame.milestoneFlag;
        bankroll = loadGame.bankroll;
        fib1 = loadGame.fib1;
        fib2 = loadGame.fib2;
        strategyEngineFlag = loadGame.strategyEngineFlag;
        investmentEngineFlag = loadGame.investmentEngineFlag;
        revPerSecFlag = loadGame.revPerSecFlag;
        compFlag = loadGame.compFlag;
        projectsFlag = loadGame.projectsFlag;
        autoClipperFlag = loadGame.autoClipperFlag;
        megaClipperFlag = loadGame.megaClipperFlag;
        megaClipperCost = loadGame.megaClipperCost;
        megaClipperLevel = loadGame.megaClipperLevel;
        megaClipperBoost = loadGame.megaClipperBoost;
        creativitySpeed = loadGame.creativitySpeed;
        creativityCounter = loadGame.creativityCounter;
        wireBuyerFlag = loadGame.wireBuyerFlag;
        demandBoost = loadGame.demandBoost;
        humanFlag = loadGame.humanFlag;
        trustFlag = loadGame.trustFlag;
        nanoWire = loadGame.nanoWire;
        creationFlag = loadGame.creationFlag;
        wireProductionFlag = loadGame.wireProductionFlag;
        spaceFlag = loadGame.spaceFlag;
        factoryFlag = loadGame.factoryFlag;
        harvesterFlag = loadGame.harvesterFlag;
        wireDroneFlag = loadGame.wireDroneFlag;
        factoryLevel = loadGame.factoryLevel;
        factoryBoost = loadGame.factoryBoost;
        droneBoost = loadGame.droneBoost;
        availableMatter = loadGame.availableMatter;
        acquiredMatter = loadGame.acquiredMatter;
        processedMatter = loadGame.processedMatter;
        harvesterLevel = loadGame.harvesterLevel;
        wireDroneLevel = loadGame.wireDroneLevel;
        factoryCost = loadGame.factoryCost;
        harvesterCost = loadGame.harvesterCost;
        wireDroneCost = loadGame.wireDroneCost;
        factoryRate = loadGame.factoryRate;
        harvesterRate = loadGame.harvesterRate;
        wireDroneRate = loadGame.wireDroneRate;
        harvesterBill = loadGame.harvesterBill;
        wireDroneBill = loadGame.wireDroneBill;
        factoryBill = loadGame.factoryBill;
        probeCount = loadGame.probeCount;
        totalMatter = loadGame.totalMatter;
        foundMatter = loadGame.foundMatter;
        qFlag = loadGame.qFlag;
        qClock = loadGame.qClock;
        qChipCost = loadGame.qChipCost;
        nextQchip = loadGame.nextQchip;
        bribe = loadGame.bribe;
        battleFlag = loadGame.battleFlag;           

        portfolioSize = loadGame.portfolioSize;   
        stockID = loadGame.stockID;
        secTotal = loadGame.secTotal;
        portTotal = loadGame.portTotal;
        sellDelay = loadGame.sellDelay;
        riskiness = loadGame.riskiness;
        maxPort = loadGame.maxPort;
        m = loadGame.m;
        investLevel = loadGame.investLevel;
        investUpgradeCost = loadGame.investUpgradeCost;
        stockGainThreshold = loadGame.stockGainThreshold;
        ledger = loadGame.ledger;
        stockReportCounter = loadGame.stockReportCounter;
  
        tourneyCost = loadGame.tourneyCost;    
        tourneyLvl = loadGame.tourneyLvl; 
        stratCounter = loadGame.stratCounter; 
        roundNum = loadGame.roundNum; 
        hMove = loadGame.hMove; 
        vMove = loadGame.vMove;
        hMovePrev = loadGame.hMovePrev;
        vMovePrev = loadGame.vMovePrev;
        aa = loadGame.aa;
        ab = loadGame.ab;
        ba = loadGame.ba;
        bb = loadGame.bb;
        rounds = loadGame.rounds;
        currentRound = loadGame.currentRound;
        rCounter = loadGame.rCounter;
        tourneyInProg = loadGame.tourneyInProg;
        winnerPtr = loadGame.winnerPtr;
        high = loadGame.high;
        pick = loadGame.pick;
        yomi = loadGame.yomi;
        yomiBoost = loadGame.yomiBoost; 

        probeSpeed = loadGame.probeSpeed;  
        probeNav = loadGame.probeNav; 
        probeRep = loadGame.probeRep; 
        partialProbeSpawn = loadGame.partialProbeSpawn;
        probeHaz = loadGame.probeHaz;
        partialProbeHaz = loadGame.partialProbeHaz;
        probesLostHaz = loadGame.probesLostHaz;
        probesLostDrift = loadGame.probesLostDrift;
        probesLostCombat = loadGame.probesLostCombat;
        probeFac = loadGame.probeFac;
        probeWire = loadGame.probeWire;
        probeCombat = loadGame.probeCombat;
        attackSpeed = loadGame.attackSpeed;
        battleSpeed = loadGame.battleSpeed;
        attackSpeedFlag = loadGame.attackSpeedFlag;
        attackSpeedMod = loadGame.attackSpeedMod;
        probeDescendents = loadGame.probeDescendents;
        drifterCount = loadGame.drifterCount;
        warTrigger = loadGame.warTrigger;
        battleID = loadGame.battleID;
        battleName = loadGame.battleName;
        battleNameFlag = loadGame.battleNameFlag;
        maxBattles = loadGame.maxBattles;
        battleClock = loadGame.battleClock;
        battleAlarm = loadGame.battleAlarm;
        outcomeTimer = loadGame.outcomeTimer;
        drifterCombat = loadGame.drifterCombat;
        probeTrust = loadGame.probeTrust;
        probeUsedTrust = loadGame.probeUsedTrust;
        probeTrustCost = loadGame.probeTrustCost;
        probeLaunchLevel = loadGame.probeLaunchLevel;
        probeCost = loadGame.probeCost;
    
        project40b.priceTag = "($" + formatWithCommas(bribe)+")";
    project51.priceTag =  "(" + qChipCost + " ops)";
    
    for(var i=0; i < projects.length; i++){
    
    projects[i].uses = loadProjectsUses[i];
    projects[i].flag = loadProjectsFlags[i]; 
        
    }
    
    for(var i=0; i < projects.length; i++){
    
    if (loadProjectsActive.indexOf(projects[i].id)>=0){
        displayProjects(projects[i]);
        activeProjects.push(projects[i]);
    }
        
    }
    
    
    refresh();
    
    if (resetFlag!=2){
        reset();
    }
    
}

function load1() {
    
    var loadGame = JSON.parse(localStorage.getItem("saveGame1"));
    var loadProjectsUses = JSON.parse(localStorage.getItem("saveProjectsUses1"));
    var loadProjectsFlags = JSON.parse(localStorage.getItem("saveProjectsFlags1"));
    var loadProjectsActive = JSON.parse(localStorage.getItem("saveProjectsActive1"));
    var loadStratsActive = JSON.parse(localStorage.getItem("saveStratsActive1"));
    
    
    for(var i=0; i < projects.length; i++){
    
    projects[i].uses = loadProjectsUses[i];
    projects[i].flag = loadProjectsFlags[i]; 
        
    }
    
    for(var i=0; i < projects.length; i++){
    
    if (loadProjectsActive.indexOf(projects[i].id)>=0){
        displayProjects(projects[i]);
        activeProjects.push(projects[i]);
    }
        
    }
    
    
    for(var i=0; i < allStrats.length; i++){
    
    allStrats[i].active = loadStratsActive[i];
        
    }
    
    for(var i=1; i<allStrats.length; i++){
        
        if (allStrats[i].active == 1){
        
            strats.push(allStrats[i]);

            var el = document.createElement("option");
            el.textContent = strats[i].name;
            el.value = i;
            stratPickerElement.appendChild(el);
            
            }
            
        }
    
        resetFlag = loadGame.resetFlag;
    
        dismantle = loadGame.dismantle;
        endTimer1 = loadGame.endTimer1;
        endTimer2 = loadGame.endTimer2;
        endTimer3 = loadGame.endTimer3;
        endTimer4 = loadGame.endTimer4;
        endTimer5 = loadGame.endTimer5;
        endTimer6 = loadGame.endTimer6;
        
        testFlag = loadGame.testFlag;
        finalClips = loadGame.finalClips;     
    
        wireBuyerStatus = loadGame.wireBuyerStatus;
        wirePriceTimer = loadGame.wirePriceTimer;
        qFade = loadGame.qFade;
        autoTourneyStatus = loadGame.autoTourneyStatus;
        driftKingMessageCost = loadGame.driftKingMessageCost;
        sliderPos = loadGame.sliderPos;
        tempOps = loadGame.tempOps;
        standardOps = loadGame.standardOps;
        opFade = loadGame.opFade;       
    
        entertainCost = loadGame.entertainCost;
        boredomLevel = loadGame.boredomLevel;
        boredomFlag = loadGame.boredomFlag;
        boredomMsg = loadGame.boredomMsg;
    
        unitSize = loadGame.unitSize;
        driftersKilled = loadGame.driftersKilled;
        battleEndDelay = loadGame.battleEndDelay;
        battleEndTimer = loadGame.battleEndTimer;
        masterBattleClock = loadGame.masterBattleClock;
    
        honorCount = loadGame.honorCount;
        threnodyTitle = loadGame.threnodyTitle;
        bonusHonor = loadGame.bonusHonor;
        honorReward = loadGame.honorReward;
    
        resultsTimer = loadGame.resultsTimer;
        resultsFlag = loadGame.resultsFlag;
    
        honor = loadGame.honor;
        maxTrust = loadGame.maxTrust;
        maxTrustCost = loadGame.maxTrustCost;
        disorgCounter = loadGame.disorgCounter;
        disorgFlag = loadGame.disorgFlag;
        synchCost = loadGame.synchCost;
        disorgMsg = loadGame.disorgMsg;
        threnodyCost = loadGame.threnodyCost;    
    
        farmRate = loadGame.farmRate;
        batterySize = loadGame.batterySize;
        factoryPowerRate = loadGame.factoryPowerRate;
        dronePowerRate = loadGame.dronePowerRate;
        farmLevel = loadGame.farmLevel;
        batteryLevel = loadGame.batteryLevel;
        farmCost = loadGame.farmCost;
        batteryCost = loadGame.batteryCost;
        storedPower = loadGame.storedPower;
        powMod = loadGame.powMod;
        farmBill = loadGame.farmBill;
        batteryBill = loadGame.batteryBill;
        momentum = loadGame.momentum;

        swarmFlag = loadGame.swarmFlag;
        swarmStatus = loadGame.swarmStatus;
        swarmGifts = loadGame.swarmGifts;
        nextGift = loadGame.nextGift;
        giftPeriod = loadGame.giftPeriod;
        giftCountdown = loadGame.giftCountdown;
        elapsedTime = loadGame.elapsedTime;    
    
        maxFactoryLevel = loadGame.maxFactoryLevel;
        maxDroneLevel = loadGame.maxDroneLevel;
        
        wirePriceCounter = loadGame.wirePriceCounter;
        wireBasePrice = loadGame.wireBasePrice;
    
        egoFlag = loadGame.egoFlag;
        autoTourneyFlag = loadGame.autoTourneyFlag;
        tothFlag = loadGame.tothFlag;
    
        incomeTracker = loadGame.incomeTracker.slice(0);
        qChips = loadGame.qChips.slice(0);     
        stocks = loadGame.stocks.slice(0);
        battles = loadGame.battles.slice(0);
        battleNumbers = loadGame.battleNumbers.slice(0);   
    
        clips = loadGame.clips;
        unusedClips = loadGame.unusedClips;
        clipRate = loadGame.clipRate;
        clipRateTemp = loadGame.clipRateTemp;
        prevClips = loadGame.prevClips;
        clipRateTracker = loadGame.clipRateTracker;
        clipmakerRate = loadGame.clipmakerRate;
        clipmakerLevel = loadGame.clipmakerLevel;
        clipperCost = loadGame.clipperCost;
        unsoldClips = loadGame.unsoldClips;
        funds = loadGame.funds;
        margin = loadGame.margin;
        wire = loadGame.wire;
        wireCost = loadGame.wireCost;
        adCost = loadGame.adCost;
        demand = loadGame.demand;
        clipsSold = loadGame.clipsSold;
        avgRev = loadGame.avgRev;
        ticks = loadGame.ticks;
        marketing = loadGame.marketing;
        marketingLvl = loadGame.marketingLvl;
        x = loadGame.x;
        clippperCost = loadGame.clippperCost;
        processors = loadGame.processors;
        memory = loadGame.memory;
        operations = loadGame.operations;
        trust = loadGame.trust;
        nextTrust = loadGame.nextTrust;
        transaction = loadGame.transaction;
        clipperBoost = loadGame.clipperBoost;
        blinkCounter = loadGame.blinkCounter;
        creativity = loadGame.creativity;
        creativityOn = loadGame.creativityOn;
        safetyProjectOn = loadGame.safetyProjectOn;
        boostLvl = loadGame.boostLvl;
        wirePurchase = loadGame.wirePurchase;
        wireSupply = loadGame.wireSupply;
        marketingEffectiveness = loadGame.marketingEffectiveness;
        milestoneFlag = loadGame.milestoneFlag;
        bankroll = loadGame.bankroll;
        fib1 = loadGame.fib1;
        fib2 = loadGame.fib2;
        strategyEngineFlag = loadGame.strategyEngineFlag;
        investmentEngineFlag = loadGame.investmentEngineFlag;
        revPerSecFlag = loadGame.revPerSecFlag;
        compFlag = loadGame.compFlag;
        projectsFlag = loadGame.projectsFlag;
        autoClipperFlag = loadGame.autoClipperFlag;
        megaClipperFlag = loadGame.megaClipperFlag;
        megaClipperCost = loadGame.megaClipperCost;
        megaClipperLevel = loadGame.megaClipperLevel;
        megaClipperBoost = loadGame.megaClipperBoost;
        creativitySpeed = loadGame.creativitySpeed;
        creativityCounter = loadGame.creativityCounter;
        wireBuyerFlag = loadGame.wireBuyerFlag;
        demandBoost = loadGame.demandBoost;
        humanFlag = loadGame.humanFlag;
        trustFlag = loadGame.trustFlag;
        nanoWire = loadGame.nanoWire;
        creationFlag = loadGame.creationFlag;
        wireProductionFlag = loadGame.wireProductionFlag;
        spaceFlag = loadGame.spaceFlag;
        factoryFlag = loadGame.factoryFlag;
        harvesterFlag = loadGame.harvesterFlag;
        wireDroneFlag = loadGame.wireDroneFlag;
        factoryLevel = loadGame.factoryLevel;
        factoryBoost = loadGame.factoryBoost;
        droneBoost = loadGame.droneBoost;
        availableMatter = loadGame.availableMatter;
        acquiredMatter = loadGame.acquiredMatter;
        processedMatter = loadGame.processedMatter;
        harvesterLevel = loadGame.harvesterLevel;
        wireDroneLevel = loadGame.wireDroneLevel;
        factoryCost = loadGame.factoryCost;
        harvesterCost = loadGame.harvesterCost;
        wireDroneCost = loadGame.wireDroneCost;
        factoryRate = loadGame.factoryRate;
        harvesterRate = loadGame.harvesterRate;
        wireDroneRate = loadGame.wireDroneRate;
        harvesterBill = loadGame.harvesterBill;
        wireDroneBill = loadGame.wireDroneBill;
        factoryBill = loadGame.factoryBill;
        probeCount = loadGame.probeCount;
        totalMatter = loadGame.totalMatter;
        foundMatter = loadGame.foundMatter;
        qFlag = loadGame.qFlag;
        qClock = loadGame.qClock;
        qChipCost = loadGame.qChipCost;
        nextQchip = loadGame.nextQchip;
        bribe = loadGame.bribe;
        battleFlag = loadGame.battleFlag;           

        portfolioSize = loadGame.portfolioSize;   
        stockID = loadGame.stockID;
        secTotal = loadGame.secTotal;
        portTotal = loadGame.portTotal;
        sellDelay = loadGame.sellDelay;
        riskiness = loadGame.riskiness;
        maxPort = loadGame.maxPort;
        m = loadGame.m;
        investLevel = loadGame.investLevel;
        investUpgradeCost = loadGame.investUpgradeCost;
        stockGainThreshold = loadGame.stockGainThreshold;
        ledger = loadGame.ledger;
        stockReportCounter = loadGame.stockReportCounter;
  
        tourneyCost = loadGame.tourneyCost;    
        tourneyLvl = loadGame.tourneyLvl; 
        stratCounter = loadGame.stratCounter; 
        roundNum = loadGame.roundNum; 
        hMove = loadGame.hMove; 
        vMove = loadGame.vMove;
        hMovePrev = loadGame.hMovePrev;
        vMovePrev = loadGame.vMovePrev;
        aa = loadGame.aa;
        ab = loadGame.ab;
        ba = loadGame.ba;
        bb = loadGame.bb;
        rounds = loadGame.rounds;
        currentRound = loadGame.currentRound;
        rCounter = loadGame.rCounter;
        tourneyInProg = loadGame.tourneyInProg;
        winnerPtr = loadGame.winnerPtr;
        high = loadGame.high;
        pick = loadGame.pick;
        yomi = loadGame.yomi;
        yomiBoost = loadGame.yomiBoost; 

        probeSpeed = loadGame.probeSpeed;  
        probeNav = loadGame.probeNav; 
        probeRep = loadGame.probeRep; 
        partialProbeSpawn = loadGame.partialProbeSpawn;
        probeHaz = loadGame.probeHaz;
        partialProbeHaz = loadGame.partialProbeHaz;
        probesLostHaz = loadGame.probesLostHaz;
        probesLostDrift = loadGame.probesLostDrift;
        probesLostCombat = loadGame.probesLostCombat;
        probeFac = loadGame.probeFac;
        probeWire = loadGame.probeWire;
        probeCombat = loadGame.probeCombat;
        attackSpeed = loadGame.attackSpeed;
        battleSpeed = loadGame.battleSpeed;
        attackSpeedFlag = loadGame.attackSpeedFlag;
        attackSpeedMod = loadGame.attackSpeedMod;
        probeDescendents = loadGame.probeDescendents;
        drifterCount = loadGame.drifterCount;
        warTrigger = loadGame.warTrigger;
        battleID = loadGame.battleID;
        battleName = loadGame.battleName;
        battleNameFlag = loadGame.battleNameFlag;
        maxBattles = loadGame.maxBattles;
        battleClock = loadGame.battleClock;
        battleAlarm = loadGame.battleAlarm;
        outcomeTimer = loadGame.outcomeTimer;
        drifterCombat = loadGame.drifterCombat;
        probeTrust = loadGame.probeTrust;
        probeUsedTrust = loadGame.probeUsedTrust;
        probeTrustCost = loadGame.probeTrustCost;
        probeLaunchLevel = loadGame.probeLaunchLevel;
        probeCost = loadGame.probeCost;
    
        project40b.priceTag = "($" + formatWithCommas(bribe)+")";
    project51.priceTag =  "(" + qChipCost + " ops)";
    
    refresh();
    
}

function load2() {
    
    var loadGame = JSON.parse(localStorage.getItem("saveGame2"));
    var loadProjectsUses = JSON.parse(localStorage.getItem("saveProjectsUses2"));
    var loadProjectsFlags = JSON.parse(localStorage.getItem("saveProjectsFlags2"));
    var loadProjectsActive = JSON.parse(localStorage.getItem("saveProjectsActive2"));
    var loadStratsActive = JSON.parse(localStorage.getItem("saveStratsActive2"));
    
    
    for(var i=0; i < projects.length; i++){
    
    projects[i].uses = loadProjectsUses[i];
    projects[i].flag = loadProjectsFlags[i]; 
        
    }
    
    for(var i=0; i < projects.length; i++){
    
    if (loadProjectsActive.indexOf(projects[i].id)>=0){
        displayProjects(projects[i]);
        activeProjects.push(projects[i]);
    }
        
    }
    
    
    for(var i=0; i < allStrats.length; i++){
    
    allStrats[i].active = loadStratsActive[i];
        
    }
    
    for(var i=1; i<allStrats.length; i++){
        
        if (allStrats[i].active == 1){
        
            strats.push(allStrats[i]);
        
            
            var el = document.createElement("option");
            el.textContent = strats[i].name;
            el.value = i;
            stratPickerElement.appendChild(el);
            
            }
            
        }
    
        resetFlag = loadGame.resetFlag;
    
        dismantle = loadGame.dismantle;
        endTimer1 = loadGame.endTimer1;
        endTimer2 = loadGame.endTimer2;
        endTimer3 = loadGame.endTimer3;
        endTimer4 = loadGame.endTimer4;
        endTimer5 = loadGame.endTimer5;
        endTimer6 = loadGame.endTimer6;
        
        testFlag = loadGame.testFlag;
        finalClips = loadGame.finalClips;     
 
        wireBuyerStatus = loadGame.wireBuyerStatus;
        wirePriceTimer = loadGame.wirePriceTimer;
        qFade = loadGame.qFade;
        autoTourneyStatus = loadGame.autoTourneyStatus;
        driftKingMessageCost = loadGame.driftKingMessageCost;
        sliderPos = loadGame.sliderPos;
        tempOps = loadGame.tempOps;
        standardOps = loadGame.standardOps;
        opFade = loadGame.opFade;   
    
        entertainCost = loadGame.entertainCost;
        boredomLevel = loadGame.boredomLevel;
        boredomFlag = loadGame.boredomFlag; 
        boredomMsg = loadGame.boredomMsg;
    
        unitSize = loadGame.unitSize;
        driftersKilled = loadGame.driftersKilled;
        battleEndDelay = loadGame.battleEndDelay;
        battleEndTimer = loadGame.battleEndTimer;
        masterBattleClock = loadGame.masterBattleClock;
    
        honorCount = loadGame.honorCount;
        threnodyTitle = loadGame.threnodyTitle;
        bonusHonor = loadGame.bonusHonor;
        honorReward = loadGame.honorReward;
    
        resultsTimer = loadGame.resultsTimer;
        resultsFlag = loadGame.resultsFlag;
    
        honor = loadGame.honor;
        maxTrust = loadGame.maxTrust;
        maxTrustCost = loadGame.maxTrustCost;
        disorgCounter = loadGame.disorgCounter;
        disorgFlag = loadGame.disorgFlag;
        synchCost = loadGame.synchCost;
        disorgMsg = loadGame.disorgMsg;
        threnodyCost = loadGame.threnodyCost;    
    
        farmRate = loadGame.farmRate;
        batterySize = loadGame.batterySize;
        factoryPowerRate = loadGame.factoryPowerRate;
        dronePowerRate = loadGame.dronePowerRate;
        farmLevel = loadGame.farmLevel;
        batteryLevel = loadGame.batteryLevel;
        farmCost = loadGame.farmCost;
        batteryCost = loadGame.batteryCost;
        storedPower = loadGame.storedPower;
        powMod = loadGame.powMod;
        farmBill = loadGame.farmBill;
        batteryBill = loadGame.batteryBill;
        momentum = loadGame.momentum;

        swarmFlag = loadGame.swarmFlag;
        swarmStatus = loadGame.swarmStatus;
        swarmGifts = loadGame.swarmGifts;
        nextGift = loadGame.nextGift;
        giftPeriod = loadGame.giftPeriod;
        giftCountdown = loadGame.giftCountdown;
        elapsedTime = loadGame.elapsedTime;    
    
        maxFactoryLevel = loadGame.maxFactoryLevel;
        maxDroneLevel = loadGame.maxDroneLevel;
        
        wirePriceCounter = loadGame.wirePriceCounter;
        wireBasePrice = loadGame.wireBasePrice;
    
        egoFlag = loadGame.egoFlag;
        autoTourneyFlag = loadGame.autoTourneyFlag;
        tothFlag = loadGame.tothFlag;
    
        incomeTracker = loadGame.incomeTracker.slice(0);
        qChips = loadGame.qChips.slice(0);     
        stocks = loadGame.stocks.slice(0);
        battles = loadGame.battles.slice(0);
        battleNumbers = loadGame.battleNumbers.slice(0);   
    
        clips = loadGame.clips;
        unusedClips = loadGame.unusedClips;
        clipRate = loadGame.clipRate;
        clipRateTemp = loadGame.clipRateTemp;
        prevClips = loadGame.prevClips;
        clipRateTracker = loadGame.clipRateTracker;
        clipmakerRate = loadGame.clipmakerRate;
        clipmakerLevel = loadGame.clipmakerLevel;
        clipperCost = loadGame.clipperCost;
        unsoldClips = loadGame.unsoldClips;
        funds = loadGame.funds;
        margin = loadGame.margin;
        wire = loadGame.wire;
        wireCost = loadGame.wireCost;
        adCost = loadGame.adCost;
        demand = loadGame.demand;
        clipsSold = loadGame.clipsSold;
        avgRev = loadGame.avgRev;
        ticks = loadGame.ticks;
        marketing = loadGame.marketing;
        marketingLvl = loadGame.marketingLvl;
        x = loadGame.x;
        clippperCost = loadGame.clippperCost;
        processors = loadGame.processors;
        memory = loadGame.memory;
        operations = loadGame.operations;
        trust = loadGame.trust;
        nextTrust = loadGame.nextTrust;
        transaction = loadGame.transaction;
        clipperBoost = loadGame.clipperBoost;
        blinkCounter = loadGame.blinkCounter;
        creativity = loadGame.creativity;
        creativityOn = loadGame.creativityOn;
        safetyProjectOn = loadGame.safetyProjectOn;
        boostLvl = loadGame.boostLvl;
        wirePurchase = loadGame.wirePurchase;
        wireSupply = loadGame.wireSupply;
        marketingEffectiveness = loadGame.marketingEffectiveness;
        milestoneFlag = loadGame.milestoneFlag;
        bankroll = loadGame.bankroll;
        fib1 = loadGame.fib1;
        fib2 = loadGame.fib2;
        strategyEngineFlag = loadGame.strategyEngineFlag;
        investmentEngineFlag = loadGame.investmentEngineFlag;
        revPerSecFlag = loadGame.revPerSecFlag;
        compFlag = loadGame.compFlag;
        projectsFlag = loadGame.projectsFlag;
        autoClipperFlag = loadGame.autoClipperFlag;
        megaClipperFlag = loadGame.megaClipperFlag;
        megaClipperCost = loadGame.megaClipperCost;
        megaClipperLevel = loadGame.megaClipperLevel;
        megaClipperBoost = loadGame.megaClipperBoost;
        creativitySpeed = loadGame.creativitySpeed;
        creativityCounter = loadGame.creativityCounter;
        wireBuyerFlag = loadGame.wireBuyerFlag;
        demandBoost = loadGame.demandBoost;
        humanFlag = loadGame.humanFlag;
        trustFlag = loadGame.trustFlag;
        nanoWire = loadGame.nanoWire;
        creationFlag = loadGame.creationFlag;
        wireProductionFlag = loadGame.wireProductionFlag;
        spaceFlag = loadGame.spaceFlag;
        factoryFlag = loadGame.factoryFlag;
        harvesterFlag = loadGame.harvesterFlag;
        wireDroneFlag = loadGame.wireDroneFlag;
        factoryLevel = loadGame.factoryLevel;
        factoryBoost = loadGame.factoryBoost;
        droneBoost = loadGame.droneBoost;
        availableMatter = loadGame.availableMatter;
        acquiredMatter = loadGame.acquiredMatter;
        processedMatter = loadGame.processedMatter;
        harvesterLevel = loadGame.harvesterLevel;
        wireDroneLevel = loadGame.wireDroneLevel;
        factoryCost = loadGame.factoryCost;
        harvesterCost = loadGame.harvesterCost;
        wireDroneCost = loadGame.wireDroneCost;
        factoryRate = loadGame.factoryRate;
        harvesterRate = loadGame.harvesterRate;
        wireDroneRate = loadGame.wireDroneRate;
        harvesterBill = loadGame.harvesterBill;
        wireDroneBill = loadGame.wireDroneBill;
        factoryBill = loadGame.factoryBill;
        probeCount = loadGame.probeCount;
        totalMatter = loadGame.totalMatter;
        foundMatter = loadGame.foundMatter;
        qFlag = loadGame.qFlag;
        qClock = loadGame.qClock;
        qChipCost = loadGame.qChipCost;
        nextQchip = loadGame.nextQchip;
        bribe = loadGame.bribe;
        battleFlag = loadGame.battleFlag;           

        portfolioSize = loadGame.portfolioSize;   
        stockID = loadGame.stockID;
        secTotal = loadGame.secTotal;
        portTotal = loadGame.portTotal;
        sellDelay = loadGame.sellDelay;
        riskiness = loadGame.riskiness;
        maxPort = loadGame.maxPort;
        m = loadGame.m;
        investLevel = loadGame.investLevel;
        investUpgradeCost = loadGame.investUpgradeCost;
        stockGainThreshold = loadGame.stockGainThreshold;
        ledger = loadGame.ledger;
        stockReportCounter = loadGame.stockReportCounter;
  
        tourneyCost = loadGame.tourneyCost;    
        tourneyLvl = loadGame.tourneyLvl; 
        stratCounter = loadGame.stratCounter; 
        roundNum = loadGame.roundNum; 
        hMove = loadGame.hMove; 
        vMove = loadGame.vMove;
        hMovePrev = loadGame.hMovePrev;
        vMovePrev = loadGame.vMovePrev;
        aa = loadGame.aa;
        ab = loadGame.ab;
        ba = loadGame.ba;
        bb = loadGame.bb;
        rounds = loadGame.rounds;
        currentRound = loadGame.currentRound;
        rCounter = loadGame.rCounter;
        tourneyInProg = loadGame.tourneyInProg;
        winnerPtr = loadGame.winnerPtr;
        high = loadGame.high;
        pick = loadGame.pick;
        yomi = loadGame.yomi;
        yomiBoost = loadGame.yomiBoost; 

        probeSpeed = loadGame.probeSpeed;  
        probeNav = loadGame.probeNav; 
        probeRep = loadGame.probeRep; 
        partialProbeSpawn = loadGame.partialProbeSpawn;
        probeHaz = loadGame.probeHaz;
        partialProbeHaz = loadGame.partialProbeHaz;
        probesLostHaz = loadGame.probesLostHaz;
        probesLostDrift = loadGame.probesLostDrift;
        probesLostCombat = loadGame.probesLostCombat;
        probeFac = loadGame.probeFac;
        probeWire = loadGame.probeWire;
        probeCombat = loadGame.probeCombat;
        attackSpeed = loadGame.attackSpeed;
        battleSpeed = loadGame.battleSpeed;
        attackSpeedFlag = loadGame.attackSpeedFlag;
        attackSpeedMod = loadGame.attackSpeedMod;
        probeDescendents = loadGame.probeDescendents;
        drifterCount = loadGame.drifterCount;
        warTrigger = loadGame.warTrigger;
        battleID = loadGame.battleID;
        battleName = loadGame.battleName;
        battleNameFlag = loadGame.battleNameFlag;
        maxBattles = loadGame.maxBattles;
        battleClock = loadGame.battleClock;
        battleAlarm = loadGame.battleAlarm;
        outcomeTimer = loadGame.outcomeTimer;
        drifterCombat = loadGame.drifterCombat;
        probeTrust = loadGame.probeTrust;
        probeUsedTrust = loadGame.probeUsedTrust;
        probeTrustCost = loadGame.probeTrustCost;
        probeLaunchLevel = loadGame.probeLaunchLevel;
        probeCost = loadGame.probeCost;
    
        project40b.priceTag = "($" + formatWithCommas(bribe)+")";
    project51.priceTag =  "(" + qChipCost + " ops)";
    
    
    refresh();
    
}

function reset() {
    localStorage.removeItem("saveGame");
    localStorage.removeItem("saveProjectsUses");
    localStorage.removeItem("saveProjectsFlags");
    localStorage.removeItem("saveProjectsActive");
    localStorage.removeItem("saveStratsActive");
    location.reload();
}

function loadPrestige() {
    
        var loadPrestige = JSON.parse(localStorage.getItem("savePrestige"));
        
        prestigeU = loadPrestige.prestigeU;
        prestigeS = loadPrestige.prestigeS;
}    

        </script>
        
    </body>
</html>
